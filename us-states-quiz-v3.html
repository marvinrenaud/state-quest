<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="State Quest">
    <title>State Quest - US Geography Challenge</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --bg: #0f172a;
            --bg-card: #1e293b;
            --bg-light: #334155;
            --text: #f1f5f9;
            --text-muted: #94a3b8;
            --glow: rgba(99, 102, 241, 0.4);
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        html, body { 
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif; 
            background: var(--bg); 
            color: var(--text);
            min-height: 100vh; 
            font-size: 18px; 
        }
        #root { min-height: 100vh; display: flex; flex-direction: column; }

        .app { max-width: 900px; margin: 0 auto; padding: 16px; flex: 1; width: 100%; }
        
        .header { text-align: center; padding: 20px 0; }
        .header h1 { 
            font-size: 2.2rem; 
            background: linear-gradient(135deg, #6366f1, #a855f7, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 6px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .header p { color: var(--text-muted); font-size: 1rem; }
        
        .nav-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            justify-content: center;
        }
        .nav-tab {
            padding: 10px 20px;
            background: var(--bg-card);
            border: 2px solid transparent;
            border-radius: 10px;
            color: var(--text-muted);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .nav-tab:hover { border-color: var(--primary); color: var(--text); }
        .nav-tab.active { 
            background: var(--primary); 
            color: #fff; 
            border-color: var(--primary);
        }
        
        .mode-title {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px 20px;
            background: linear-gradient(135deg, var(--primary), #8b5cf6);
            border-radius: 12px;
            margin-bottom: 16px;
            box-shadow: 0 4px 20px var(--glow);
        }
        .mode-title .icon { font-size: 1.5rem; }
        .mode-title .text { font-size: 1.2rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }

        .mode-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 14px; padding: 16px 0; }
        .mode-card { 
            background: var(--bg-card); 
            border-radius: 16px; 
            padding: 24px 16px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.3); 
            cursor: pointer; 
            text-align: center; 
            border: 3px solid transparent; 
            transition: all 0.25s;
            position: relative;
            overflow: hidden;
        }
        .mode-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: opacity 0.25s;
        }
        .mode-card:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);
            border-color: var(--primary);
        }
        .mode-card:hover::before { opacity: 1; }
        .mode-card:active { transform: scale(0.98); }
        .mode-card .icon { font-size: 3rem; margin-bottom: 12px; display: block; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); }
        .mode-card .title { font-size: 1.15rem; font-weight: 700; color: var(--text); display: block; margin-bottom: 4px; }
        .mode-card .desc { font-size: 0.85rem; color: var(--text-muted); display: block; }
        .mode-card .difficulty { 
            display: inline-block;
            margin-top: 10px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .mode-card .difficulty.hard { background: #dc2626; }
        .mode-card .difficulty.medium { background: #f59e0b; color: #000; }
        .mode-card .difficulty.easy { background: #10b981; }
        
        .mode-card.random { 
            grid-column: span 2; 
            background: linear-gradient(135deg, #8b5cf6, #6366f1, #3b82f6);
            animation: shimmer 3s ease infinite;
        }
        @keyframes shimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .mode-card.random .title { color: #fff; font-size: 1.3rem; }
        .mode-card.random .desc { color: rgba(255,255,255,0.85); }

        .quiz-header { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; gap: 10px; flex-wrap: wrap; }
        .back-btn { 
            background: var(--bg-card); 
            border: 2px solid var(--primary); 
            color: var(--primary); 
            padding: 10px 18px; 
            border-radius: 10px; 
            font-size: 1rem; 
            font-weight: 600; 
            cursor: pointer;
            transition: all 0.2s;
        }
        .back-btn:hover { background: var(--primary); color: #fff; }
        
        .timer {
            background: var(--bg-card);
            padding: 12px 20px;
            border-radius: 12px;
            font-weight: 700;
            box-shadow: 0 2px 12px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 14px;
            border: 2px solid var(--primary);
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
        }
        .timer .current {
            color: var(--primary);
            font-size: 1.4rem;
            letter-spacing: 0.5px;
            font-variant-numeric: tabular-nums;
            min-width: 160px;
            display: inline-block;
            text-align: right;
        }
        .timer .best {
            color: var(--success);
            font-size: 0.95rem;
            opacity: 0.9;
        }
        .timer.behind-pace {
            border-color: var(--warning);
            animation: timer-pulse 1s infinite;
        }
        .timer.behind-pace .current {
            color: var(--warning);
        }
        @keyframes timer-pulse {
            0%, 100% { box-shadow: 0 2px 12px rgba(245, 158, 11, 0.3); }
            50% { box-shadow: 0 2px 20px rgba(245, 158, 11, 0.6); }
        }

        .progress-section { margin: 12px 0; }
        .progress-bar { 
            width: 100%; 
            height: 14px; 
            background: var(--bg-light); 
            border-radius: 7px; 
            overflow: hidden; 
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
        }
        .progress-fill { 
            height: 100%; 
            background: linear-gradient(90deg, #6366f1, #a855f7, #ec4899); 
            border-radius: 7px; 
            transition: width 0.4s ease;
            box-shadow: 0 0 10px var(--glow);
        }
        .progress-text { 
            text-align: center; 
            color: var(--text-muted); 
            font-size: 0.95rem; 
            font-weight: 600; 
            margin-top: 6px;
        }
        .progress-text .score { color: var(--secondary); font-size: 1.1rem; }

        .map-container { display: flex; justify-content: center; align-items: center; padding: 12px; }
        .us-map { width: 100%; max-height: 48vh; touch-action: manipulation; filter: drop-shadow(0 4px 12px rgba(0,0,0,0.4)); }
        .state-path { 
            fill: var(--bg-light); 
            stroke: var(--primary); 
            stroke-width: 1; 
            cursor: pointer; 
            transition: all 0.2s; 
        }
        .state-path:hover { fill: #475569; }
        .state-path.selected { fill: var(--secondary); stroke: #d97706; stroke-width: 2; }
        .state-path.correct { fill: var(--success); stroke: #059669; animation: correctPulse 0.5s ease; }
        .state-path.incorrect { fill: var(--danger); stroke: #b91c1c; }
        .state-path.labeled { fill: #6366f1; stroke: #4f46e5; }
        .state-path.highlight { fill: var(--secondary); stroke: #d97706; stroke-width: 3; }
        .state-path.outline-only { fill: var(--bg-light); stroke: #64748b; stroke-width: 1.5; }
        .state-path.dim { fill: var(--bg-light); stroke: #64748b; stroke-width: 1.5; }
        
        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); filter: brightness(1.3); }
            100% { transform: scale(1); }
        }
        
        .state-label {
            font-weight: 700;
            fill: #fff;
            text-anchor: middle;
            dominant-baseline: middle;
            pointer-events: none;
            text-shadow: 0 1px 3px rgba(0,0,0,0.9), 0 0 6px rgba(0,0,0,0.5);
        }
        .state-label.full-name {
            font-size: 12px;
        }
        .state-label.initials {
            font-size: 10px;
        }

        .input-area { padding: 16px 0; }
        .prompt { 
            text-align: center; 
            font-size: 1.3rem; 
            font-weight: 700; 
            color: var(--text); 
            margin-bottom: 14px;
        }
        .state-input { 
            width: 100%; 
            padding: 16px 18px; 
            font-size: 1.15rem; 
            background: var(--bg-card);
            border: 3px solid var(--primary); 
            border-radius: 14px; 
            outline: none;
            color: var(--text);
            transition: all 0.2s;
        }
        .state-input:focus { 
            border-color: #a855f7; 
            box-shadow: 0 0 0 4px rgba(168, 85, 247, 0.3);
        }
        .state-input::placeholder { color: var(--text-muted); }
        
        .submit-btn { 
            width: 100%; 
            padding: 16px; 
            margin-top: 14px; 
            font-size: 1.15rem; 
            font-weight: 700; 
            background: linear-gradient(135deg, var(--primary), #8b5cf6); 
            color: #fff; 
            border: none; 
            border-radius: 14px; 
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.2s;
            box-shadow: 0 4px 12px var(--glow);
        }
        .submit-btn:disabled { background: var(--bg-light); box-shadow: none; cursor: not-allowed; }
        .submit-btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 6px 20px var(--glow); }

        .choices { display: flex; flex-direction: column; gap: 12px; padding: 16px 0; }
        .choice-btn { 
            padding: 18px; 
            font-size: 1.15rem; 
            font-weight: 600; 
            background: var(--bg-card); 
            border: 3px solid var(--primary); 
            border-radius: 14px; 
            color: var(--text);
            cursor: pointer; 
            transition: all 0.2s; 
        }
        .choice-btn:hover:not(:disabled) { background: var(--primary); color: #fff; transform: translateX(4px); }
        .choice-btn.correct { background: var(--success); border-color: #059669; color: #fff; animation: correctFlash 0.4s ease; }
        .choice-btn.incorrect { background: var(--danger); border-color: #b91c1c; color: #fff; }
        .choice-btn:disabled { cursor: not-allowed; }
        
        @keyframes correctFlash {
            0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
            50% { box-shadow: 0 0 20px 10px rgba(16, 185, 129, 0.4); }
        }

        .shape-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 14px; padding: 14px 0; }
        .shape-btn { 
            background: var(--bg-card); 
            border: 3px solid var(--primary); 
            border-radius: 14px; 
            padding: 8px; 
            cursor: pointer; 
            aspect-ratio: 1.6; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            transition: all 0.2s;
        }
        .shape-btn:hover:not(:disabled) { border-color: #a855f7; transform: scale(1.03); box-shadow: 0 4px 16px var(--glow); }
        .shape-btn.correct { background: var(--success); border-color: #059669; animation: correctFlash 0.4s ease; }
        .shape-btn.incorrect { background: var(--danger); border-color: #b91c1c; }
        .shape-btn svg { width: 100%; height: 100%; }

        .single-state { display: flex; justify-content: center; align-items: center; padding: 16px; min-height: 220px; }
        .single-state svg { max-width: 100%; max-height: 240px; width: 100%; height: auto; }

        .state-name-display { text-align: center; padding: 24px; }
        .state-name-display h2 { 
            font-size: 2.2rem; 
            background: linear-gradient(135deg, var(--secondary), #f97316);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }
        .state-name-display p { color: var(--text-muted); margin-top: 8px; font-size: 1.1rem; }

        .feedback { 
            position: fixed; 
            inset: 0; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            z-index: 100; 
            animation: fadeIn 0.25s;
        }
        .feedback.correct { background: linear-gradient(135deg, rgba(16, 185, 129, 0.97), rgba(5, 150, 105, 0.97)); }
        .feedback.incorrect { background: linear-gradient(135deg, rgba(239, 68, 68, 0.95), rgba(185, 28, 28, 0.95)); }
        .feedback .icon { font-size: 5rem; margin-bottom: 16px; animation: bounce 0.5s; }
        .feedback .msg { font-size: 2rem; font-weight: 800; color: #fff; text-transform: uppercase; letter-spacing: 2px; }
        .feedback .answer { font-size: 1.3rem; color: rgba(255,255,255,0.9); margin-top: 10px; }
        
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .results { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; z-index: 100; padding: 16px; }
        .results-card { 
            background: var(--bg-card); 
            border-radius: 24px; 
            padding: 32px; 
            max-width: 380px; 
            width: 100%; 
            text-align: center;
            border: 3px solid var(--primary);
            box-shadow: 0 8px 32px var(--glow);
        }
        .results-card h2 { font-size: 1.6rem; color: var(--text); margin-bottom: 20px; }
        .results-card .score { font-size: 3.5rem; font-weight: 800; color: var(--secondary); }
        .results-card .label { color: var(--text-muted); font-size: 1.1rem; }

        .completion { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            text-align: center; 
            padding: 40px 20px; 
            min-height: 70vh; 
        }
        .completion .trophy { font-size: 6rem; margin-bottom: 20px; animation: float 2s ease-in-out infinite; }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .completion h2 { 
            font-size: 2.4rem; 
            background: linear-gradient(135deg, #6366f1, #a855f7, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
            text-transform: uppercase;
        }
        .completion .score { font-size: 1.5rem; color: var(--text-muted); margin: 16px 0; }
        .completion .score span { color: var(--secondary); font-weight: 700; font-size: 1.8rem; }
        .completion .time { font-size: 1.2rem; color: var(--success); margin-bottom: 24px; }
        .completion .record { color: var(--secondary); font-weight: 700; }
        .completion .btn { 
            padding: 16px 40px; 
            font-size: 1.15rem; 
            font-weight: 700; 
            border: none; 
            border-radius: 14px; 
            cursor: pointer; 
            margin-top: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.2s;
        }
        .completion .btn.primary { 
            background: linear-gradient(135deg, var(--primary), #8b5cf6); 
            color: #fff;
            box-shadow: 0 4px 12px var(--glow);
        }
        .completion .btn.secondary { background: var(--success); color: #fff; }
        .completion .btn:hover { transform: translateY(-2px); }

        /* Progress Page Styles */
        .progress-page { padding: 16px 0; }
        .progress-page h2 { 
            text-align: center; 
            font-size: 1.8rem; 
            margin-bottom: 20px;
            background: linear-gradient(135deg, #6366f1, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }
        .stat-card {
            background: var(--bg-card);
            border-radius: 14px;
            padding: 16px;
            text-align: center;
            border: 2px solid var(--bg-light);
        }
        .stat-card .value { 
            font-size: 2rem; 
            font-weight: 800; 
            color: var(--secondary);
        }
        .stat-card .label { 
            font-size: 0.85rem; 
            color: var(--text-muted);
            margin-top: 4px;
        }
        .history-section { margin-top: 24px; }
        .history-section h3 { 
            font-size: 1.2rem; 
            color: var(--text); 
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .history-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
        }
        .history-item {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 14px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid var(--primary);
        }
        .history-item.perfect { border-left-color: var(--success); }
        .history-item .mode-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .history-item .mode-icon { font-size: 1.5rem; }
        .history-item .mode-name { font-weight: 600; color: var(--text); }
        .history-item .mode-date { font-size: 0.8rem; color: var(--text-muted); }
        .history-item .result {
            text-align: right;
        }
        .history-item .result-score { 
            font-size: 1.2rem; 
            font-weight: 700;
            color: var(--secondary);
        }
        .history-item .result-time { 
            font-size: 0.85rem; 
            color: var(--text-muted);
        }
        .clear-btn {
            margin-top: 16px;
            padding: 12px 24px;
            background: var(--danger);
            color: #fff;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .clear-btn:hover { opacity: 0.9; }
        .empty-state {
            text-align: center;
            padding: 40px;
            color: var(--text-muted);
        }
        .empty-state .icon { font-size: 3rem; margin-bottom: 12px; }

        .confetti { position: fixed; inset: 0; pointer-events: none; overflow: hidden; z-index: 1000; }
        .confetti-piece { position: absolute; width: 12px; height: 12px; top: -20px; animation: fall 3s ease-out forwards; }
        
        @keyframes fall { 
            0% { transform: translateY(0) rotate(0deg); opacity: 1; } 
            100% { transform: translateY(100vh) rotate(1080deg); opacity: 0; } 
        }

        .timer-toggle { 
            display: flex; 
            align-items: center; 
            justify-content: center;
            gap: 14px; 
            padding: 14px 20px; 
            background: var(--bg-card); 
            border-radius: 14px; 
            margin-bottom: 16px;
        }
        .timer-toggle label { font-weight: 600; color: var(--text); }
        .toggle { 
            width: 56px; 
            height: 30px; 
            background: var(--bg-light); 
            border-radius: 15px; 
            position: relative; 
            cursor: pointer; 
            transition: background 0.25s;
        }
        .toggle.active { background: var(--success); }
        .toggle::after { 
            content: ''; 
            position: absolute; 
            width: 26px; 
            height: 26px; 
            background: #fff; 
            border-radius: 50%; 
            top: 2px; 
            left: 2px; 
            transition: transform 0.25s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        .toggle.active::after { transform: translateX(26px); }

        .action-btns { display: flex; gap: 12px; margin-top: 14px; }
        .action-btns button { 
            flex: 1; 
            padding: 14px; 
            font-size: 1rem; 
            font-weight: 700; 
            border: none; 
            border-radius: 12px; 
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.2s;
        }
        .action-btns .check { background: var(--secondary); color: #000; }
        .action-btns .reset { background: var(--danger); color: #fff; }
        .action-btns button:hover { transform: translateY(-2px); }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            color: var(--text-muted);
            font-size: 0.9rem;
            border-top: 1px solid var(--bg-light);
            margin-top: auto;
        }
        .footer .heart { color: #ef4444; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        @media (max-width: 550px) {
            .mode-grid { grid-template-columns: 1fr; }
            .mode-card.random { grid-column: span 1; }
            .header h1 { font-size: 1.8rem; }
            .shape-grid { grid-template-columns: 1fr; }
            .shape-btn { aspect-ratio: 1.8; }
            .stats-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef, useMemo, useCallback } = React;

// State data with paths from Wikipedia Commons (public domain)
const STATES = {
  AK: { name: "Alaska", path: "m 15.8,572 h 2.4 l .7,.7 -1,1.2 -1.9,.2 -2.5,1.3 -3.7,-.1 2.2,-.9 .3,-1.1 2.5,-.3 z m 8.3,-1.7 1.3,.5 h .9 l .5,1.2 .3,-.6 .9,.2 1.1,1.5 0,.5 -4.2,1.9 -2.4,-.1 -1,-.5 -1.1,.7 -2,0 -1.1,-1.4 4.7,-.5 z m 5.4,-.1 1,.1 .7,.7 v 1 l -1.3,.1 -.9,-1.1 z m 2.5,.3 1.3,-.1 -.1,1 -1.1,.6 z m .3,2.2 3.4,-.1 .2,1.1 -1.3,.1 -.3,-.5 -.8,.6 -.4,-.6 -.9,-.2 z m 166.3,7.6 2.1,.1 -1,1.9 -1.1,-.1 -.4,-.8 .5,-1.3 m -1.1,-2.9 .6,-1.3 -.2,-2.3 2.4,-.5 4.5,4.4 1.3,3.4 1.9,1.6 .3,5.1 -1.4,0 -1.3,-2.3 -3.1,-2.4 h -.6 l 1.1,2.8 1.7,.2 .2,2.1 -.9,.1 -4.1,-4.4 -.1,-.9 1.9,-1 0,-1 -.5,-.8 -1.6,-.6 -1.7,-1.3 1.4,.1 .5,-.4 -.6,-.9 -.6,.5 z m -3.6,-9.1 1.3,.1 2.4,2.5 -.2,.8 -.8,-.1 -.1,1.8 .5,.5 0,1.5 -.8,.3 -.4,1.2 -.8,-.4 -.4,-2.2 1.1,-1.4 -2.1,-2.2 .1,-1.2 z m 1.5,-1.5 1.9,.2 2.5,.1 3.4,3.2 -.2,.5 -1.1,.6 -1.1,-.2 -.1,-.7 -1.2,-1.6 -.3,.7 1,1.3 -.2,1.2 -.8,-.1 -1.3,.2 -.1,-1.7 -2.6,-2.8 z m -12.7,-8.9 .9,-.4 h 1.6 l .7,-.5 4.1,2.2 .1,1.5 -.5,.5 h -.8 l -1.4,-.7 1.1,1.3 1.8,0 .5,2 -.9,0 -2.2,-1.5 -1.1,-.2 .6,1.3 .1,.9 .8,-.6 1.7,1.2 1.3,-.1 -.2,.8 1.9,4.3 0,3.4 .4,2.1 -.8,.3 -1.2,-2 -.5,-1.5 -1.6,-1.6 -.2,-2.7 -.6,-1.7 h -.7 l .3,1.1 0,.5 -1.4,1 .1,-3.3 -1.6,-1.6 -1.3,-2.3 -1.2,-1.2 z m 7.2,-2.3 1.1,1.8 2.4,-.1 1,2.1 -.6,.6 2,3.2 v 1.3 l -1.2,.8 v .7 l -2,1.9 -.5,-1.4 -.1,-1.3 .6,-.7 v -1.1 l -1.5,-1.9 -.5,-3.7 -.9,-1.5 z m -56.7,-18.3 -4,4.1 v 1.6 l 2.1,-.8 .8,-1.9 2.2,-2.4 z m -31.6,16.6 0,.6 1.8,1.2 .2,-1.4 .6,.9 3.5,.1 .7,-.6 .2,-1.8 -.5,-.7 -1.4,0 0,-.8 .4,-.6 v -.4 l -1.5,-.3 -3.3,3.6 z m -8.1,6.2 1.5,5.8 h 2.1 l 2.4,-2.5 .3,1.2 6.3,-4 .7,-1 -1,-1.1 v -.7 l .5,-1.3 -.9,-.1 -2,1 0,-1.2 -2.7,-.6 -2.4,.3 -.2,3.4 -.8,-2 -1.5,-.1 -1,.6 z m -2.2,8.2 .1,-.7 2.1,-1.3 .6,.3 1.3,.2 1.3,1.2 -2.2,-.2 -.4,-.6 -1,.6 z m -5.2,3.3 -1.1,.8 1.5,1.4 .8,-.7 -.1,-1.3 z m -6.3,-7.9 1.4,.1 .4,.6 -1.8,.1 z m -13.9,11.9 v .5 l .7,.1 -.1,-.6 z m -.4,-3.2 -1,1 v .5 l .7,1.1 1,-1 -.7,-.1 z m -2,-.8 -.3,1 -1.3,.1 -.4,.2 0,1.3 -.5,.9 .6,0 .7,-.9 .8,-.1 .9,-1 .2,-1.3 z m -4.4,-2 -.2,1.8 1.4,.8 1.2,-.6 0,-1 1.7,-.3 -.1,-.6 -.9,-.2 -.7,.6 -.9,-.5 z m -4.9,-.1 1,.7 -.3,1.2 -1.4,-1.1 z m -4.2,1.3 1.4,.1 -.7,.8 z m -3.5,3 1.8,1.1 -1.7,.1 z m -25.4,-31.2 1.2,.6 -.8,.6 z m -.7,-6.3 .4,1.2 .8,-1.2 z m 24.3,-19.3 1.5,-.1 .9,.4 1.1,-.5 1.3,-.1 1.6,.8 .8,1.9 -.1,.9 -1.2,2 -2.4,-.2 -2.1,-1.8 -1,-.4 -1.1,-2 z m -21.1,-14.4 .1,1.9 2,2 v .5 l -.8,-.2 -1.7,-.8 -.3,-1.1 -.3,-1.6 z m 18.3,-23.3 v 1.2 l 1.9,1.8 h 2.3 l .6,1.1 v 1.6 l 2.1,1.9 1.8,1.2 -.1,.7 -.7,1.1 -1.4,-1.2 -2.1,.1 -.8,-.8 -.9,-2.1 -1.5,-2.2 -2.6,-.1 -1,-.7 1,-2.1 z m 16.8,-4.5 1,0 .1,1.1 h -1 z m 16.2,19.7 .9,.1 0,1.2 -1.7,-.5 z m 127.8,77.7 -1.2,.4 -.1,1.1 h 1.2 z m -157.6,-4.5 -1.3,-.4 -4.1,.6 -2.8,1.4 -.1,1.9 1.9,.7 1.5,-.9 1.7,-.1 4.7,1.4 .1,-1.3 -1.6,-1.1 z m 2.1,2.3 -.4,-1.4 1.2,.2 .1,1.4 1.8,0 .4,-2.5 .3,2.4 2.5,-.1 3.2,-3.3 .8,.1 -.7,1.3 1.4,.9 4.2,-.2 2.6,-1.2 1.4,-.1 .3,1.5 .6,-.5 .4,-1.4 5.9,.2 1.9,-1.6 -1.3,-1.1 .6,-1.2 2.6,.2 -.2,-1.2 2.5,.2 .7,-1.1 1.1,.2 4.6,-1.9 .2,-1.7 5.6,-2.4 2,-1.9 1.2,-.6 1.3,.8 2.3,-.9 1.1,-1.9 .5,-1.3 1.7,-.9 1.5,-.7 .4,-1.4 -1.1,-1.7 -2.2,-.2 -.2,-1.3 .8,-1.6 1.4,-.2 1.3,-1.5 1.9,-.1 3.4,-3.2 .4,-1.4 1.5,-2.3 3.8,-4.1 2.5,-.9 1.9,-.9 2.1,.8 1.4,2.6 -1.5,0 -1.4,-1.5 -3,2 -1.7,.1 -.2,3.1 -3.1,4.9 .6,2 2.3,0 -.6,1 -1.4,.1 -2.4,1.8 0,.9 1.9,1 3.4,-.6 1.4,-1.7 1.4,.1 3,-1.7 .5,-2.3 1.6,-.1 6.3,.8 1,-1.1 1,-4.5 -1.6,1.1 .6,-2.2 -1.6,-1.4 .8,-1.5 .1,1.5 3.4,0 .7,-1 1.6,-.1 -.3,1.7 1.9,.1 -1.9,1.3 4.1,1.1 -3.5,.4 -1.3,1.2 .9,1.4 4.6,-1.7 2.3,1.7 .7,-.9 .6,1.4 4,2.3 h 2.9 l 3.9,-.5 4.3,1.1 2,1.9 4.5,.4 1.8,-1.5 .8,2.4 -1.8,.7 1.2,1.2 7.4,3.8 1.4,2.5 5.4,4.1 3.3,-2 -.6,-2.2 -3.5,-2 3.1,1.2 .5,-.7 .9,1.3 0,2.7 2.1,-.6 2.1,1.8 -2.5,-9.8 1.2,1.3 1.4,6 2.2,2.5 2.4,-.4 1.8,3.5 h .9 l .6,5.6 3.4,.5 1.6,2.2 1.8,1.1 .4,2.8 -1.8,2.6 2.9,1.6 1.2,-2.4 -.2,3.1 -.8,.9 1.4,1.7 .7,-2.4 -.2,-1.2 .8,.2 .6,2.3 -1,1.4 .6,2.6 .5,.4 .3,-1.6 .7,.6 -.3,2 1.2,.2 -.4,.9 1.7,-.1 0,-1 h -1 l .1,-1.7 -.8,-.6 1.7,-.3 .5,-.8 0,-1.6 .5,1.3 -.6,1.8 1.2,3.9 1.8,.1 2.2,-4.2 .1,-1.9 -1.3,-4 -.1,-1.2 .5,-1.2 -.7,-.7 -1.7,.1 -2.5,-2 -1.7,0 -2,-1.4 -1.5,0 -.5,-1.6 -1.4,-.3 -.2,-1.5 -1,-.5 .1,-1.7 -5.1,-7.4 -1.8,-1.5 v -1.2 l -4.3,-3.5 -.7,-1.1 -1.6,-2 -1.9,-.6 0,-2.2 -1.2,-1.3 -1.7,-.7 -2.1,1.3 -1.6,2.1 -.4,2.4 -1.5,.1 -2.5,2.7 -.8,-.3 v -2.5 l -2.4,-2.2 -2.3,-2 -.5,-2 -2.5,-1.3 .2,-2.2 -2.8,-.1 -.7,1.1 -1.2,0 -.7,-.7 -1.2,.8 -1.8,-1.2 0,-85.8 -6.9,-4.1 -1.8,-.5 -2.2,1.1 -2.2,.1 -2.3,-1.6 -4.3,-.6 -5.8,-3.6 -5.7,-.4 -2,.5 -.2,-1.8 -1.8,-.7 1.1,-1 -.2,-.9 -3.2,-1.1 h -2.4 l -.4,.4 -.9,-.6 .1,-2.6 -.8,-.9 -2.5,2.9 -.8,-.1 v -.8 l 1.7,-.8 v -.8 l -1.9,-2.4 -1.1,-.1 -4.5,3.1 h -3.9 l .4,-.9 -1.8,-.1 -5.2,3.4 -1.8,0 -.6,-.8 -2.7,1.5 -3.6,3.7 -2.8,2.7 -1.5,1.2  -2.6,.1 -2.2,-.4 -2.3,-1.3 v 0 l -2.8,3.9 -.1,2.4 2.6,2.4 2.1,4.5 .2,5.3 2.9,2 3.4,.4 .7,.8 -1.5,2.3 .7,2.7 -1.7,-2.6 v -2.4 l -1.5,-.3 .1,1.2 .7,2.1 2.9,3.7 h -1.4 l -2.2,1.1 -6.2,-2.5 -.1,-2 1.4,-1.3 0,-1.4 -2.1,-.5 -2.3,.2 -4.8,.2 1.5,2.3 -1.9,-1.8 -8.4,1.2 -.8,1.5 4.9,4.7 -.8,1.4 -.3,2 -.7,.8 -.1,1.9 4.4,3.6 4.1,.2 4.6,1.9 h 2 l .8,-.6 3.8,.1 .1,-.8 1.2,1.1 .1,2 -2.5,-.1 .1,3.3 .5,3.2 -2.9,2.7 -1.9,-.1 -2,-.8 -1,.1 -3.1,2.1 -1.7,.2 -1.4,-2.8 -3.1,0 -2.2,2 -.5,1.8 -3.3,1.8 -5.3,4.3 -.3,3.1 .7,2.2 1,1.2 1,-.4 .9,1 -.8,.6 -1.5,.9 1.1,1.5 -2.6,1.1 .8,2.2 1.7,2.3 .8,4.1 4,1.5 2.6,-.8 1.7,-1.1 .5,2.1 .3,4.4 -1.9,1.4 0,4.4 -.6,.9 h -1.7 l 1.7,1.2 2.1,-.1 .4,-1 4.6,-.6 2,2.6 1.3,-.7 1.3,5.1 1,.5 1,-.7 .1,-2.4 .9,-1 .7,1.1 .2,1.6 1.6,.4 4.7,-1.2 .2,1.2 -2,1.1 -1.6,1.7 -2.8,7 -4.3,2 -1.4,1.5 -.3,1.4 -1,-.6 -9.3,3.3 -1.8,4.1 -1.3,-.4 .5,-1.1 -1.5,-1.4 -3.5,-.2 -5.3,3.2 -2.2,1.3 -2.3,0 -.5,2.4 z", center: [150, 515] },
  AL: { name: "Alabama", path: "m 643,467.4 .4,-7.3 -.9,-1.2 -1.7,-.7 -2.5,-2.8 .5,-2.9 48.8,-5.1 -.7,-2.2 -1.5,-1.5 -.5,-1.4 .6,-6.3 -2.4,-5.7 .5,-2.6 .3,-3.7 2.2,-3.8 -.2,-1.1 -1.7,-1 v -3.2 l -1.8,-1.9 -2.9,-6.1 -12.9,-45.8 -45.7,4 1.3,2 -1.3,67 4.4,33.2 .9,-.5 1.3,.1 .6,.4 .8,-.1 2,-3.8 v -2.3 l 1.1,-1.1 1.4,.5 3.4,6.4 v .9 l -3.3,2.2 3.5,-.4 4.9,-1.6 z", center: [645, 420] },
  AR: { name: "Arkansas", path: "m 584.2,367 .9,-2.2 1.2,.5 .7,-1 -.8,-.7 .3,-1.5 -1.1,-.9 .6,-1 -.1,-1.5 -1.1,-.1 .8,-.8 1.3,.8 .3,-1.4 -.4,-1.1 .1,-.7 2,.6 -.4,-1.5 1.6,-1.3 -.5,-.9 -1.1,.1 -.6,-.9 .9,-.9 1.6,-.2 .5,-.8 1.4,-.2 -.1,-.8 -.9,-.9 v -.5 h 1.5 l .4,-.7 -1.4,-1 -.1,-.6 -11.2,.8 2.8,-5.1 1.7,-1.5 v -2.2 l -1.6,-2.5 -39.8,2 -39.1,.7 4.1,24.4 -.7,39 2.6,2.3 2.8,-1.3 3.2,.8 .2,11.9 52.3,-1.3 1.2,-1.5 .5,-3 -1.5,-2.3 -.5,-2.2 .9,-.7 v -.8 l -1.7,-1.1 -.1,-.7 1.6,-.9 -1.2,-1.1 1.7,-7.1 3.4,-1.6 v -.8 l -1.1,-1.4 2.9,-5.4 h 1.9 l 1.5,-1.2 -.3,-5.2 3.1,-4.5 1.8,-.6 -.5,-3.1 z", center: [555, 380] },
  AZ: { name: "Arizona", path: "m 139.6,387.6 3,-2.2 .8,-2.4 -1,-1.6 -1.8,-.2 -1.1,-1.6 1.1,-6.9 1.6,-.3 2.4,-3.2 1.6,-7 2.4,-3.6 4.8,-1.7 1.3,-1.3 -.4,-1.9 -2.3,-2.5 -1.2,-5.8 -1.4,-1.8 -1.3,-3.4 .9,-2.1 1.4,-3 .5,-2.9 -.5,-4.9 1,-13.6 3.5,-.6 3.7,1.4 1.2,2.7 h 2 l 2.4,-2.9 3.4,-17.5 46.2,8.2 40,6 -17.4,124.1 -37.3,-5.4 -64.2,-37.5 .5,-2.9 2,-1.8 z", center: [185, 375] },
  CA: { name: "California", path: "m 69.4,365.6 3.4,5.2 -1.4,.1 -1.8,-1.9 z m 1.9,-9.8 1.8,4.1 2.6,1 .7,-.6 -1.3,-2.5 -2.6,-2.4 z m -19.9,-19 v 2.4 l 2,1.2 4.4,-.2 1,-1 -3.1,-.2 z m -5.9,.1 3.3,.5 1.4,2.2 h -3.8 z m 47.9,45.5 -1,-3 .2,-3 -.4,-7.9 -1.8,-4.8 -1.2,-1.4 -.6,-1.5 -7,-8.6 -3.6,.1 -2,-1.9 1.1,-1.8 -.7,-3.7 -2.2,-1.2 -3.9,-.6 -2.8,-1.3 -1.5,-1.9 -4.5,-6.6 -2.7,-2.2 -3.7,-.5 -3.1,-2.3 -4.7,-1.5 -2.8,-.3 -2.5,-2.5 .2,-2.8 .8,-4.8 1.8,-5.1 -1.4,-1.6 -4,-9.4 -2.7,-3.7 -.4,-3 -1.6,-2.3 .2,-2.5 -2,-5 -2.9,-2.7 .6,-7.1 2.4,-.8 1.8,-3.1 -.4,-3.2 -1,-.9 h -2.5 l -2.5,-3.3 -1.5,-3.5 v -7.5 l 1.2,-4.2 .2,-2.1 2.5,.2 -.1,1.6 -.8,.7 v 2.5 l 3.7,3.2 v -4.7 l -1.4,-3.4 .5,-1.1 -1,-1.7 2.8,-1.5 -1.9,-3 -1.4,.5 -1.5,3.8 .5,1.3 -.8,1 -.9,-.1 -5.4,-6.1 .7,-5.6 -1.1,-3.9 -6.5,-12.8 .8,-10.7 2.3,-3.6 .2,-6.4 -5.5,-11.1 .3,-5.2 6.9,-7.5 1.7,-2.4 -.1,-1.4 4,-9.2 .1,-8.4 .9,-2.5 66.1,18.6 -16.4,63.1 1.1,3.5 70.4,105 -.9,2.1 1.3,3.4 1.4,1.8 1.2,5.8 2.3,2.5 .4,1.9 -1.3,1.3 -4.8,1.7 -2.4,3.6 -1.6,7 -2.4,3.2 -1.6,.3 -1.1,6.9 1.1,1.6 1.8,.2 1,1.6 -.8,2.4 -3,2.2 -2.2,-.1 z", center: [90, 320] },
  CO: { name: "Colorado", path: "m 374.6,323.3 -16.5,-1 -51.7,-4.8 -52.6,-6.5 11.5,-88.3 44.9,5.7 37.5,3.4 33.1,2.4 -1.4,22.1 z", center: [305, 295] },
  CT: { name: "Connecticut", path: "m 873.5,178.9 .4,-1.1 -3.2,-12.3 -.1,-.3 -14.9,3.4 v .7 l -.9,.3 -.5,-.7 -10.5,2.4 2.8,16.3 1.8,1.5 -3.5,3.4 1.7,2.2 5.4,-4.5 1.7,-1.3 h .8 l 2.4,-3.1 1.4,.1 2.9,-1.1 h 2.1 l 5.3,-2.7 2.8,-.9 1,-1 1.5,.5 z", center: [860, 185] },
  DE: { name: "Delaware", path: "m 822.2,226.6 -1.6,.3 -1.5,1.1 -1.2,2.1 7.6,27.1 10.9,-2.3 -2.2,-7.6 -1.1,.5 -3.3,-2.6 -.5,-1.7 -1.8,-1 -.2,-3.7 -2.1,-2.2 -1.1,-.8 -1.2,-1.1 -.4,-3.2 .3,-2.1 1,-2.2 z", center: [825, 245] },
  FL: { name: "Florida", path: "m 751.7,445.1 -4,-.7 -1.7,-.9 -2.2,1.4 v 2.5 l 1.4,2.1 -.5,4.3 -2.1,.6 -1,-1.1 -.6,-3.2 -50.1,3.3 -3.3,-6 -48.8,5.1 -.5,2.9 2.5,2.8 1.7,.7 .9,1.2 -.4,7.3 -1.1,.6 .5,.4 1,-.3 .7,-.8 10.5,-2.7 9.2,-.5 8.1,1.9 8.5,5 2.4,.8 2.2,2 -.1,2.7 h 2.4 l 1.9,-1 2.5,.1 2,-.8 2.9,-2 3.1,-2.9 1.1,-.4 .6,.5 h 1.4 l .5,-.8 -.5,-1.2 -.6,-.6 .2,-.8 2,-1.1 5,-.4 .8,1 1,.1 2.3,1 3,1.8 1.2,1.7 1.1,1.2 2.8,1.4 v 2.4 l 2.8,1.9 1,.1 1.6,1.4 .7,1.6 1,.2 .8,2.1 .7,.6 1,-1.1 2.9,.1 .5,1.4 1.1,.9 v 1.3 l 2.9,2.2 .2,9.6 -1.8,5.8 1,1.2 -.2,3.4 -.8,1.4 .7,1.2 2.3,2.3 .3,1.5 .8,1 -.4,-1.9 1.3,-.6 .8,-3.6 -3,-1.2 .1,-.6 2.6,-.4 .9,2.6 1.1,.6 .1,-2 1.1,.3 .6,.8 -.1,.7 -2.9,4.2 -.2,1.1 -1.7,1.9 v 1.1 l 3.7,3.8 5.3,7.9 1.8,2.1 v 1.8 l 2.8,4.6 2.3,.6 .7,-1.2 -2.1,.3 -3,-4.5 .2,-1.4 1.5,-.8 v -1.5 l -.6,-1.3 .9,-.9 .4,.9 .7,.5 v 4 l -1.2,-.6 -.8,.9 1.4,1.6 1,2.6 1.2,-.6 2.3,1.2 2.1,2.2 1.6,5.1 3.1,4.8 .8,-1.3 2.8,-.5 3.2,1.3 .3,1.7 3.3,3.8 .1,1.1 2.2,2.7 -.7,.5 v 2.7 l 2.7,1.4 h 1.5 l 2.7,-1.8 1.5,.3 1.1,.4 2.3,-1.7 .2,-.7 1.2,.3 2.4,-1.7 1.3,-2.3 -.7,-3.2 -.2,-1.3 1.1,-4 .6,-.2 .6,1.6 .8,-1.8 -.8,-7.2 -.4,-10.5 -1,-6.8 -.7,-1.7 -6.6,-11.1 -5.2,-9.1 -2.2,-3.3 -1.3,-3.6 -.2,-3.4 .9,-.3 v -.9 l -1.1,-2.2 -4,-4 -7.6,-9.7 -5.7,-10.4 -4.3,-10.7 -.6,-3.7 -1.2,-1 -.5,-3.8 z m 9.2,134.5 1.7,-.1 -.7,-1 z m 7.3,-1.1 v -.7 l 1.6,-.2 3.7,-3.3 1.5,-.6 2.4,-.9 .3,1.3 1.7,.8 -2.6,1.2 h -2.4 l -3.9,2.5 z m 17.2,-7.6 -3,1.4 -1,1.3 1.1,.1 z m 3.8,-2.9 -1.1,.3 -1.4,2 1.1,-.2 1.5,-1.6 z m 8.3,-15.7 -1.7,5.6 -.8,1 -1,2.6 -1.2,1.6 -.7,1.7 -1.9,2.2 v .9 l 2.7,-2.8 2.4,-3.5 .6,-2 2.1,-4.9 z", center: [720, 480] },
  GA: { name: "Georgia", path: "m 761.8,414.1 v 1.4 l -4.2,6.2 -1.2,.2 1.5,.5 v 2 l -.9,1.1 -.6,6 -2.3,6.2 .5,2 .7,5.1 -3.6,.3 -4,-.7 -1.7,-.9 -2.2,1.4 v 2.5 l 1.4,2.1 -.5,4.3 -2.1,.6 -1,-1.1 -.6,-3.2 -50.1,3.3 -3.3,-6 -.7,-2.2 -1.5,-1.5 -.5,-1.4 .6,-6.3 -2.4,-5.7 .5,-2.6 .3,-3.7 2.2,-3.8 -.2,-1.1 -1.7,-1 v -3.2 l -1.8,-1.9 -2.9,-6.1 -12.9,-45.8 22.9,-2.9 21.4,-3 -.1,1.9 -1.9,1 -1.4,3.2 .2,1.3 6.1,3.8 2.6,-.3 3.1,4 .4,1.7 4.2,5.1 2.6,1.7 1.4,.2 2.2,1.6 1.1,2.2 2,1.6 1.8,.5 2.7,2.7 .1,1.4 2.6,2.8 5,2.3 3.6,6.7 .3,2.7 3.9,2.1 2.5,4.8 .8,3.1 4.2,.4 z", center: [700, 400] },
  HI: { name: "Hawaii", path: "m 317,553.7 -.2,3.2 1.7,1.9 .1,1.2 -4.8,4.5 -.1,1.2 1.9,3.2 1.7,4.2 v 2.6 l -.5,1.2 .1,3.4 4.1,2.1 1.1,1.1 1.2,-1.1 2.1,-3.6 4.5,-2.9 3.3,-.5 2.5,-1 1.7,-1.2 3.2,-3.5 -2.8,-1.1 -1.4,-1.4 .1,-1.7 -.5,-.6 h -2 l .2,-2.5 -.7,-1.2 -2.6,-2.3 -4.5,-1.9 -2.8,-.2 -3.3,-2.7 -1.2,-.6 z m -15.3,-17 -1.1,1.5 -.1,1.7 2.7,2.4 1.9,.5 .6,1 .4,3 3.6,.2 5.3,-2.6 -.1,-2.5 -1.4,-.5 -3.5,-2.6 -1.8,-.3 -2.9,1.3 -1.5,-2.7 z m -1.5,11.5 .9,-1.4 2.5,-.3 .6,1.8 z m -7,-8.7 1.7,4 3.1,-.6 .3,-2 -1.4,-1.5 z m -4.1,-6.7 -1.1,2.4 h 5 l 4.8,1.6 2.5,-1.6 .2,-1.5 -4.8,.2 z m -16,-10.6 -1.9,2.1 -2.9,.6 .8,2.2 2.2,2.8 .1,1 2.1,-.3 2.3,.1 1.7,1.2 3.5,-.8 v -.7 l -1,-.8 -.5,-2.1 -.8,-.3 -.5,1 -1.2,-1.3 .2,-1.4 -1.8,-3.3 -1.1,-.7 z m -31.8,-12.4 -4.2,2.9 .2,2.3 2.4,1.2 1.9,1.3 2.7,.4 2.6,-2.2 -.2,-1.9 .8,-1.7 v -1.4 l -1,-.9 z m -10.8,4.8 -.3,1.2 -1.9,.9 -.6,1.8 1,.8 1.1,-1.5 1.9,-.6 .4,-2.6 z", center: [295, 540] },
  IA: { name: "Iowa", path: "m 556.9,183 2.1,1.6 .6,1.1 -1.6,3.3 -.1,2.5 2,5.5 2.7,1.5 3.3,.7 1.3,2.8 -.5,.6 2.5,1.3 1.7,1.7 -.2,1.6 .9,1.1 h 1.2 l 2.8,3.5 .1,2.6 -1.3,3.2 -1.1,1.3 -.1,2.4 -1.7,2.2 -4.2,1.8 h -2.4 l -3,.8 -1,4 1.1,1.6 1,.3 .9,1.4 -.1,3.5 -.5,.5 -1.7,2.4 v 2.4 l -1,1.2 -.9,.3 -1.8,.6 -1,1.5 .7,.9 -.1,2.3 -.7,.7 -1.5,-.8 -1.1,-1.1 -.6,-1.6 -1.7,-1.3 -14.3,.8 -27.2,1.2 -25.9,-.1 -1.8,-4.4 .7,-2.2 -.8,-3.3 .2,-2.9 -1.3,-.7 -.4,-6.1 -2.8,-5 -.2,-3.7 -2.2,-4.3 -1.3,-3.7 v -1.4 l -.6,-1.7 v -2.3 l -.5,-.9 -.7,-1.7 -.3,-1.3 -1.3,-1.2 1,-4.3 1.7,-5.1 -.7,-2 -1.3,-.4 -.4,-1.6 1,-.5 .1,-1.1 -1.3,-1.5 .1,-1.6 2.2,.1 h 28.2 l 36.3,-.9 18.6,-.7 z", center: [520, 225] },
  ID: { name: "Idaho", path: "m 165.3,183.1 -24.4,-5.4 8.5,-37.3 2.9,-5.8 .4,-2.1 .8,-.9 -.9,-2 -2.9,-1.2 .2,-4.2 4,-5.8 2.5,-.8 1.6,-2.3 -.1,-1.6 1.8,-1.6 3.2,-5.5 4.2,-4.8 -.5,-3.2 -3.5,-3.1 -1.6,-3.6 1.1,-4.3 -.7,-4 12.7,-56.1 14.2,3 -4.8,22 3.7,7.4 -1.6,4.8 3.6,4.8 1.9,.7 3.9,8.3 v 2.1 l 2.3,3 h .9 l 1.4,2.1 h 3.2 v 1.6 l -7.1,17 -.5,4.1 1.4,.5 1.6,2.6 2.8,-1.4 3.6,-2.4 1.9,1.9 .5,2.5 -.5,3.2 2.5,9.7 2.6,3.5 2.3,1.4 .4,3 v 4.1 l 2.3,2.3 1.6,-2.3 6.9,1.6 2.1,-1.2 9,1.7 2.8,-3.3 1.8,-.6 1.2,1.8 1.6,4.1 .9,.1 -8.5,54.8 -47.9,-8.2 z", center: [185, 165] },
  IL: { name: "Illinois", path: "m 623.5,265.9 -1,5.2 v 2 l 2.4,3.5 v .7 l -.3,.9 .9,1.9 -.3,2.4 -1.6,1.8 -1.3,4.2 -3.8,5.3 -.1,7 h -1 l .9,1.9 v .9 l -2.2,2.7 .1,1.1 1.5,2.2 -.1,.9 -3.7,.6 -.6,1.2 -1.2,-.6 -1,.5 -.4,3.3 1.7,1.8 -.4,2.4 -1.5,.3 -6.9,-3 -4,3.7 .3,1.8 h -2.8 l -1.4,-1.5 -1.8,-3.8 v -1.9 l .8,-.6 .1,-1.3 -1.7,-1.9 -.9,-2.5 -2.7,-4.1 -4.8,-1.3 -7.4,-7.1 -.4,-2.4 2.8,-7.6 -.4,-1.9 1.2,-1.1 v -1.3 l -2.8,-1.5 -3,-.7 -3.4,1.2 -1.3,-2.3 .6,-1.9 -.7,-2.4 -8.6,-8.4 -2.2,-1.5 -2.5,-5.9 -1.2,-5.4 1.4,-3.7 .7,-.7 .1,-2.3 -.7,-.9 1,-1.5 1.8,-.6 .9,-.3 1,-1.2 v -2.4 l 1.7,-2.4 .5,-.5 .1,-3.5 -.9,-1.4 -1,-.3 -1.1,-1.6 1,-4 3,-.8 h 2.4 l 4.2,-1.8 1.7,-2.2 .1,-2.4 1.1,-1.3 1.3,-3.2 -.1,-2.6 -2.8,-3.5 h -1.2 l -.9,-1.1 .2,-1.6 -1.7,-1.7 -2.5,-1.3 .5,-.6 45.9,-2.8 .1,4.6 3.4,4.6 1.2,4.1 1.6,3.2 z", center: [590, 285] },
  IN: { name: "Indiana", path: "m 629.2,214.8 -5.1,2.3 -4.7,-1.4 4.1,50.2 -1,5.2 v 2 l 2.4,3.5 v .7 l -.3,.9 .9,1.9 -.3,2.4 -1.6,1.8 -1.3,4.2 -3.8,5.3 -.1,7 h -1 l .9,1.9 1.1,.8 .6,-1 -.7,-1.7 4.6,-.5 .2,1.2 1.1,.2 .4,-.9 -.6,-1.3 .3,-.8 1.3,.8 1.7,-.4 1.7,.6 3.4,2.1 1.8,-2.8 3.5,-2.2 3,3.3 1.6,-2.1 .3,-2.7 3.8,-2.3 .2,1.3 1.9,1.2 3,-.2 1.2,-.7 .1,-3.4 2.5,-3.7 4.6,-4.4 -.1,-1.7 1.2,-3.8 2.2,1 6.7,-4.5 -.4,-1.7 -1.5,-2.1 1,-1.9 -6.6,-57.2 -.1,-1.4 -32.4,3.4 z", center: [640, 285] },
  KS: { name: "Kansas", path: "m 459.1,259.5 -43.7,-1.2 -36,-2 -4.8,67 67.7,2.9 62,.1 -.5,-48.1 -3.2,-.7 -2.6,-4.7 -2.5,-2.5 .5,-2.3 2.7,-2.6 .1,-1.2 -1.5,-2.1 -.9,1 -2,-.6 -2.9,-3 z", center: [435, 300] },
  KY: { name: "Kentucky", path: "m 692.1,322.5 -20.5,1.4 -5.2,.8 -17.4,1 -2.6,.8 -22.6,2 -.7,-.6 h -3.7 l 1.2,3.2 -.6,.9 -23.3,1.5 1,-2.7 1.4,.9 .7,-.4 1.2,-4.1 -1,-1 1,-2 .2,-.9 -1.3,-.8 -.3,-1.8 4,-3.7 6.9,3 1.5,-.3 .4,-2.4 -1.7,-1.8 .4,-3.3 1,-.5 1.2,.6 .6,-1.2 3.7,-.6 .1,-.9 -1.5,-2.2 -.1,-1.1 2.2,-2.7 0,-.9 1.1,.8 .6,-1 -.7,-1.7 4.6,-.5 .2,1.2 1.1,.2 .4,-.9 -.6,-1.3 .3,-.8 1.3,.8 1.7,-.4 1.7,.6 3.4,2.1 1.8,-2.8 3.5,-2.2 3,3.3 1.6,-2.1 .3,-2.7 3.8,-2.3 .2,1.3 1.9,1.2 3,-.2 1.2,-.7 .1,-3.4 2.5,-3.7 4.6,-4.4 -.1,-1.7 1.2,-3.8 2.2,1 6.7,-4.5 -.4,-1.7 -1.5,-2.1 1,-1.9 1.3,.5 2.2,.1 1.9,-.8 2.9,1.2 2.2,3.4 v 1 l 4.1,.7 2.3,-.2 1.9,2.1 2.2,.2 v -1 l 1.9,-.8 3,.8 1.2,.8 1.3,-.7 h .9 l .6,-1.7 3.4,-1.8 .5,.8 .8,2.9 3.5,1.4 1.2,2.1 -.1,1.1 .6,1 -.6,3.6 1.9,1.6 .8,1.1 1,.6 -.1,.9 4.4,5.6 h 1.4 l 1.5,1.8 1.2,.3 1.4,-.1 -4.9,6.6 -2.9,1 -3,3 -.4,2.2 -2.1,1.3 -.1,1.7 -1.4,1.4 -1.8,.5 -.5,1.9 -1,.4 -6.9,4.2 z m -98,11.3 -.7,-.7 .2,-1 h 1.1 l .7,.7 -.3,1 z", center: [665, 320] },
  LA: { name: "Louisiana", path: "m 602.5,472.8 -1.2,-1.8 .3,-1.3 -4.8,-6.8 .9,-4.6 1,-1.4 .1,-1.4 -36,2 1.7,-11.9 2.4,-4.8 6,-8.4 -1.8,-2.5 h 2 v -3.3 l -2.4,-2.5 .5,-1.7 -1.2,-1 -1.6,-7.1 .6,-1.4 -52.3,1.3 .5,19.9 .7,3.4 2.6,2.8 .7,5.4 3.8,4.6 .8,4.3 h 1 l -.1,7.3 -3.3,6.4 1.3,2.3 -1.3,1.5 .7,3 -.1,4.3 -2.2,3.5 -.1,.8 -1.7,1.2 1,1.8 1.2,1.1 1.6,-1.3 5.3,-.9 6.1,-.1 9.6,3.8 8,1 1.5,-1.4 1.8,-.2 4.8,2.2 1.6,-.4 1.1,-1.5 -4.2,-1.8 -2.2,1 -1.1,-.2 -1.4,-2 3.3,-2.2 1.6,-.1 v 1.7 l 1.5,-.1 3.4,-.3 .4,2.3 1.1,.4 .6,1.9 4.8,1 1.7,1.6 v .7 h -1.2 l -1.5,1.7 1.7,1.2 5.4,1 2.7,2.8 4.4,-1 -3.7,.2 -.1,-.6 2.8,-.7 .2,-1.8 1.2,-.3 v -1.4 l 1.1,.1 v 1.6 l 2.5,.1 .8,-1.9 .9,.3 .2,2.5 1.2,.2 -1.8,2 2.6,-.9 2,-1.1 2.9,-3.3 h -.7 l -1.3,1.2 -.4,-.1 -.5,-.8 .9,-1.2 v -2.3 l 1.1,-.8 .7,.7 1,-.8 1,-.1 .6,1.3 -.6,1.9 h 2.4 l 5.1,1.7 .5,1.3 1.6,1.4 2.8,.1 1.3,.7 1.8,-1 .9,-1.7 v -1.7 h -1.4 l -1.2,-1.4 -1.1,-1.1 -3.2,-.9 -2.6,.2 -4.2,-2.4 v -2.3 l 1.3,-1 2.4,.6 -3.1,-1.6 .2,-.8 h 3.6 l 2.6,-3.5 -2.6,-1.8 .8,-1.5 -1.2,-.8 h -.8 l -2,2.1 v 2.1 l -.6,.7 -1.1,-.1 -1.6,-1.4 h -1.3 v -1.5 l .6,-.7 .8,.7 1.7,-1.6 .7,-1.6 .8,-.3 z m -10.3,-2.7 1.9,1 .8,1.1 2.5,.1 1.5,.8 .2,1.4 -.4,.6 -.9,-1.5 -1.4,1.2 -.9,1.4 -2.8,.8 -1.6,.1 -3.7,-1 .1,-1.7 2,-2 1.1,-2.4 z m -4.7,1.2 v 1.1 l -1.8,2 h -1.2 v -2.2 l 1.6,-1.5 z", center: [560, 455] },
  MA: { name: "Massachusetts", path: "m 899.9,174.2 h 3.4 l .9,-.6 .1,-1.3 -1.9,-1.8 .4,1 -1.5,1.5 h -2.3 l .1,.8 z m -9,1.8 -1.2,-.6 1,-.8 .6,-2.1 1.2,-1 .8,-.2 .6,.9 1.1,.2 .6,-.6 .5,1.9 -1.3,.3 -2.8,.7 z m -34.9,-23.4 18.4,-3.8 1,-1.5 .3,-1.7 1.9,-.6 .5,-1.1 1.7,-1.1 1.3,.3 1.7,3.3 1,.4 1.1,-1.3 .8,1.3 v 1.1 l -3,2.4 .2,.8 -.9,1 .4,.8 -1.3,.3 .9,1.2 -.8,.7 .6,1 .9,-.2 .3,-.8 1.1,.6 h 1.8 l 2.5,2.6 .2,2.6 1.8,.1 .8,1.1 .6,2 1,.7 h 1.9 l 1.9,-.1 .8,-.9 1.6,-1.2 1.1,-.3 -1.2,-2.1 -.3,.9 -1.5,-3.6 h -.8 l -.4,.9 -1.2,-1 1.3,-1.1 1.8,.4 2.3,2.1 1.3,2.7 1.2,3.3 -1,2.8 v -1.8 l -.7,-1 -3.5,2.3 -.9,-.3 -1.6,1 -.1,1.2 -2.2,1.2 -2,2.1 -2,1.9 h -1.2 l 3.3,-3.3 .5,-1.9 -.5,-.6 -.3,-1.3 -.9,-.1 -.1,1.3 -1,1.2 h -1.2 l -.3,1.1 .4,1.2 -1.2,1.1 -1.1,-.2 -.4,1 -1.4,-3 -1.3,-1.1 -2.6,-1.3 -.6,-2.2 h -.8 l -.7,-2.6 -6.5,2 -.1,-.3 -14.9,3.4 v .7 l -.9,.3 -.5,-.7 -10.5,2.4 -.7,-1 .5,-15 z", center: [875, 175] },
  MD: { name: "Maryland", path: "m 822.9,269.3 0,-1.7 h -.8 l 0,1.8 z m 11.8,-3.9 1.2,-2.2 .1,-2.5 -.6,-.6 -.7,.9 -.2,2.1 -.8,1.4 -.3,1.1 -4.6,1.6 -.7,.8 -1.3,.2 -.4,.9 -1.3,.6 -.3,-2.5 .4,-.7 -.8,-.5 .2,-1.5 -1.6,1 v -2 l 1.2,-.3 -1.9,-.4 -.7,-.8 .4,-1.3 -.8,-.6 -.7,1.6 .5,.8 -.7,.6 -1.1,.5 -2,-1 -.2,-1.2 -1,-1.1 -1.4,-1.7 1.5,-.8 -1,-.6 v -.9 l .6,-1 1.7,-.3 -1.4,-.6 -.1,-.7 -1.3,-.1 -.4,1.1 -.6,.3 .1,-3.4 1,-1 .8,.7 .1,-1.6 -1,-.9 -.9,1.1 -1,1.4 -.6,-1 .2,-2.4 .9,-1 .9,.9 1.2,-.7 -.4,-1.7 -1,1 -.9,-2.1 -.2,-1.7 1.1,-2.4 1.1,-1.4 1.4,-.2 -.5,-.8 .5,-.6 -.3,-.7 .2,-2.1 -1.5,.4 -.8,1.1 1,1.3 -2.6,3.6 -.9,-.4 -.7,.9 -.6,2.2 -1.8,.5 1.3,.6 1.3,1.3 -.2,.7 .9,1.2 -1.1,1 .5,.3 -.5,1.3 v 2.1 l -.5,1.3 .9,1.1 .7,3.4 1.3,1.4 1.6,1.4 .4,2.8 1.6,2 .4,1.4 v 1 h -.7 l -1.5,-1.2 -.4,.2 -1.2,-.2 -1.7,-1.4 -1.4,-.3 -1,.5 -1.2,-.3 -.4,.2 -1.7,-.8 -1,-1 -1,-1.3 -.6,-.2 -.8,.7 -1.6,1.3 -1.1,-.8 -.4,-2.3 .8,-2.1 -.3,-.5 .3,-.4 -.7,-1 1,-.1 1,-.9 .4,-1.8 1.7,-2.6 -2.6,-1.8 -1,1.7 -.6,-.6 h -1 l -.6,-.1 -.4,-.4 .1,-.5 -1.7,-.6 -.8,.3 -1.2,-.1 -.7,-.7 -.5,-.2 -.2,-.7 .6,-.8 v -.9 l -1.2,-.2 -1,-.9 -.9,.1 -1.6,-.3 -.9,-.4 .2,-1.6 -1,-.5 -.2,-.7 h -.7 l -.8,-1.2 .2,-1 -2.6,.4 -2.2,-1.6 -1.4,.3 -.9,1.4 h -1.3 l -1.7,2.9 -3.3,.4 -1.9,-1 -2.6,3.8 -2.2,-.3 -3.1,3.9 -.9,1.6 -1.8,1.6 -1.7,-11.4 60.5,-11.8 7.6,27.1 10.9,-2.3 0,5.3 -.1,3.1 -1,1.8 z m -13.4,-1.8 -1.3,.9 .8,1.8 1.7,.8 -.4,-1.6 z", center: [800, 255] },
  ME: { name: "Maine", path: "m 875,128.7 .6,4 3.2,2 .8,2.2 2.3,1.4 1.4,-.3 1,-3 -.8,-2.9 1.6,-.9 .5,-2.8 -.6,-1.3 3.3,-1.9 -2.2,-2.3 .9,-2.4 1.4,-2.2 .5,3.2 1.6,-2 1.3,.9 1.2,-.8 v -1.7 l 3.2,-1.3 .3,-2.9 2.5,-.2 2.7,-3.7 v -.7 l -.9,-.5 -.1,-3.3 .6,-1.1 .2,1.6 1,-.5 -.2,-3.2 -.9,.3 -.1,1.2 -1.2,-1.4 .9,-1.4 .6,.1 1.1,-.4 .5,2.8 2,-.3 2.9,.7 v -1 l -1.1,-1.2 1.3,.1 .1,-2.3 .6,.8 .3,1.9 2.1,1.5 .2,-1 .9,-.2 -.3,-.8 .8,-.6 -.1,-1.6 -1.6,-.2 -2,.7 1.4,-1.6 .7,-.8 1.3,-.2 .4,1.3 1.7,1.6 .4,-2.1 2.3,-1.2 -.9,-1.3 .1,-1.7 1.1,.5 h .7 l 1.7,-1.4 .4,-2.3 2.2,.3 .1,-.7 .2,-1.6 .5,1.4 1.5,-1 2.3,-4.1 -.1,-2.2 -1.4,-2 -3,-3.2 h -1.9 l -.8,2.2 -2.9,-3 .3,-.8 v -1.5 l -1.6,-4.5 -.8,-.2 -.7,.4 h -4.8 l -.3,-3.6 -8.1,-26 -7.3,-3.7 -2.9,-.1 -6.7,6.6 -2.7,-1 -1,-3.9 h -2.7 l -6.9,19.5 .7,6.2 -1.7,2.4 -.4,4.6 1.3,3.7 .8,.2 v 1.6 l -1.6,4.5 -1.5,1.4 -1.3,2.2 -.4,7.8 -2.4,-1 -1.5,.4 z m 34.6,-24.7 -1,.8 v 1.3 l .7,-.8 .9,.8 .4,-.5 1.1,.2 -1,-.8 .4,-.8 z m -1.7,2.6 -1,1.1 .5,.4 -.1,1 h 1.1 v -1.8 z m -3,-1.6 .9,1.3 1,.5 .3,-1 v -1.8 l -1.3,-.7 -.4,1.2 z m -1,5 -1.7,-1.7 1.6,-2.4 .8,.3 .2,1.1 1,.8 v 1.1 l -1,1 z", center: [890, 95] },
  MI: { name: "Michigan", path: "m 663.3,209.8 .1,1.4 21.4,-3.5 .5,-1.2 3.9,-5.9 v -4.3 l .8,-2.1 2.2,-.8 2,-7.8 1,-.5 1,.6 -.2,.6 -1.1,.8 .3,.9 .8,.4 1.9,-1.4 .4,-9.8 -1.6,-2.3 -1.2,-3.7 v -2.5 l -2.3,-4.4 v -1.8 l -1.2,-3.3 -2.3,-3 -2.9,-1 -4.8,3 -2.5,4.6 -.2,.9 -3,3.5 -1.5,-.2 -2.9,-2.8 -.1,-3.4 1.5,-1.9 2,-.2 1.2,-1.7 .2,-4 .8,-.8 1.1,-.1 .9,-1.7 -.2,-9.6 -.3,-1.3 -1.2,-1.2 -1.7,-1 -.1,-1.8 .7,-.6 1.8,.8 -.3,-1.7 -1.9,-2.7 -.7,-1.6 -1.1,-1.1 h -2.2 l -8.1,-2.9 -1.4,-1.7 -3.1,-.3 -1.2,.3 -4.4,-2.3 h -1.4 l .5,1 -2.7,-.1 .1,.6 .6,.6 -2.5,2.1 .1,1.8 1.5,2.3 1.5,.2 v .6 l -1.5,.5 -2.1,-.1 -2.8,2.5 .1,2.5 .4,5.8 -2.2,3.4 .8,-4.5 -.8,-.6 -.9,5.3 -1,-2.3 .5,-2.3 -.5,-1 .6,-1.3 -.6,-1.1 1,-1 v -1.2 l -1.3,.6 -1.3,3.1 -.7,.7 -1.3,2.4 -1.7,-.2 -.1,1.2 h -1.6 l .2,1.5 .2,2 -3,1.2 .1,1.3 1,1.7 -.1,5.2 -1.3,4.4 -1.7,2.5 1.2,1.4 .8,3.5 -1,2.5 -.2,2.1 1.7,3.4 2.5,4.9 1.2,1.9 1.6,6.9 -.1,8.8 -.9,3.9 -2,3.2 -.9,3.7 -2,3 -1.2,1 z m -95.8,-96.8 3,3.8 17,3.8 1.4,1 4,.8 .7,.5 2.8,-.2 4.9,.8 1.4,1.5 -1,1 .8,.8 3.8,.7 1.2,1.2 .1,4.4 -1.3,2.8 2,.1 1,-.8 .9,.8 -1.1,3.1 1,1.6 1.2,.3 .8,-1.8 2.9,-4.6 1.6,-6 2.3,-2 -.5,-1.6 .5,-.9 1,1.6 -.3,2.2 2.9,-2.2 .2,-2.3 2.1,.6 .8,-1.6 .7,.6 -.7,1.5 -1,.5 -1,2 1.4,1.8 1.1,-.5 -.5,-.7 1,-1.5 1.9,-1.7 h .8 l .2,-2.6 2,-1.8 7.9,-.5 1.9,-3.1 3.8,-.3 3.8,1.2 4.2,2.7 .7,-.2 -.2,-3.5 .7,-.2 4.5,1.1 1.5,-.2 2.9,-.7 1.7,.4 1.8,.1 v -1.1 l -.7,-.9 -1.5,-.2 -1.1,-.8 .5,-1.4 -.8,-.3 -2.6,.1 -.1,-1 1.1,-.8 .6,.8 .5,-1.8 -.7,-.7 .7,-.2 -1.4,-1.3 .3,-1.3 .1,-1.9 h -1.3 l -1.5,1 -1.9,.1 -.5,1.8 -1.9,.2 -.3,-1.2 -2.2,.1 -1,1.2 -.7,-.1 -.2,-.8 -2.6,.4 -.1,-4.8 1,-2 -.7,-.1 -1.8,1.1 h -2.2 l -3.8,2.7 -6.2,.3 -4.1,.8 -1.9,1.5 -1.4,1.3 -2.5,1.7 -.3,.8 -.6,-1.7 -1.3,-.6 v .6 l .7,.7 v 1.3 l -1.5,-.6 h -.6 l -.3,1.2 -2,-1.9 -1.3,-.2 -1.3,1.5 -3.2,-.1 -.5,-1.4 -2,-1.9 -1.3,-1.6 v -.7 l -1.1,-1.4 -2.6,-1.2 -3.3,-.1 -1.1,-.9 h -1.4 l -.7,.4 -2.2,2.2 -.7,1.1 -1,-.7 .2,-1 .8,-2.1 3.2,-5 .8,-.2 1.7,-1.9 .7,-1.6 3,-.6 .8,-.6 -.1,-1 -.5,-.5 -4.5,.2 -2,.5 -2.6,1.2 -1.2,1.2 -1.7,2.2 -1.8,1 -3.3,3.4 -.4,1.6 -7.4,4.6 -4,.5 -1.8,.4 -2.3,3 -1.8,.7 -4.4,2.3 z m 100.7,3.8 3.8,.1 .6,-.5 -.2,-2 -1.7,-1.8 -1.9,.1 -.1,.5 1.1,.4 -1.6,.8 -.3,1 -.6,-.6 -.4,.8 z m -75.1,-41.9 -2.3,.2 -2.7,1.9 -7.1,5.3 .8,1 1.8,.3 2.8,-2 -1.1,-.5 2.3,-1.6 h 1 l 3,-1.9 -.1,-.9 z m 41.1,62.8 v 1 l 2.1,1.6 -.2,-2.4 z m -.7,2.8 1.1,.1 v .9 h -1 z m 21.4,-21.3 v .9 l .8,-.2 v -.5 z m 4.7,3.1 -.1,-1.1 -1.6,-.2 -.6,-.4 h -.9 l -.4,.3 .9,.4 1.1,1.1 z m -18,1.2 -.1,1.1 -.3,.7 .2,2.2 .4,.3 .7,.1 .5,-.9 .1,-1.6 -.3,-.6 -.1,-1.1 z", center: [620, 160] },
  MN: { name: "Minnesota", path: "m 464.7,68.6 -1.1,2.8 .8,1.4 -.3,5.1 -.5,1.1 2.7,9.1 1.3,2.5 .7,14 1,2.7 -.4,5.8 2.9,7.4 .3,5.8 -.1,2.1 -.1,2.2 -.9,2 -3.1,1.9 -.3,1.2 1.7,2.5 .4,1.8 2.6,.6 1.5,1.9 -.2,39.5 h 28.2 l 36.3,-.9 18.6,-.7 -1.1,-4.5 -.2,-3 -2.2,-3 -2.8,-.7 -5.2,-3.6 -.6,-3.3 -6.3,-3.1 -.2,-1.3 h -3.3 l -2.2,-2.6 -2,-1.3 .7,-5.1 -.9,-1.6 .5,-5.4 1,-1.8 -.3,-2.7 -1.2,-1.3 -1.8,-.3 v -1.7 l 2.8,-5.8 5.9,-3.9 -.4,-13 .9,.4 .6,-.5 .1,-1.1 .9,-.6 1.4,1.2 .7,-.1 v 0 l -1.2,-2.2 4.3,-3.1 3.1,-3.7 1.6,-.8 4.7,-5.9 6.3,-5.8 3.9,-2.1 6.3,-2.7 7.6,-4.5 -.6,-.4 -3.7,.7 -2.8,.1 -1,-1.6 -1.4,-.9 -9.8,1.2 -1,-2.8 -1.6,-.1 -1.7,.8 -3.7,3.1 h -4.1 l -2.1,-1 -.3,-1.7 -3.9,-.8 -.6,-1.6 -.7,-1.3 -1,.9 -2.6,.1 -9.9,-5.5 h -2.9 l -.8,-.7 -3.1,1.3 -.8,1.3 -3.3,.8 -1.3,-.2 v -1.7 l -.7,-.9 h -5.9 l -.4,-1.4 h -2.6 l -1.1,.4 -2.4,-1.7 .3,-1.4 -.6,-2.4 -.7,-1.1 -.2,-3 -1,-3.1 -2.1,-1.6 h -2.9 l .1,8 -30.9,-.4 z", center: [500, 130] },
  MO: { name: "Missouri", path: "m 555.3,248.9 -1.1,-1.1 -.6,-1.6 -1.7,-1.3 -14.3,.8 -27.2,1.2 -25.9,-.1 1.3,1.3 -.3,1.4 2.1,3.7 3.9,6.3 2.9,3 2,.6 .9,-1 1.5,2.1 -.1,1.2 -2.7,2.6 -.5,2.3 2.5,2.5 2.6,4.7 3.2,.7 .5,48.1 .2,10.8 39.1,-.7 39.8,-2 1.6,2.5 v 2.2 l -1.7,1.5 -2.8,5.1 11.2,-.8 1,-2 1.2,-.5 v -.7 l -1.2,-1.1 -.6,-1 1.7,.2 .8,-.7 -1.4,-1.5 1.4,-.5 .1,-1 -.6,-1 v -1.3 l -.7,-.7 .2,-1 h 1.1 l .7,.7 -.3,1 .8,.7 .8,-1 1,-2.7 1.4,.9 .7,-.4 1.2,-4.1 -1,-1 1,-2 .2,-.9 -1.3,-.8 h -2.8 l -1.4,-1.5 -1.8,-3.8 v -1.9 l .8,-.6 .1,-1.3 -1.7,-1.9 -.9,-2.5 -2.7,-4.1 -4.8,-1.3 -7.4,-7.1 -.4,-2.4 2.8,-7.6 -.4,-1.9 1.2,-1.1 v -1.3 l -2.8,-1.5 -3,-.7 -3.4,1.2 -1.3,-2.3 .6,-1.9 -.7,-2.4 -8.6,-8.4 -2.2,-1.5 -2.5,-5.9 -1.2,-5.4 1.4,-3.7 z", center: [545, 310] },
  MS: { name: "Mississippi", path: "m 623.8,468.6 -5,.1 -2.4,-1.5 -7.9,2.5 -.9,-.7 -.5,.2 -.1,1.6 -.6,.1 -2.6,2.7 -.7,-.1 -.6,-.7 -1.2,-1.8 .3,-1.3 -4.8,-6.8 .9,-4.6 1,-1.4 .1,-1.4 -36,2 1.7,-11.9 2.4,-4.8 6,-8.4 -1.8,-2.5 h 2 v -3.3 l -2.4,-2.5 .5,-1.7 -1.2,-1 -1.6,-7.1 .6,-1.4 1.2,-1.5 .5,-3 -1.5,-2.3 -.5,-2.2 .9,-.7 v -.8 l -1.7,-1.1 -.1,-.7 1.6,-.9 -1.2,-1.1 1.7,-7.1 3.4,-1.6 v -.8 l -1.1,-1.4 2.9,-5.4 h 1.9 l 1.5,-1.2 -.3,-5.2 3.1,-4.5 1.8,-.6 -.5,-3.1 38.3,-2.6 1.3,2 -1.3,67 4.4,33.2 z", center: [595, 420] },
  MT: { name: "Montana", path: "m 247,130.5 57.3,7.9 51,5.3 2,-20.7 5.2,-66.7 -53.5,-5.6 -54.3,-7.7 -65.9,-12.5 -4.8,22 3.7,7.4 -1.6,4.8 3.6,4.8 1.9,.7 3.9,8.3 v 2.1 l 2.3,3 h .9 l 1.4,2.1 h 3.2 v 1.6 l -7.1,17 -.5,4.1 1.4,.5 1.6,2.6 2.8,-1.4 3.6,-2.4 1.9,1.9 .5,2.5 -.5,3.2 2.5,9.7 2.6,3.5 2.3,1.4 .4,3 v 4.1 l 2.3,2.3 1.6,-2.3 6.9,1.6 2.1,-1.2 9,1.7 2.8,-3.3 1.8,-.6 1.2,1.8 1.6,4.1 .9,.1 z", center: [255, 95] },
  NC: { name: "North Carolina", path: "m 829,300.1 -29.1,6.1 -39.4,7.3 -29.4,3.5 v 5.2 l -1.5,-.1 -1.4,1.2 -2.4,5.2 -2.6,-1.1 -3.5,2.5 -.7,2.1 -1.5,1.2 -.8,-.8 -.1,-1.5 -.8,-.2 -4,3.3 -.6,3.4 -4.7,2.4 -.5,1.2 -3.2,2.6 -3.6,.5 -4.6,3 -.8,4.1 -1.3,.9 -1.5,-.1 -1.4,1.3 -.1,4.9 21.4,-3 4.4,-1.9 1.3,-.1 7.3,-4.3 23.2,-2.2 .4,.5 -.2,1.4 .7,.3 1.2,-1.5 3.3,3 .1,2.6 19.7,-2.8 24.5,17.1 4,-2.2 3,-.7 h 1.7 l 1.1,1.1 .8,-2 .6,-5 1.7,-3.9 5.4,-6.1 4.1,-3.5 5.4,-2.3 2.5,-.4 1.3,.4 .7,1.1 3.3,-6.6 3.3,-5.3 -.7,-.3 -4.4,6.8 -.5,-.8 2,-2.2 -.4,-1.5 -2,-.5 1,1.3 -1.2,.1 -1.2,-1.8 -1.2,2 -1.6,.2 1,-2.7 .7,-1.7 -.2,-2.9 -2.2,-.1 .9,-.9 1.1,.3 2.7,.1 .8,-.5 h 2.3 l 2,-1.9 .2,-3.2 1.3,-1.4 1.2,-.2 1.3,-1 -.5,-3.7 -2.2,-3.8 -2.7,-.2 -.9,1.6 -.5,-1 -2.7,.2 -1.2,.4 -1.9,1.2 -.3,-.4 h -.9 l -1.8,1.2 -2.6,.5 v -1.3 l .8,-1 1,.7 h 1 l 1.7,-2.1 3.7,-1.7 2,-2.2 h 2.4 l .8,1.3 1.7,.8 -.5,-1.5 -.3,-1.6 -2.8,-3.1 -.3,-1.4 -.4,1 -.9,-1.3 z m 7,31 2.7,-2.5 4.6,-3.3 v -3.7 l -.4,-3.1 -1.7,-4.2 1.5,1.4 1,3.2 .4,7.6 -1.7,.4 -3.1,2.4 -3.2,3.2 z m 1.9,-19.3 -.9,-.2 v 1 l 2.5,2.2 -.2,-1.4 z m 2.9,2.1 -1.4,-2.8 -2.2,-3.4 -2.4,-3 -2.2,-4.3 -.8,-.7 2.2,4.3 .3,1.3 3.4,5.5 1.8,2.1 z", center: [760, 350] },
  ND: { name: "North Dakota", path: "m 464.7,68.6 -1.1,2.8 .8,1.4 -.3,5.1 -.5,1.1 2.7,9.1 1.3,2.5 .7,14 1,2.7 -.4,5.8 2.9,7.4 .3,5.8 -.1,2.1 -29.5,-.4 -46,-2.1 -39.2,-2.9 5.2,-66.7 44.5,3.4 55.3,1.6 z", center: [420, 100] },
  NE: { name: "Nebraska", path: "m 402.5,191.1 38,1.6 3.4,3.2 1.7,.2 2.1,2 1.8,-.1 1.8,-2 1.5,.6 1,-.7 .7,.5 .9,-.4 .7,.4 .9,-.4 1,.5 1.4,-.6 2,.6 .6,1.1 6.1,2.2 1.2,1.3 .9,2.6 1.8,.7 1.5,-.2 .5,.9 v 2.3 l .6,1.7 v 1.4 l 1.3,3.7 2.2,4.3 .2,3.7 2.8,5 .4,6.1 1.3,.7 -.2,2.9 .8,3.3 -.7,2.2 1.8,4.4 1.3,1.3 -.3,1.4 2.1,3.7 3.9,6.3 h -32.4 l -43.7,-1.2 -36,-2 1.4,-22.1 -33.1,-2.4 3.7,-44.2 z", center: [410, 230] },
  NH: { name: "New Hampshire", path: "m 862.6,93.6 -1.3,.1 -1,-1.1 -1.9,1.4 -.5,6.1 1.2,2.3 -1.1,3.5 2.1,2.8 -.4,1.7 .1,1.3 -1.1,2.1 -1.4,.4 -.6,1.3 -2.1,1 -.7,1.5 1.4,3.4 -.5,2.5 .5,1.5 -1,1.9 .4,1.9 -1.3,1.9 .2,2.2 -.7,1.1 .7,4.5 .7,1.5 -.5,2.6 .9,1.8 -.2,2.5 -.5,1.3 -.1,1.4 2.1,2.6 18.4,-3.8 1,-1.5 .3,-1.7 1.9,-.6 .5,-1.1 1.7,-1.1 1.3,.3 .8,-4.8 -2.3,-1.4 -.8,-2.2 -3.2,-2 -.6,-4 -11.9,-36.8 z", center: [865, 145] },
  NJ: { name: "New Jersey", path: "m 842.5,195.4 -14.6,-4.9 -1.8,2.5 .1,2.2 -3,5.4 1.5,1.8 -.7,2 -1,1 .5,3.6 2.7,.9 1,2.8 2.1,1.1 4.2,3.2 -3.3,2.6 -1.6,2.3 -1.8,3 -1.6,.6 -1.4,1.7 -1,2.2 -.3,2.1 .8,.9 .4,2.3 1.2,.6 2.4,1.5 1.8,.8 1.6,.8 .1,1.1 .8,.1 1.1,-1.2 .8,.4 2.1,.2 -.2,2.9 .2,2.5 1.8,-.7 1.5,-3.9 1.6,-4.8 2.9,-2.8 .6,-3.5 -.6,-1.2 1.7,-2.9 v -1.2 l -.7,-1.1 1.2,-2.7 -.3,-3.6 -.6,-8.2 -1.2,-1.4 v 1.4 l .5,.6 h -1.1 l -.6,-.4 -1.3,-.2 -.9,.6 -1.2,-1.6 .7,-1.7 v -1 l 1.7,-.7 .8,-2.1 z", center: [835, 220] },
  NM: { name: "New Mexico", path: "m 357.5,332.9 h -.8 l -7.9,99.3 -31.8,-2.6 -34.4,-3.6 -.3,3 2,2.2 -30.8,-4.1 -1.4,10.2 -15.7,-2.2 17.4,-124.1 52.6,6.5 51.7,4.8 z", center: [275, 385] },
  NV: { name: "Nevada", path: "m 167.6,296.8 -3.4,17.5 -2.4,2.9 h -2 l -1.2,-2.7 -3.7,-1.4 -3.5,.6 -1,13.6 .5,4.9 -.5,2.9 -1.4,3 -70.4,-105 -1.1,-3.5 16.4,-63.1 47,11.2 24.4,5.4 23.3,4.7 z", center: [130, 275] },
  NY: { name: "New York", path: "m 872.9,181.6 -1.3,.1 -.5,1 z m -30.6,22.7 .7,.6 1.3,-.3 1.1,.3 .9,-1.3 h 1.9 l 2.4,-.9 5.1,-2.1 -.5,-.5 -1.9,.8 -2,.9 .2,-.8 2.6,-1.1 .8,-1 1.2,.1 4.1,-2.3 v .7 l -4.2,3 4.5,-2.8 1.7,-2.2 1.5,-.1 4.5,-3.1 3.2,-3.1 3,-2.3 1,-1.2 -1.7,-.1 -1,1.2 -.2,.7 -.9,.7 -.8,-1.1 -1.7,1 -.1,.9 -.9,-.2 .5,-.9 -1.2,-.7 -.6,.9 .9,.3 .2,.5 -.3,.5 -1.4,2.6 h -1.9 l .9,-1.8 .9,-.6 .3,-1.7 1.4,-1.6 .9,-.8 1.5,-.7 -1.2,-.2 -.7,.9 h -.7 l -1.1,.8 -.2,1 -2.2,2.1 -.4,.9 -1.4,.9 -7.7,1.9 .2,.9 -.9,.7 -2,.3 -1,-.6 -.2,1.1 -1.1,-.4 .1,1 -1.2,-.1 -1.2,.5 -.2,1.1 h -1 l .2,1 h -.7 l .2,1 -1.8,.4 -1.5,2.3 z m -.8,-.4 -1.6,.4 v 1 l -.7,1.6 .6,.7 2.4,-2.3 -.1,-.9 z m -10.1,-95.2 -.6,1.9 1.4,.9 -.4,1.5 .5,3.2 2.2,2.3 -.4,2.2 .6,2 -.4,1 -.3,3.8 3.1,6.7 -.8,1.8 .9,2.2 .9,-1.6 1.9,1.5 3,14.2 -.5,2 1.1,1 -.5,15 .7,1 2.8,16.3 1.8,1.5 -3.5,3.4 1.7,2.2 -1.3,3.3 -1.5,1.7 -1.5,2.3 -.2,-.7 .4,-5.9 -14.6,-4.9 -1.6,-1.1 -1.9,.3 -3,-2.2 -3,-5.8 h -2 l -.4,-1.5 -1.7,-1.1 -70.5,13.9 -.8,-6 4.3,-3.9 .6,-1.7 3.9,-2.5 .6,-2.4 2.3,-2 .8,-1.1 -1.7,-3.3 -1.7,-.5 -1.8,-3 -.2,-3.2 7.6,-3.9 8.2,-1.6 h 4.4 l 3.2,1.6 .9,-.1 1.8,-1.6 3.4,-.7 h 3 l 2.6,-1.3 2.5,-2.6 2.4,-3.1 1.9,-.4 1.1,-.5 .4,-3.2 -1.4,-2.7 -1.2,-.7 2,-1.3 -.1,-1.8 h -1.5 l -2.3,-1.4 -.1,-3.1 6.2,-6.1 .7,-2.4 3.7,-6.3 5.9,-6.4 2.1,-1.7 2.5,.1 20.6,-5.2 z", center: [810, 175] },
  OH: { name: "Ohio", path: "m 685.7,208.8 1.9,-.4 3,1.3 2.1,.6 .7,.9 h 1 l 1,-1.5 1.3,.8 h 1.5 l -.1,1 -3.1,.5 -2,1.1 1.9,.8 1.6,-1.5 2.4,-.4 2.2,1.5 1.5,-.1 2.5,-1.7 3.6,-2.1 5.2,-.3 4.9,-5.9 3.8,-3.1 9.3,-5.1 4.9,29.9 -2.2,1.2 1.4,2.1 -.1,2.2 .6,2 -1.1,3.4 -.1,5.4 -1,3.6 .5,1.1 -.4,2.2 -1.1,.5 -2,3.3 -1.8,2 h -.6 l -1.8,1.7 -1.3,-1.2 -1.5,1.8 -.3,1.2 h -1.3 l -1.3,2.2 .1,2.1 -1,.5 1.4,1.1 v 1.9 l -1,.2 -.7,.8 -1,.5 -.6,-2.1 -1.6,-.5 -1,2.3 -.3,2.2 -1.1,1.3 1.3,3.6 -1.5,.8 -.4,3.5 h -1.5 l -3.2,1.4 -1.2,-2.1 -3.5,-1.4 -.8,-2.9 -.5,-.8 -3.4,1.8 -.6,1.7 h -.9 l -1.3,.7 -1.2,-.8 -3,-.8 -1.9,.8 v 1 l -2.2,-.2 -1.9,-2.1 -2.3,.2 -4.1,-.7 v -1 l -2.2,-3.4 -2.9,-1.2 -1.9,.8 -2.2,-.1 -1.3,-.5 -6.6,-57.2 21.4,-3.5 z", center: [690, 270] },
  OK: { name: "Oklahoma", path: "m 501.5,398.6 -4.6,-3.8 -2.2,-.9 -.5,1.6 -5.1,.3 -.6,-1.5 -5,2.5 -1.6,-.7 -3.7,.3 -.6,1.7 -3.6,.9 -1.3,-1.2 -1.2,.1 -2,-1.8 -2.1,.7 -2,-.5 -1.8,-2 -2.5,4.2 -1.2,.8 -1,-1.8 .3,-2 -1.2,-.7 -2.3,2.5 -1.7,-1.2 -.1,-1.5 -1.3,.5 -2.6,-1.7 -3,2.6 -2.3,-1.1 .7,-2.1 -2.3,.1 -1.9,-3 -3.5,-1.1 -2,2.3 -2.3,-2.2 -1.4,.4 -2,.1 -3.5,-1.9 -2.3,.1 -1.2,-.7 -.5,-2.9 -2.3,-1.7 -1.1,1.5 -1.4,-1 -1.2,-.4 -1.1,1 -1.5,-.3 -2.5,-3 -2.7,-1.3 1.4,-42.7 -52.6,-3.2 .6,-10.6 16.5,1 67.7,2.9 62,.1 .2,10.8 4.1,24.4 -.7,39 z", center: [440, 370] },
  OR: { name: "Oregon", path: "m 93.9,166.5 47,11.2 8.5,-37.3 2.9,-5.8 .4,-2.1 .8,-.9 -.9,-2 -2.9,-1.2 .2,-4.2 4,-5.8 2.5,-.8 1.6,-2.3 -.1,-1.6 1.8,-1.6 3.2,-5.5 4.2,-4.8 -.5,-3.2 -3.5,-3.1 -1.6,-3.6 -30.3,-7.3 -2.8,1 -5.4,-.9 -1.8,-.9 -1.5,1.2 -3.3,-.4 -4.5,.5 -.9,.7 -4.2,-.4 -.8,-1.6 -1.2,-.2 -4.4,1.3 -1.6,-1.1 -2.2,.8 -.2,-1.8 -2.3,-1.2 -1.5,-.2 -1,-1.1 -3,.3 -1.2,-.8 h -1.2 l -1.2,.9 -5.5,.7 -6.6,-4.2 1.1,-5.6 -.4,-4.1 -3.2,-3.7 -3.7,.1 -.4,-1.1 .4,-1.2 -.7,-.8 -1,.1 -1.1,1.3 -1.5,-.2 -.5,-1.1 -1,-.1 -.7,.6 -2,-1.9 v 4.3 l -1.3,1.3 -1.1,3.5 -.1,2.3 -4.5,12.3 -13.2,31.3 -3.2,4.6 -1.6,-.1 .1,2.1 -5.2,7.1 -.3,3.3 1,1.3 .1,2.4 -1.2,1.1 -1.2,3 .1,5.7 1.2,2.9 z", center: [105, 135] },
  PA: { name: "Pennsylvania", path: "m 826.3,189.4 -1.9,.3 -3,-2.2 -3,-5.8 h -2 l -.4,-1.5 -1.7,-1.1 -70.5,13.9 -.8,-6 -4.2,3.4 -.9,.1 -2.7,3 -3.3,1.7 4.9,29.9 3.2,19.7 17.4,-2.9 60.5,-11.8 1.2,-2.1 1.5,-1.1 1.6,-.3 1.6,.6 1.4,-1.7 1.6,-.6 1.8,-3 1.6,-2.3 3.3,-2.6 -4.2,-3.2 -2.1,-1.1 -1,-2.8 -2.7,-.9 -.5,-3.6 1,-1 .7,-2 -1.5,-1.8 3,-5.4 -.1,-2.2 1.8,-2.5 z", center: [785, 220] },
  RI: { name: "Rhode Island", path: "m 883.2,170.7 -1.3,-1.1 -2.6,-1.3 -.6,-2.2 h -.8 l -.7,-2.6 -6.5,2 3.2,12.3 -.4,1.1 .4,1.8 5.6,-3.6 .1,-3 -.8,-.8 .4,-.6 -.1,-1.3 -.9,-.7 1.2,-.4 -.9,-1.6 1.8,.7 .3,1.4 .7,1.2 -1.4,-.8 1.1,1.7 -.3,1.2 -.6,-1.1 v 2.5 l .6,-.9 .4,.9 1.3,-1.5 -.2,-2.5 1.4,3.1 1,-.9 z m -4.7,12.2 h .9 l .5,-.6 -.8,-1.3 -.7,.7 z", center: [875, 185] },
  SC: { name: "South Carolina", path: "m 772.3,350.2 -19.7,2.8 -.1,-2.6 -3.3,-3 -1.2,1.5 -.7,-.3 .2,-1.4 -.4,-.5 -23.2,2.2 -7.3,4.3 -1.3,.1 -4.4,1.9 -.1,1.9 -1.9,1 -1.4,3.2 .2,1.3 6.1,3.8 2.6,-.3 3.1,4 .4,1.7 4.2,5.1 2.6,1.7 1.4,.2 2.2,1.6 1.1,2.2 2,1.6 1.8,.5 2.7,2.7 .1,1.4 2.6,2.8 5,2.3 3.6,6.7 .3,2.7 3.9,2.1 2.5,4.8 .8,3.1 4.2,.4 .8,-1.5 h .6 l 1.8,-1.5 .5,-2 3.2,-2.1 .3,-2.4 -1.2,-.9 .8,-.7 .8,.4 1.3,-.4 1.8,-2.1 3.8,-1.8 1.6,-2.4 .1,-.7 4.8,-4.4 -.1,-.5 -.9,-.8 1.1,-1.5 h .8 l .4,.5 .7,-.8 h 1.3 l .6,-1.5 2.3,-2.1 -.3,-5.4 .8,-2.3 3.6,-6.2 2.4,-2.2 2.2,-1.1 z", center: [725, 385] },
  SD: { name: "South Dakota", path: "m 396.5,125.9 46,2.1 29.5,.4 -.1,2.2 -.9,2 -3.1,1.9 -.3,1.2 1.7,2.5 .4,1.8 2.6,.6 1.5,1.9 -.2,39.5 -2.2,-.1 -.1,1.6 1.3,1.5 -.1,1.1 -1,.5 .4,1.6 1.3,.4 .7,2 -1.7,5.1 -1,4.3 1.3,1.2 .3,1.3 .7,1.7 -1.5,.2 -1.8,-.7 -.9,-2.6 -1.2,-1.3 -6.1,-2.2 -.6,-1.1 -2,-.6 -1.4,.6 -1,-.5 -.9,.4 -.7,-.4 -.9,.4 -.7,-.5 -1,.7 -1.5,-.6 -1.8,2 -1.8,.1 -2.1,-2 -1.7,-.2 -3.4,-3.2 -38,-1.6 -51.1,-3.5 3.9,-43.9 2,-20.7 z", center: [420, 165] },
  TN: { name: "Tennessee", path: "m 620.9,365.1 45.7,-4 22.9,-2.9 .1,-4.9 1.4,-1.3 1.5,.1 1.3,-.9 .8,-4.1 4.6,-3 3.6,-.5 3.2,-2.6 .5,-1.2 4.7,-2.4 .6,-3.4 4,-3.3 .8,.2 .1,1.5 .8,.8 1.5,-1.2 .7,-2.1 3.5,-2.5 2.6,1.1 2.4,-5.2 1.4,-1.2 1.5,.1 0,-5.2 .3,-.7 -4.6,.5 -.2,1 -28.9,3.3 -5.6,1.4 -20.5,1.4 -5.2,.8 -17.4,1 -2.6,.8 -22.6,2 -.7,-.6 h -3.7 l 1.2,3.2 -.6,.9 -23.3,1.5 -.8,1 -.8,-.7 h -1 v 1.3 l .6,1 -.1,1 -1.4,.5 1.4,1.5 -.8,.7 -1.7,-.2 .6,1 1.2,1.1 v .7 l -1.2,.5 -1,2 .1,.6 1.4,1 -.4,.7 h -1.5 v .5 l .9,.9 .1,.8 -1.4,.2 -.5,.8 -1.6,.2 -.9,.9 .6,.9 1.1,-.1 .5,.9 -1.6,1.3 .4,1.5 -2,-.6 -.1,.7 .4,1.1 -.3,1.4 -1.3,-.8 -.8,.8 1.1,.1 .1,1.5 -.6,1 1.1,.9 -.3,1.5 .8,.7 -.7,1 -1.2,-.5 -.9,2.2 -1.6,.7 z", center: [650, 355] },
  TX: { name: "Texas", path: "m 282.3,429 .3,-3 34.4,3.6 31.8,2.6 7.9,-99.3 .8,0 52.6,3.2 -1.4,42.7 2.7,1.3 2.5,3 1.5,.3 1.1,-1 1.2,.4 1.4,1 1.1,-1.5 2.3,1.7 .5,2.9 1.2,.7 2.3,-.1 3.5,1.9 2,-.1 1.4,-.4 2.3,2.2 2,-2.3 3.5,1.1 1.9,3 2.3,-.1 -.7,2.1 2.3,1.1 3,-2.6 2.6,1.7 1.3,-.5 .1,1.5 1.7,1.2 2.3,-2.5 1.2,.7 -.3,2 1,1.8 1.2,-.8 2.5,-4.2 1.8,2 2,.5 2.1,-.7 2,1.8 1.2,-.1 1.3,1.2 3.6,-.9 .6,-1.7 3.7,-.3 1.6,.7 5,-2.5 .6,1.5 5.1,-.3 .5,-1.6 2.2,.9 4.6,3.8 6.4,1.9 2.6,2.3 2.8,-1.3 3.2,.8 .2,11.9 .5,19.9 .7,3.4 2.6,2.8 .7,5.4 3.8,4.6 .8,4.3 h 1 l -.1,7.3 -3.3,6.4 1.3,2.3 -1.3,1.5 .7,3 -.1,4.3 -2.2,3.5 -.1,.8 -1.7,1.2 1,1.8 1.2,1.1 -3.5,.3 -8.4,3.9 -3.5,1.4 -1.8,1.8 -.7,-.5 2.1,-2.3 1.8,-.7 .5,-.9 -2.9,-.1 -.7,-.8 .8,-2 -.9,-1.8 h -.6 l -2.4,1.3 -1.9,2.6 .3,1.7 3.3,3.4 1.3,.3 v .8 l -2.3,1.6 -4.9,4 -4,3.9 -3.2,1.4 -5,3 -3.7,2 -4.5,1.9 -4.1,2.5 3.2,-3 v -1.1 l .6,-.8 -.2,-1.8 -1.5,-.1 -1.1,1.5 -2.6,1.3 -1.8,-1.2 -.3,-1.7 h -1.5 l .8,2.2 1.4,.7 1.2,.9 1.8,1.6 -.7,.8 -3.9,1.7 -1.7,.1 -1.2,-1.2 -.5,2.1 .5,1.1 -2.7,2 -1.5,.2 -.8,.7 -.4,1.7 -1.8,3.3 -1.6,.7 -1.6,-.6 -1.8,1.1 .3,1.4 1.3,.8 1,.8 -1.8,3.5 -.3,2.8 -1,1.7 -1.4,1 -2.9,.4 1.8,.6 1.9,-.6 -.4,3.2 -1.1,-.1 .2,1.2 .3,1.4 -1.3,.9 v 3.1 l 1.6,1.4 .6,3.1 -.4,2.2 -1,.4 .4,1.5 1.1,.4 .8,1.7 v 2.6 l 1.1,2.1 2.2,2.6 -.1,.7 -2.2,-.2 -1.6,1.4 .2,1.4 -.9,-.3 -1.4,-.2 -3.4,-3.7 -2.3,-.6 h -7.1 l -2.8,-.8 -3.6,-3 -1.7,-1 -2.1,.1 -3.2,-2.6 -5.4,-1.6 v -1.3 l -1.4,-1.8 -.9,-4.7 -1.1,-1.7 -1.7,-1.4 v -1.6 l -1.4,-.6 .6,-2.6 -.3,-2.2 -1.3,-1.4 .7,-3 -.8,-3.2 -1.7,-1.4 h -1.1 l -4,-3.5 .1,-1.9 -.8,-1.7 -.8,-.2 -.9,-2.4 -2,-1.6 -2.9,-2.5 -.2,-2.1 -1,-.7 .2,-1.6 .5,-.7 -1.4,-1.5 .1,-.7 -2,-2.2 .1,-2.1 -2.7,-4.9 -.1,-1.7 -1.8,-3.1 -5.1,-4.8 v -1.1 l -3.3,-1.7 -.1,-1.8 -1.2,-.4 v -.7 l -.8,-.2 -2.1,-2.8 h -.8 l -.7,-.6 -1.3,1.1 h -2.2 l -2.6,-1.1 h -4.6 l -4.2,-2.1 -1.3,1.9 -2.2,-.6 -3.3,1.2 -1.7,2.8 -2,3.2 -1.1,4.4 -1.4,1.2 -1.1,.1 -.9,1.6 -1.3,.6 -.1,1.8 -2.9,.1 -1.8,-1.5 h -1 l -2,-2.9 -3.6,-.5 -1.7,-2.3 -1.3,-.2 -2.1,-.8 -3.4,-3.4 .2,-.8 -1.6,-1.2 -1,-.1 -3.4,-3.1 -.1,-2 -2.3,-4 .2,-1.6 -.7,-1.3 .8,-1.5 -.1,-2.4 -2.6,-4.1 -.6,-4.2 -1.6,-1.6 v -1 l -1.2,-.2 -.7,-1.1 -2.4,-1.7 -.9,-.1 -1.9,-1.6 v -1.1 l -2.9,-1.8 -.6,-2.1 -2.6,-2.3 -3.2,-4.4 -3,-1.3 -2.1,-1.8 .2,-1.2 -1.3,-1.4 -1.7,-3.7 -2.4,-1 z m 174.9,138.3 .8,.1 -.6,-4.8 -3.5,-12.3 -.2,-8.1 4.9,-10.5 6.1,-8.2 7.2,-5.1 v -.7 h -.8 l -2.6,1 -3.6,2.3 -.7,1.5 -8.2,11.6 -2.8,7.9 v 8.8 l 3.6,12 z", center: [400, 450] },
  UT: { name: "Utah", path: "m 233.2,217.9 3.3,-21.9 -47.9,-8.2 -21,109 46.2,8.2 40,6 11.5,-88.3 z", center: [210, 295] },
  VA: { name: "Virginia", path: "m 834.7,265.4 -1.1,2.8 .5,1.1 .4,-1.1 .8,-3.1 z m -34.6,-7 -.7,-1 1,-.1 1,-.9 .4,-1.8 -.2,-.5 .1,-.5 -.3,-.7 -.6,-.5 -.4,-.1 -.5,-.4 -.6,-.6 h -1 l -.6,-.1 -.4,-.4 .1,-.5 -1.7,-.6 -.8,.3 -1.2,-.1 -.7,-.7 -.5,-.2 -.2,-.7 .6,-.8 v -.9 l -1.2,-.2 -1,-.9 -.9,.1 -1.6,-.3 -.4,.7 -.4,1.6 -.5,2.3 -10,-5.2 -.2,.9 .9,1.6 -.8,2.3 .1,2.9 -1.2,.8 -.5,2.1 -.9,.8 -1.4,1.8 -.9,.8 -1,2.5 -2.4,-1.1 -2.3,8.5 -1.3,1.6 -2.8,-.5 -1.3,-1.9 -2.3,-.7 -.1,4.7 -1.4,1.7 .4,1.5 -2.1,2.2 .4,1.9 -3.7,6.3 -1,3.3 1.5,1.2 -1.5,1.9 .1,1.4 -2.3,2 -.7,-1.1 -4.3,3.1 -1.5,-1 -.6,1.4 .8,.5 -.5,.9 -5.5,2.4 -3,-1.8 -.8,1.7 -1.9,1.8 -2.3,.1 -4.4,-2.3 -.1,-1.5 -1.5,-.7 .8,-1.2 -.7,-.6 -4.9,6.6 -2.9,1 -3,3 -.4,2.2 -2.1,1.3 -.1,1.7 -1.4,1.4 -1.8,.5 -.5,1.9 -1,.4 -6.9,4.2 28.9,-3.3 .2,-1 4.6,-.5 -.3,.7 29.4,-3.5 39.4,-7.3 29.1,-6.1 -.6,-1.2 .4,-.1 .9,.9 -.1,-1.4 -.3,-1.9 1.6,1.2 .9,2.1 v -1.3 l -3.4,-5.5 v -1.2 l -.7,-.8 -1.3,.7 .5,1.4 h -.8 l -.4,-1 -.6,.9 -.9,-1.1 -2.1,-.1 -.2,.7 1.5,2.1 -1.4,-.7 -.5,-1 -.4,.8 -.8,.1 -1.5,1.7 .3,-1.6 v -1.4 l -1.5,-.7 -1.8,-.5 -.2,-1.7 -.6,-1.3 -.6,1.1 -1.7,-1 -2,.3 .2,-.9 1.5,-.2 .9,.5 1.7,-.8 .9,.4 .5,1 v .7 l 1.9,.4 .3,.9 .9,.4 .9,1.2 1.4,-1.6 h .6 l -.1,-2.1 -1.3,1 -.6,-.9 1.5,-.2 -1.2,-.9 -1.2,.6 -.1,-1.7 -1.7,.2 -2.2,-1.1 -1.8,-2.2 3.6,2.2 .9,.3 1.7,-.8 -1.7,-.9 .6,-.6 -1,-.5 .8,-.2 -.3,-.9 1.1,.9 .4,-.8 .4,1.3 1.2,.8 .6,-.5 -.5,-.6 -.1,-2.5 -1.1,-.1 -1.6,-.8 .9,-1.1 -2,-.1 -.4,-.5 -1.4,.6 -1.4,-.8 -.5,-1.2 -2.1,-1.2 -2.1,-1.8 -2.2,-1.9 3,1.3 .9,1.2 2.1,.7 2.3,2.5 .2,-1.7 .6,1.3 2.3,.5 v -4 l -.8,-1.1 1.1,.4 .1,-1.6 -3.1,-1.4 -1.6,-.2 -1.3,-.2 .3,-1.2 -1.5,-.3 -.1,-.6 h -1.8 l -.2,.8 -.7,-1 h -2.7 l -1,-.4 -.2,-1 -1.2,-.6 -.4,-1.5 -.6,-.4 -.7,1.1 -.9,.2 -.9,.7 h -1.5 l -.9,-1.3 .4,-3.1 .5,-2.4 .6,.5 z m 21.9,11.6 .9,-.1 0,-.6 -.8,.1 z m 7.5,14.2 -1,2.7 1.2,-1.3 z m -1.8,-15.3 .7,.3 -.2,1.9 -.5,-.5 -1.3,1 1,.4 -1.8,4.4 .1,8.1 1.9,3.1 .5,-1.5 .4,-2.7 -.3,-2.3 .7,-.9 -.2,-1.4 1.2,-.6 -.6,-.5 .5,-.7 .8,1.1 -.2,1.1 -.4,3.9 1.1,-2.2 .4,-3.1 .1,-3 -.3,-2 .6,-2.3 1.1,-1.8 .1,-2.2 .3,-.9 -4.6,1.6 -.7,.8 z", center: [770, 295] },
  VT: { name: "Vermont", path: "m 859.1,102.4 -1.1,3.5 2.1,2.8 -.4,1.7 .1,1.3 -1.1,2.1 -1.4,.4 -.6,1.3 -2.1,1 -.7,1.5 1.4,3.4 -.5,2.5 .5,1.5 -1,1.9 .4,1.9 -1.3,1.9 .2,2.2 -.7,1.1 .7,4.5 .7,1.5 -.5,2.6 .9,1.8 -.2,2.5 -.5,1.3 -.1,1.4 2.1,2.6 -12.4,2.7 -1.1,-1 .5,-2 -3,-14.2 -1.9,-1.5 -.9,1.6 -.9,-2.2 .8,-1.8 -3.1,-6.7 .3,-3.8 .4,-1 -.6,-2 .4,-2.2 -2.2,-2.3 -.5,-3.2 .4,-1.5 -1.4,-.9 .6,-1.9 -.8,-1.7 27.3,-6.9 z", center: [850, 130] },
  WA: { name: "Washington", path: "m 161.9,83.6 .7,4 -1.1,4.3 -30.3,-7.3 -2.8,1 -5.4,-.9 -1.8,-.9 -1.5,1.2 -3.3,-.4 -4.5,.5 -.9,.7 -4.2,-.4 -.8,-1.6 -1.2,-.2 -4.4,1.3 -1.6,-1.1 -2.2,.8 -.2,-1.8 -2.3,-1.2 -1.5,-.2 -1,-1.1 -3,.3 -1.2,-.8 h -1.2 l -1.2,.9 -5.5,.7 -6.6,-4.2 1.1,-5.6 -.4,-4.1 -3.2,-3.7 -3.7,.1 -.4,-1.1 .4,-1.2 -.7,-.8 -1,.1 -2.1,-1.5 -1.2,.4 -2,-.1 -.7,-1.5 -1.6,-.3 2.5,-7.5 -.7,6 .5,.5 v -2 l .8,-.2 1.1,2.3 -.5,-2.2 1.2,-4.2 1.8,.4 -1.1,-2 -1,.3 -1.5,-.4 .2,-4.2 .2,1.5 .9,.5 .6,-1.6 h 3.2 l -2.2,-1.2 -1.7,-1.9 -1.4,1.6 1.2,-3.1 -.3,-4.6 -.2,-3.6 .9,-6.1 -.5,-2 -1.4,-2.1 .1,-4 .4,-2.7 2,-2.3 -.7,-1.4 .2,-.6 .9,.1 7.8,7.6 4.7,1.9 5.1,2.5 3.2,-.1 .2,3 1,-1.6 h .7 l .6,2.7 .5,-2.6 1.4,-.2 .5,.7 -1.1,.6 .1,1.6 .7,-1.5 h 1.1 l -.4,2.6 -1.1,-.8 .4,1.4 -.1,1.5 -.8,.7 -2.5,2.9 1.2,-3.4 -1.6,.4 -.4,2.1 -3.8,2.8 -.4,1 -2.1,2.2 -.1,1 h 2.2 l 2.4,-.2 .5,-.9 -3.9,.5 v -.6 l 2.6,-2.8 1.8,-.8 1.9,-.2 1,-1.6 3,-2.3 v -1.4 h 1.1 l .1,4 h -1.5 l -.6,.8 -1.1,-.9 .3,1.1 v 1.7 l -.7,.7 -.3,-1.6 -.8,.8 .7,.6 -.9,1.1 h 1.3 l .7,-.5 .1,2 -1,1.9 -.9,1 -.1,1.8 -1,-.2 -.2,-1.4 .9,-1.1 -.8,-.5 -.8,.7 -.7,2.2 -.8,.9 -.1,-2 .8,-1.1 -.2,-1.1 -1.2,1.2 .1,2.2 -.6,.4 -2.1,-.4 -1.3,1.2 2.2,-.6 -.2,2.2 1,-1.8 .4,1.4 .5,-1 .7,1.8 h .7 l .7,-.8 .6,-.1 2,-1.9 .2,-1.2 .8,.6 .3,.9 .7,-.3 .1,-1.2 h 1.3 l .2,-2.9 -.1,-2.7 .9,.3 -.7,-2.1 1.4,-.8 .2,-2.4 2.3,-2.2 1,.1 .3,-1.4 -1.2,-1.4 -.1,-3.5 -.8,.9 .7,2.9 -.6,.1 -.6,-1.9 -.6,-.5 .3,-2.3 1.8,-.1 .3,.7 .3,-1.6 -1.6,-1.7 -.6,-1.6 -.2,2 .9,1.1 -.7,.4 -1,-.8 -1.8,1.3 1.5,.5 .2,2.4 -.3,1.8 .9,-1.3 1.4,2.3 -.4,1.9 h -1.5 v -1.2 l -1.5,-1.2 .5,-3 -1.9,-2.6 2.7,-3 .6,-4.1 h .9 l 1.4,3.2 v -2.6 l 1.2,.3 v -3.3 l -.9,-.8 -1.2,2.5 -1,-3 1.3,-.1 -1.5,-4.9 1.9,-.6 25.4,7.5 31.7,8 23.6,5.5 z m -78.7,-39.4 h .5 l .1,.8 -.5,.3 .1,.6 -.7,.4 -.2,-.9 .5,-.4 z m 5,-4.3 -1.2,1.9 -.1,.8 .4,.2 .5,-.6 1.1,.1 z m -.4,-21.6 .5,.6 1.3,-.3 .2,-1 1.2,-1.8 -1,-.4 -.7,1.6 -.1,-1.6 -1.1,.2 -.7,1.4 z m 3.2,-5.5 .7,1.5 -.9,.2 -.8,.4 -.2,-2.4 z m -2.7,-1.6 -1.1,-.2 .5,1.4 z m -1,2.5 .8,.4 -.4,1.1 1.7,-.5 -.2,-2.2 -.9,-.2 z m -2.7,-.4 .3,2.7 1.6,1.3 .6,-1.9 -1.1,-2.2 z m 1.9,-1.1 -1.1,-1 -.9,.1 1.8,1.5 z m 3.2,-7 h -1.2 v .8 l 1.2,.6 z m -.9,32.5 .4,-2.7 h -1.1 l -.2,1.9 z", center: [130, 65] },
  WI: { name: "Wisconsin", path: "m 611,144 -2.9,.8 .2,2.3 -2.4,3.4 -.2,3.1 .6,.7 .8,-.7 .5,-1.6 2,-1.1 1.6,-4.2 3.5,-1.1 .8,-3.3 .7,-.9 .4,-2.1 1.8,-1.1 v -1.5 l 1,-.9 1.4,.1 v 2 l -1,.1 .5,1.2 -.7,2.2 -.6,.1 -1.2,4.5 -.7,.5 -2.8,7.2 -.3,4.2 .6,2 .1,1.3 -2.4,1.9 .3,1.9 -.9,3.1 .3,1.6 .4,3.7 -1.1,4.1 -1.5,5 1,1.5 -.3,.3 .8,1.7 -.5,1.1 1.1,.9 v 2.7 l 1.3,1.5 -.4,3 .3,4 -45.9,2.8 -1.3,-2.8 -3.3,-.7 -2.7,-1.5 -2,-5.5 .1,-2.5 1.6,-3.3 -.6,-1.1 -2.1,-1.6 -.2,-2.6 -1.1,-4.5 -.2,-3 -2.2,-3 -2.8,-.7 -5.2,-3.6 -.6,-3.3 -6.3,-3.1 -.2,-1.3 h -3.3 l -2.2,-2.6 -2,-1.3 .7,-5.1 -.9,-1.6 .5,-5.4 1,-1.8 -.3,-2.7 -1.2,-1.3 -1.8,-.3 v -1.7 l 2.8,-5.8 5.9,-3.9 -.4,-13 .9,.4 .6,-.5 .1,-1.1 .9,-.6 1.4,1.2 .7,-.1 h 2.6 l 6.8,-2.6 .3,-1 h 1.2 l .7,-1.2 .4,.8 1.8,-.9 1.8,-1.7 .3,.5 1,-1 2.2,1.6 -.8,1.6 -1.2,1.4 .5,1.5 -1.4,1.6 .4,.9 2.3,-1.1 v -1.4 l 3.3,1.9 1.9,.7 1.9,.7 3,3.8 17,3.8 1.4,1 4,.8 .7,.5 2.8,-.2 4.9,.8 1.4,1.5 -1,1 .8,.8 3.8,.7 1.2,1.2 .1,4.4 -1.3,2.8 2,.1 1,-.8 .9,.8 -1.1,3.1 1,1.6 1.2,.3 z m -49.5,-37.3 -.5,.1 -1.5,1.6 .2,.5 1.5,-.6 v -.6 l .9,-.3 z m 1.6,-1.1 -1,.3 -.2,.7 .9,-.1 z m -1.3,-1.6 -.2,.9 h 1.7 l .6,-.4 .1,-1 z m 2.8,-3 -.3,1.9 1.2,-.5 .1,-1.4 z m 58.3,31.9 -2,.3 -.4,1.3 1.3,1.7 z", center: [565, 165] },
  WV: { name: "West Virginia", path: "m 723.4,297.5 -.8,1.2 1.5,.7 .1,1.5 4.4,2.3 2.3,-.1 1.9,-1.8 .8,-1.7 3,1.8 5.5,-2.4 .5,-.9 -.8,-.5 .6,-1.4 1.5,1 4.3,-3.1 .7,1.1 2.3,-2 -.1,-1.4 1.5,-1.9 -1.5,-1.2 1,-3.3 3.7,-6.3 -.4,-1.9 2.1,-2.2 -.4,-1.5 1.4,-1.7 .1,-4.7 2.3,.7 1.3,1.9 2.8,.5 1.3,-1.6 2.3,-8.5 2.4,1.1 1,-2.5 .9,-.8 1.4,-1.8 .9,-.8 .5,-2.1 1.2,-.8 -.1,-2.9 .8,-2.3 -.9,-1.6 .2,-.9 10,5.2 .5,-2.3 .4,-1.6 .4,-.7 -.9,-.4 .2,-1.6 -1,-.5 -.2,-.7 h -.7 l -.8,-1.2 .2,-1 -2.6,.4 -2.2,-1.6 -1.4,.3 -.9,1.4 h -1.3 l -1.7,2.9 -3.3,.4 -1.9,-1 -2.6,3.8 -2.2,-.3 -3.1,3.9 -.9,1.6 -1.8,1.6 -1.7,-11.4 -17.4,2.9 -3.2,-19.7 -2.2,1.2 1.4,2.1 -.1,2.2 .6,2 -1.1,3.4 -.1,5.4 -1,3.6 .5,1.1 -.4,2.2 -1.1,.5 -2,3.3 -1.8,2 h -.6 l -1.8,1.7 -1.3,-1.2 -1.5,1.8 -.3,1.2 h -1.3 l -1.3,2.2 .1,2.1 -1,.5 1.4,1.1 v 1.9 l -1,.2 -.7,.8 -1,.5 -.6,-2.1 -1.6,-.5 -1,2.3 -.3,2.2 -1.1,1.3 1.3,3.6 -1.5,.8 -.4,3.5 h -1.5 l -3.2,1.4 -.1,1.1 .6,1 -.6,3.6 1.9,1.6 .8,1.1 1,.6 -.1,.9 4.4,5.6 h 1.4 l 1.5,1.8 1.2,.3 1.4,-.1 z", center: [740, 280] },
  WY: { name: "Wyoming", path: "m 355.3,143.7 -51,-5.3 -57.3,-7.9 -2,10.7 -8.5,54.8 -3.3,21.9 32.1,4.8 44.9,5.7 37.5,3.4 3.7,-44.2 z", center: [295, 195] }
};

// Convert to array for easier iteration
const STATES_ARRAY = Object.entries(STATES).map(([id, data]) => ({ id, ...data }));

// Mode configuration
const MODE_CONFIG = {
    fullMap: { icon: '', title: 'Map Master', desc: 'Label every state on the map', difficulty: 'hard' },
    singleState: { icon: '', title: 'State Spotter', desc: 'Name the highlighted state', difficulty: 'medium' },
    nameChoices: { icon: '', title: 'Quick Pick', desc: 'Choose the right name fast', difficulty: 'medium' },
    shapeChoices: { icon: '', title: 'Shape Hunter', desc: 'Find the state by its shape', difficulty: 'easy' },
    random: { icon: '', title: 'Mystery Challenge', desc: 'Random mix of all modes!' }
};

// Utility functions
const shuffle = arr => {
    const a = [...arr];
    for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
};

const getRandomChoices = (correct, count = 3) => {
    const others = STATES_ARRAY.filter(s => s.id !== correct.id);
    const choices = shuffle(others).slice(0, count);
    choices.push(correct);
    return shuffle(choices);
};

const levenshtein = (a, b) => {
    const m = a.length, n = b.length;
    const dp = Array(m + 1).fill(null).map(() => Array(n + 1).fill(0));
    for (let i = 0; i <= m; i++) dp[i][0] = i;
    for (let j = 0; j <= n; j++) dp[0][j] = j;
    for (let i = 1; i <= m; i++) {
        for (let j = 1; j <= n; j++) {
            dp[i][j] = a[i-1] === b[j-1] ? dp[i-1][j-1] : 1 + Math.min(dp[i-1][j-1], dp[i][j-1], dp[i-1][j]);
        }
    }
    return dp[m][n];
};

const checkAnswer = (input, correct) => {
    const cleanInput = input.trim().toLowerCase();
    const cleanCorrect = correct.toLowerCase();
    if (cleanInput === cleanCorrect) return true;
    const state = STATES_ARRAY.find(s => s.name === correct);
    if (state && cleanInput === state.id.toLowerCase()) return true;
    const maxDist = correct.length > 8 ? 2 : 1;
    return levenshtein(cleanInput, cleanCorrect) <= maxDist;
};

const formatTime = ms => {
    const totalSeconds = Math.floor(ms / 1000);
    const minutes = Math.floor(totalSeconds / 60);
    const seconds = totalSeconds % 60;
    const milliseconds = ms % 1000;
    return `${minutes}:${seconds.toString().padStart(2, '0')}.${milliseconds.toString().padStart(3, '0')}`;
};

const formatDate = (timestamp) => {
    const d = new Date(timestamp);
    return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric', hour: 'numeric', minute: '2-digit' });
};

// Storage helpers
const loadBestTimes = () => {
    try { return JSON.parse(localStorage.getItem('stateQuestBestTimes') || '{}'); }
    catch { return {}; }
};

const saveBestTime = (mode, time) => {
    const times = loadBestTimes();
    if (!times[mode] || time < times[mode]) {
        times[mode] = time;
        localStorage.setItem('stateQuestBestTimes', JSON.stringify(times));
        return true;
    }
    return false;
};

// History storage
const loadHistory = () => {
    try { return JSON.parse(localStorage.getItem('stateQuestHistory') || '[]'); }
    catch { return []; }
};

const saveToHistory = (mode, score, total, time) => {
    try {
        const history = loadHistory();
        history.unshift({
            mode,
            score,
            total,
            time,
            timestamp: Date.now(),
            id: Date.now()
        });
        // Keep only last 50 entries
        const trimmed = history.slice(0, 50);
        localStorage.setItem('stateQuestHistory', JSON.stringify(trimmed));
        console.log('Progress saved:', { mode, score, total }); // Debug log
    } catch (e) {
        console.error('Failed to save progress:', e);
    }
};

const clearHistory = () => {
    localStorage.removeItem('stateQuestHistory');
    localStorage.removeItem('stateQuestBestTimes');
};

// URL hash navigation
const setHash = (mode) => {
    if (mode) {
        window.location.hash = mode;
    } else {
        history.pushState('', document.title, window.location.pathname);
    }
};

const getHashMode = () => {
    const hash = window.location.hash.slice(1);
    if (hash === 'progress') return 'progress';
    return hash && MODE_CONFIG[hash] ? hash : null;
};

// Messages
const GOOD_MSGS = ["AWESOME!", "NAILED IT!", "BOOM!", "PERFECT!", "YOU ROCK!", "CRUSHING IT!", "LEGENDARY!"];
const TRY_MSGS = ["SO CLOSE!", "ALMOST!", "KEEP GOING!", "NICE TRY!", "YOU GOT THIS!"];

// Confetti Component
const Confetti = ({ active }) => {
    if (!active) return null;
    const colors = ['#6366f1', '#a855f7', '#ec4899', '#f59e0b', '#10b981', '#3b82f6'];
    const pieces = Array.from({ length: 40 }, (_, i) => ({
        id: i,
        color: colors[i % colors.length],
        left: `${Math.random() * 100}%`,
        delay: `${Math.random() * 0.6}s`,
        size: 8 + Math.random() * 8
    }));
    return (
        <div className="confetti">
            {pieces.map(p => (
                <div key={p.id} className="confetti-piece"
                    style={{ 
                        left: p.left, 
                        backgroundColor: p.color, 
                        animationDelay: p.delay,
                        width: p.size,
                        height: p.size,
                        borderRadius: Math.random() > 0.5 ? '50%' : '0'
                    }} />
            ))}
        </div>
    );
};

// Mode Title Bar
const ModeTitle = ({ mode }) => {
    const config = MODE_CONFIG[mode] || MODE_CONFIG.random;
    return (
        <div className="mode-title">
            <span className="icon">{config.icon}</span>
            <span className="text">{config.title}</span>
        </div>
    );
};

// Feedback Overlay
const FeedbackOverlay = ({ show, isCorrect, correctAnswer, onClose }) => {
    // Use ref to avoid re-triggering effect when onClose reference changes
    const onCloseRef = useRef(onClose);
    onCloseRef.current = onClose;

    // Memoize the message so it doesn't change on every re-render
    const [displayMsg, setDisplayMsg] = useState('');

    useEffect(() => {
        if (show) {
            // Pick message once when shown, not on every render
            const msg = isCorrect
                ? GOOD_MSGS[Math.floor(Math.random() * GOOD_MSGS.length)]
                : TRY_MSGS[Math.floor(Math.random() * TRY_MSGS.length)];
            setDisplayMsg(msg);

            // Auto-close after 2 seconds
            const timer = setTimeout(() => onCloseRef.current(), 2000);
            return () => clearTimeout(timer);
        }
    }, [show, isCorrect]);

    if (!show) return null;
    return (
        <div className={`feedback ${isCorrect ? 'correct' : 'incorrect'}`}>
            <Confetti active={isCorrect} />
            <div className="icon">{isCorrect ? '' : ''}</div>
            <div className="msg">{displayMsg}</div>
            {!isCorrect && <div className="answer">It was <strong>{correctAnswer}</strong></div>}
        </div>
    );
};

// Check Results Modal
const CheckResults = ({ correct, total, onClose }) => (
    <div className="results">
        <div className="results-card">
            <h2> Progress Check</h2>
            <div className="score">{correct}/{total}</div>
            <div className="label">states correct so far</div>
            <button className="submit-btn" onClick={onClose} style={{marginTop: 20}}>Keep Going!</button>
        </div>
    </div>
);

// Small states that should show initials instead of full names
const SMALL_STATES = new Set(['CT', 'DE', 'DC', 'HI', 'MA', 'MD', 'NH', 'NJ', 'RI', 'VT', 'WV', 'SC', 'IN', 'KY', 'TN', 'VA', 'NC', 'LA', 'MS', 'AL', 'GA', 'FL', 'PA', 'NY', 'OH', 'MI', 'WI', 'IL', 'IA', 'MO', 'AR', 'OK']);

// Full US Map with optional labels
// answers = {stateId: userAnswer} - what the user typed
// showResultColors = true means show green/red with correct names
// showResultColors = false means show blue with user's answers
const USMap = ({ onSelect, answers, selectedId, answeredStates, correctStates, wrongStates, showLabels, showResultColors }) => {
    const getStateClass = (id) => {
        let cls = 'state-path';
        if (selectedId === id) cls += ' selected';
        // Show green/red colors when viewing results
        if (showResultColors) {
            if (correctStates && correctStates.has(id)) {
                cls += ' correct';
            } else if (wrongStates && wrongStates.has(id)) {
                cls += ' incorrect';
            }
        } else if (answeredStates && answeredStates.has(id)) {
            // During quiz, all answered states get the same blue styling
            cls += ' correct';
        }
        return cls;
    };

    // Get correct label (full name for large states, initials for small)
    const getCorrectLabel = (state) => {
        return SMALL_STATES.has(state.id) ? state.id : state.name;
    };

    const getLabelClass = (state, text) => {
        // Use smaller font if text is long (user typed something long or full state name)
        const isShort = text && text.length <= 2;
        return isShort ? 'state-label initials' : 'state-label full-name';
    };

    // Determine which states to label and what text to show
    const getLabelsToRender = () => {
        if (showResultColors) {
            // Results mode: show correct names for all answered states
            const allAnswered = new Set([...(correctStates || []), ...(wrongStates || [])]);
            return Array.from(allAnswered).map(id => {
                const state = STATES[id];
                if (!state) return null;
                return { id, state, text: getCorrectLabel(state) };
            }).filter(Boolean);
        } else if (answeredStates && answers) {
            // Quiz mode: show what the user typed
            return Array.from(answeredStates).map(id => {
                const state = STATES[id];
                if (!state) return null;
                const userAnswer = answers[id] || '';
                return { id, state, text: userAnswer };
            }).filter(Boolean);
        }
        return [];
    };

    const labelsToRender = showLabels ? getLabelsToRender() : [];

    return (
        <svg viewBox="0 0 959 593" className="us-map">
            {STATES_ARRAY.map(state => (
                <path
                    key={state.id}
                    d={state.path}
                    className={getStateClass(state.id)}
                    onClick={() => onSelect && onSelect(state)}
                />
            ))}
            {labelsToRender.map(({ id, state, text }) => (
                <text key={`label-${id}`} x={state.center[0]} y={state.center[1]} className={getLabelClass(state, text)}>
                    {text}
                </text>
            ))}
        </svg>
    );
};

// Map showing all states with one highlighted
const HighlightMap = ({ highlightId }) => {
    return (
        <svg viewBox="0 0 959 593" style={{ width: '100%', height: '100%' }}>
            {STATES_ARRAY.map(state => (
                <path
                    key={state.id}
                    d={state.path}
                    className={`state-path ${state.id === highlightId ? 'highlight' : 'dim'}`}
                />
            ))}
        </svg>
    );
};

// Progress Page
const ProgressPage = () => {
    const [history, setHistory] = useState(() => loadHistory());
    const [bestTimes, setBestTimes] = useState(() => loadBestTimes());

    // Reload history and best times when component mounts/remounts
    useEffect(() => {
        setHistory(loadHistory());
        setBestTimes(loadBestTimes());
    }, []);

    const stats = useMemo(() => {
        const totalGames = history.length;
        const totalCorrect = history.reduce((sum, h) => sum + h.score, 0);
        const totalQuestions = history.reduce((sum, h) => sum + h.total, 0);
        const perfectGames = history.filter(h => h.score === h.total).length;
        const avgScore = totalGames > 0 ? Math.round((totalCorrect / totalQuestions) * 100) : 0;
        return { totalGames, totalCorrect, perfectGames, avgScore };
    }, [history]);

    const handleClear = () => {
        if (confirm('Clear all progress? This cannot be undone!')) {
            clearHistory();
            setHistory([]);
        }
    };

    return (
        <div className="progress-page">
            <h2> Your Progress</h2>
            
            <div className="stats-grid">
                <div className="stat-card">
                    <div className="value">{stats.totalGames}</div>
                    <div className="label">Games Played</div>
                </div>
                <div className="stat-card">
                    <div className="value">{stats.avgScore}%</div>
                    <div className="label">Avg Score</div>
                </div>
                <div className="stat-card">
                    <div className="value">{stats.perfectGames}</div>
                    <div className="label">Perfect Games</div>
                </div>
                <div className="stat-card">
                    <div className="value">{stats.totalCorrect}</div>
                    <div className="label">States Named</div>
                </div>
            </div>

            {Object.keys(bestTimes).length > 0 && (
                <div className="history-section">
                    <h3> Best Times</h3>
                    <div className="history-list">
                        {Object.entries(bestTimes).map(([mode, time]) => {
                            const config = MODE_CONFIG[mode];
                            if (!config) return null;
                            return (
                                <div key={mode} className="history-item perfect">
                                    <div className="mode-info">
                                        <span className="mode-icon">{config.icon}</span>
                                        <div>
                                            <div className="mode-name">{config.title}</div>
                                        </div>
                                    </div>
                                    <div className="result">
                                        <div className="result-score">{formatTime(time)}</div>
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            )}

            <div className="history-section">
                <h3> Recent Games</h3>
                {history.length === 0 ? (
                    <div className="empty-state">
                        <div className="icon"></div>
                        <p>No games yet! Play some games to see your history here.</p>
                    </div>
                ) : (
                    <>
                        <div className="history-list">
                            {history.map(h => {
                                const config = MODE_CONFIG[h.mode];
                                if (!config) return null;
                                const isPerfect = h.score === h.total;
                                return (
                                    <div key={h.id} className={`history-item ${isPerfect ? 'perfect' : ''}`}>
                                        <div className="mode-info">
                                            <span className="mode-icon">{config.icon}</span>
                                            <div>
                                                <div className="mode-name">{config.title}</div>
                                                <div className="mode-date">{formatDate(h.timestamp)}</div>
                                            </div>
                                        </div>
                                        <div className="result">
                                            <div className="result-score">{h.score}/{h.total} {isPerfect && ''}</div>
                                            {h.time > 0 && <div className="result-time">{formatTime(h.time)}</div>}
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                        <button className="clear-btn" onClick={handleClear}>Clear All Progress</button>
                    </>
                )}
            </div>
        </div>
    );
};

// Mode Selector
const ModeSelector = ({ onSelect, timerEnabled, onTimerToggle }) => (
    <div>
        <div className="timer-toggle">
            <label> Race Mode:</label>
            <div className={`toggle ${timerEnabled ? 'active' : ''}`} onClick={onTimerToggle} />
            <span style={{color: timerEnabled ? '#10b981' : '#94a3b8', fontWeight: 600}}>
                {timerEnabled ? 'ON' : 'OFF'}
            </span>
        </div>
        <div className="mode-grid">
            {['fullMap', 'singleState', 'nameChoices', 'shapeChoices'].map(mode => {
                const config = MODE_CONFIG[mode];
                return (
                    <div key={mode} className="mode-card" onClick={() => onSelect(mode)}>
                        <span className="icon">{config.icon}</span>
                        <span className="title">{config.title}</span>
                        <span className="desc">{config.desc}</span>
                        <span className={`difficulty ${config.difficulty}`}>{config.difficulty}</span>
                    </div>
                );
            })}
            <div className="mode-card random" onClick={() => onSelect('random')}>
                <span className="icon"></span>
                <span className="title">Mystery Challenge</span>
                <span className="desc">Random mix of all game modes - expect anything!</span>
            </div>
        </div>
    </div>
);

// Full Map Quiz with state labels
const FullMapQuiz = ({ onComplete, timerEnabled, bestTime }) => {
    const [answers, setAnswers] = useState({}); // {stateId: userAnswer}
    const [selected, setSelected] = useState(null);
    const [input, setInput] = useState('');
    const [showCheck, setShowCheck] = useState(false);
    const [checkResult, setCheckResult] = useState(null);
    const [answeredStates, setAnsweredStates] = useState(new Set()); // All answered (correct or not)
    const [correctStates, setCorrectStates] = useState(new Set()); // Only correct answers
    const [wrongAnswers, setWrongAnswers] = useState([]); // [{stateId, userAnswer, correctAnswer}]
    const [showReview, setShowReview] = useState(false);
    const [startTime] = useState(Date.now());
    const [elapsed, setElapsed] = useState(0);
    const inputRef = useRef();

    useEffect(() => {
        if (timerEnabled) {
            const interval = setInterval(() => setElapsed(Date.now() - startTime), 100);
            return () => clearInterval(interval);
        }
    }, [timerEnabled, startTime]);

    const handleSelect = (state) => {
        // Don't allow selecting already answered states
        if (answeredStates.has(state.id)) return;
        setSelected(state);
        setInput('');
        setTimeout(() => inputRef.current?.focus(), 100);
    };

    const handleSubmit = () => {
        if (!selected || !input.trim()) return;
        const userAnswer = input.trim();
        const isCorrect = checkAnswer(userAnswer, selected.name);

        setAnswers(prev => ({ ...prev, [selected.id]: userAnswer }));
        setAnsweredStates(prev => new Set([...prev, selected.id]));

        if (isCorrect) {
            setCorrectStates(prev => new Set([...prev, selected.id]));
        } else {
            // Save wrong answer for later review
            setWrongAnswers(prev => [...prev, {
                stateId: selected.id,
                userAnswer: userAnswer,
                correctAnswer: selected.name
            }]);
        }

        setInput('');
        setSelected(null);
    };

    // Build wrongStates set from wrongAnswers array
    const wrongStates = useMemo(() => new Set(wrongAnswers.map(w => w.stateId)), [wrongAnswers]);

    const handleCheck = () => {
        // Build list of correct answers for display
        const correctAnswersList = Array.from(correctStates).map(id => ({
            stateId: id,
            stateName: STATES[id]?.name || id
        }));
        setCheckResult({
            correct: correctStates.size,
            total: answeredStates.size,
            wrongAnswers,
            correctAnswersList,
            correctStates,
            wrongStates
        });
        setShowCheck(true);
    };

    const handleReset = () => {
        setAnswers({});
        setSelected(null);
        setInput('');
        setAnsweredStates(new Set());
        setCorrectStates(new Set());
        setWrongAnswers([]);
    };

    const handleFinish = () => {
        const isNewRecord = timerEnabled && saveBestTime('fullMap', elapsed);
        saveToHistory('fullMap', correctStates.size, 50, timerEnabled ? elapsed : 0);
        onComplete(correctStates.size, 50, elapsed, isNewRecord);
    };

    return (
        <div>
            <ModeTitle mode="fullMap" />
            {timerEnabled && (
                <div className={`timer ${bestTime && elapsed > bestTime ? 'behind-pace' : ''}`}>
                    <span className="current"> {formatTime(elapsed)}</span>
                    {bestTime && <span className="best"> Best: {formatTime(bestTime)}</span>}
                </div>
            )}
            <div className="progress-section">
                <div className="progress-bar">
                    <div className="progress-fill" style={{ width: `${(answeredStates.size / 50) * 100}%` }} />
                </div>
                <div className="progress-text">
                    <span className="score">{answeredStates.size}</span> / 50 answered
                    {wrongAnswers.length > 0 && (
                        <button
                            onClick={() => setShowReview(true)}
                            style={{marginLeft: 12, background: 'var(--warning)', color: '#000', border: 'none', padding: '4px 10px', borderRadius: 6, cursor: 'pointer', fontSize: 12}}>
                             Review {wrongAnswers.length} mistake{wrongAnswers.length > 1 ? 's' : ''}
                        </button>
                    )}
                </div>
            </div>
            <div className="map-container">
                <USMap onSelect={handleSelect} answers={answers} selectedId={selected?.id}
                    answeredStates={answeredStates} showLabels={true} />
            </div>
            {selected && (
                <div className="input-area">
                    <div className="prompt"> What state is this?</div>
                    <input ref={inputRef} type="text" className="state-input" value={input}
                        onChange={e => setInput(e.target.value)}
                        onKeyDown={e => e.key === 'Enter' && handleSubmit()}
                        placeholder="Type the state name..." autoComplete="off" />
                    <button className="submit-btn" onClick={handleSubmit} disabled={!input.trim()}>
                        Lock It In! 
                    </button>
                </div>
            )}
            <div className="action-btns">
                <button className="check" onClick={handleCheck}>Check Score</button>
                <button className="reset" onClick={handleReset}>Start Over</button>
            </div>
            {answeredStates.size === 50 && (
                <button className="submit-btn" onClick={handleFinish} style={{ marginTop: 14 }}>
                     Finish Challenge!
                </button>
            )}
            {showCheck && checkResult && (
                <div className="overlay" onClick={() => setShowCheck(false)}>
                    <div className="overlay-content" onClick={e => e.stopPropagation()} style={{maxWidth: 700, width: '90vw'}}>
                        <h2> Your Results</h2>
                        <div className="score-display">
                            <span className="big-score">{checkResult.correct}</span>
                            <span className="score-label">/ {checkResult.total} correct</span>
                        </div>
                        <div style={{margin: '16px 0', padding: 12, background: 'var(--bg-light)', borderRadius: 12}}>
                            <USMap
                                correctStates={checkResult.correctStates}
                                wrongStates={checkResult.wrongStates}
                                showLabels={true}
                                showResultColors={true}
                            />
                        </div>
                        <div style={{display: 'flex', gap: 16, fontSize: 14, justifyContent: 'center', marginBottom: 12}}>
                            <span style={{color: 'var(--success)'}}> Correct: {checkResult.correctAnswersList.length}</span>
                            <span style={{color: 'var(--danger)'}}> Wrong: {checkResult.wrongAnswers.length}</span>
                        </div>
                        {checkResult.wrongAnswers.length > 0 && (
                            <div style={{textAlign: 'left', maxHeight: 150, overflowY: 'auto', padding: '8px 12px', background: 'rgba(239,68,68,0.1)', borderRadius: 8}}>
                                <h4 style={{marginBottom: 8, color: 'var(--danger)'}}>States to study:</h4>
                                {checkResult.wrongAnswers.map((w, i) => (
                                    <div key={i} style={{padding: '4px 0', fontSize: 13}}>
                                        <span style={{color: 'var(--text-muted)'}}>You said "{w.userAnswer}"</span>
                                        <span style={{color: 'var(--danger)', marginLeft: 8}}> {w.correctAnswer}</span>
                                    </div>
                                ))}
                            </div>
                        )}
                        <button className="submit-btn" onClick={() => setShowCheck(false)} style={{marginTop: 16}}>
                            Got it!
                        </button>
                    </div>
                </div>
            )}
            {showReview && (
                <div className="overlay" onClick={() => setShowReview(false)}>
                    <div className="overlay-content" onClick={e => e.stopPropagation()}>
                        <h2> Mistakes to Learn From</h2>
                        <div style={{textAlign: 'left', maxHeight: 300, overflowY: 'auto'}}>
                            {wrongAnswers.map((w, i) => (
                                <div key={i} style={{padding: '8px 0', borderBottom: '1px solid var(--border)'}}>
                                    <div style={{color: 'var(--danger)'}}> You said: {w.userAnswer}</div>
                                    <div style={{color: 'var(--success)'}}> Correct: {w.correctAnswer}</div>
                                </div>
                            ))}
                        </div>
                        <button className="submit-btn" onClick={() => setShowReview(false)} style={{marginTop: 16}}>
                            Got it!
                        </button>
                    </div>
                </div>
            )}
        </div>
    );
};

// Single State Quiz
const SingleStateQuiz = ({ onComplete, timerEnabled, bestTime }) => {
    const [queue] = useState(() => shuffle([...STATES_ARRAY]));
    const [index, setIndex] = useState(0);
    const [input, setInput] = useState('');
    const [correct, setCorrect] = useState(0);
    const [feedback, setFeedback] = useState(null);
    const [startTime] = useState(Date.now());
    const [elapsed, setElapsed] = useState(0);
    const inputRef = useRef();

    useEffect(() => {
        if (timerEnabled) {
            const interval = setInterval(() => setElapsed(Date.now() - startTime), 100);
            return () => clearInterval(interval);
        }
    }, [timerEnabled, startTime]);

    useEffect(() => { inputRef.current?.focus(); }, [index]);

    const current = queue[index];

    const handleSubmit = () => {
        if (!input.trim()) return;
        const isCorrect = checkAnswer(input, current.name);
        if (isCorrect) setCorrect(c => c + 1);
        setFeedback({ isCorrect, correctAnswer: current.name });
    };

    const handleNext = () => {
        setFeedback(null);
        setInput('');
        if (index + 1 >= 50) {
            const finalCorrect = correct + (feedback?.isCorrect ? 0 : 0);
            const isNewRecord = timerEnabled && saveBestTime('singleState', elapsed);
            saveToHistory('singleState', finalCorrect, 50, timerEnabled ? elapsed : 0);
            onComplete(finalCorrect, 50, elapsed, isNewRecord);
        } else {
            setIndex(i => i + 1);
        }
    };

    if (index >= 50) return null;

    return (
        <div>
            <ModeTitle mode="singleState" />
            {timerEnabled && (
                <div className={`timer ${bestTime && elapsed > bestTime ? 'behind-pace' : ''}`}>
                    <span className="current"> {formatTime(elapsed)}</span>
                    {bestTime && <span className="best"> Best: {formatTime(bestTime)}</span>}
                </div>
            )}
            <div className="progress-section">
                <div className="progress-bar">
                    <div className="progress-fill" style={{ width: `${((index + 1) / 50) * 100}%` }} />
                </div>
                <div className="progress-text">State <span className="score">{index + 1}</span> of 50</div>
            </div>
            <div className="single-state">
                <HighlightMap highlightId={current.id} />
            </div>
            <div className="input-area">
                <div className="prompt"> Name this state!</div>
                <input ref={inputRef} type="text" className="state-input" value={input}
                    onChange={e => setInput(e.target.value)}
                    onKeyDown={e => e.key === 'Enter' && (feedback ? handleNext() : handleSubmit())}
                    placeholder="Type your answer..." autoComplete="off" disabled={feedback !== null} />
                <button className="submit-btn" onClick={feedback ? handleNext : handleSubmit}
                    disabled={!feedback && !input.trim()}>
                    {feedback ? 'Next State! ' : 'Submit Answer'}
                </button>
            </div>
            <FeedbackOverlay show={feedback !== null} isCorrect={feedback?.isCorrect}
                correctAnswer={feedback?.correctAnswer} onClose={handleNext} />
        </div>
    );
};

// Multiple Choice Quiz
const NameChoicesQuiz = ({ onComplete, timerEnabled, bestTime }) => {
    const [queue] = useState(() => shuffle([...STATES_ARRAY]));
    const [index, setIndex] = useState(0);
    const [choices, setChoices] = useState(() => getRandomChoices(queue[0]));
    const [correct, setCorrect] = useState(0);
    const [feedback, setFeedback] = useState(null);
    const [selected, setSelected] = useState(null);
    const [startTime] = useState(Date.now());
    const [elapsed, setElapsed] = useState(0);

    useEffect(() => {
        if (timerEnabled) {
            const interval = setInterval(() => setElapsed(Date.now() - startTime), 100);
            return () => clearInterval(interval);
        }
    }, [timerEnabled, startTime]);

    const current = queue[index];

    const handleChoice = (choice) => {
        if (feedback) return;
        setSelected(choice.id);
        const isCorrect = choice.id === current.id;
        if (isCorrect) setCorrect(c => c + 1);
        setFeedback({ isCorrect, correctAnswer: current.name });
    };

    const handleNext = () => {
        setFeedback(null);
        setSelected(null);
        if (index + 1 >= 50) {
            const isNewRecord = timerEnabled && saveBestTime('nameChoices', elapsed);
            saveToHistory('nameChoices', correct, 50, timerEnabled ? elapsed : 0);
            onComplete(correct, 50, elapsed, isNewRecord);
        } else {
            const nextIndex = index + 1;
            setIndex(nextIndex);
            setChoices(getRandomChoices(queue[nextIndex]));
        }
    };

    return (
        <div>
            <ModeTitle mode="nameChoices" />
            {timerEnabled && (
                <div className={`timer ${bestTime && elapsed > bestTime ? 'behind-pace' : ''}`}>
                    <span className="current"> {formatTime(elapsed)}</span>
                    {bestTime && <span className="best"> Best: {formatTime(bestTime)}</span>}
                </div>
            )}
            <div className="progress-section">
                <div className="progress-bar">
                    <div className="progress-fill" style={{ width: `${((index + 1) / 50) * 100}%` }} />
                </div>
                <div className="progress-text">State <span className="score">{index + 1}</span> of 50</div>
            </div>
            <div className="single-state">
                <HighlightMap highlightId={current.id} />
            </div>
            <div className="prompt"> Which state is highlighted?</div>
            <div className="choices">
                {choices.map(choice => (
                    <button key={choice.id}
                        className={`choice-btn ${feedback && choice.id === current.id ? 'correct' : ''} 
                            ${feedback && selected === choice.id && choice.id !== current.id ? 'incorrect' : ''}`}
                        onClick={() => handleChoice(choice)} disabled={feedback !== null}>
                        {choice.name}
                    </button>
                ))}
            </div>
            <FeedbackOverlay show={feedback !== null} isCorrect={feedback?.isCorrect}
                correctAnswer={feedback?.correctAnswer} onClose={handleNext} />
        </div>
    );
};

// Shape Choices Quiz
const ShapeChoicesQuiz = ({ onComplete, timerEnabled, bestTime }) => {
    const [queue] = useState(() => shuffle([...STATES_ARRAY]));
    const [index, setIndex] = useState(0);
    const [choices, setChoices] = useState(() => getRandomChoices(queue[0]));
    const [correct, setCorrect] = useState(0);
    const [feedback, setFeedback] = useState(null);
    const [selected, setSelected] = useState(null);
    const [startTime] = useState(Date.now());
    const [elapsed, setElapsed] = useState(0);

    useEffect(() => {
        if (timerEnabled) {
            const interval = setInterval(() => setElapsed(Date.now() - startTime), 100);
            return () => clearInterval(interval);
        }
    }, [timerEnabled, startTime]);

    const current = queue[index];

    const handleChoice = (choice) => {
        if (feedback) return;
        setSelected(choice.id);
        const isCorrect = choice.id === current.id;
        if (isCorrect) setCorrect(c => c + 1);
        setFeedback({ isCorrect, correctAnswer: current.name });
    };

    const handleNext = () => {
        setFeedback(null);
        setSelected(null);
        if (index + 1 >= 50) {
            const isNewRecord = timerEnabled && saveBestTime('shapeChoices', elapsed);
            saveToHistory('shapeChoices', correct, 50, timerEnabled ? elapsed : 0);
            onComplete(correct, 50, elapsed, isNewRecord);
        } else {
            const nextIndex = index + 1;
            setIndex(nextIndex);
            setChoices(getRandomChoices(queue[nextIndex]));
        }
    };

    return (
        <div>
            <ModeTitle mode="shapeChoices" />
            {timerEnabled && (
                <div className={`timer ${bestTime && elapsed > bestTime ? 'behind-pace' : ''}`}>
                    <span className="current"> {formatTime(elapsed)}</span>
                    {bestTime && <span className="best"> Best: {formatTime(bestTime)}</span>}
                </div>
            )}
            <div className="progress-section">
                <div className="progress-bar">
                    <div className="progress-fill" style={{ width: `${((index + 1) / 50) * 100}%` }} />
                </div>
                <div className="progress-text">State <span className="score">{index + 1}</span> of 50</div>
            </div>
            <div className="state-name-display">
                <h2>{current.name}</h2>
                <p> Find this state on the map!</p>
            </div>
            <div className="shape-grid">
                {choices.map(choice => (
                    <div key={choice.id}
                        className={`shape-btn ${feedback && choice.id === current.id ? 'correct' : ''} 
                            ${feedback && selected === choice.id && choice.id !== current.id ? 'incorrect' : ''}`}
                        onClick={() => handleChoice(choice)}>
                        <HighlightMap highlightId={choice.id} />
                    </div>
                ))}
            </div>
            <FeedbackOverlay show={feedback !== null} isCorrect={feedback?.isCorrect}
                correctAnswer={feedback?.correctAnswer} onClose={handleNext} />
        </div>
    );
};

// Completion Screen
const CompletionScreen = ({ score, total, time, isNewRecord, onPlayAgain, onChangeMode }) => {
    const emoji = score >= 45 ? '' : score >= 35 ? '' : score >= 25 ? '' : '';
    const title = score >= 45 ? 'LEGENDARY!' : score >= 35 ? 'AMAZING!' : score >= 25 ? 'NICE WORK!' : 'GOOD TRY!';
    
    return (
        <div className="completion">
            <Confetti active={score >= 25} />
            <div className="trophy">{emoji}</div>
            <h2>{title}</h2>
            <div className="score">You got <span>{score}</span> out of {total}!</div>
            {time > 0 && (
                <div className={`time ${isNewRecord ? 'record' : ''}`}>
                     Time: {formatTime(time)} {isNewRecord && ' NEW RECORD!'}
                </div>
            )}
            <button className="btn primary" onClick={onPlayAgain}>Play Again</button>
            <button className="btn secondary" onClick={onChangeMode}>Try Different Mode</button>
        </div>
    );
};

// Footer Component
const Footer = () => (
    <div className="footer">
        Made by dad with love <span className="heart"></span>
    </div>
);

// Main App
const App = () => {
    const [mode, setMode] = useState(() => getHashMode());
    const [page, setPage] = useState(() => getHashMode() === 'progress' ? 'progress' : 'play');
    const [timerEnabled, setTimerEnabled] = useState(false);
    const [result, setResult] = useState(null);
    const [currentRandomMode, setCurrentRandomMode] = useState(null);
    const [gameKey, setGameKey] = useState(Date.now()); // Key to force quiz remount
    const bestTimes = loadBestTimes();

    useEffect(() => {
        const handleHashChange = () => {
            const hashMode = getHashMode();
            if (hashMode === 'progress') {
                setPage('progress');
                setMode(null);
            } else if (!hashMode) {
                setMode(null);
                setResult(null);
                setPage('play');
            }
        };
        window.addEventListener('hashchange', handleHashChange);
        return () => window.removeEventListener('hashchange', handleHashChange);
    }, []);

    const handleModeSelect = (selectedMode) => {
        setGameKey(Date.now()); // Fresh game state
        if (selectedMode === 'random') {
            const modes = ['fullMap', 'singleState', 'nameChoices', 'shapeChoices'];
            const randomMode = modes[Math.floor(Math.random() * modes.length)];
            setCurrentRandomMode(randomMode);
            setMode('random');
            setHash('random');
        } else {
            setMode(selectedMode);
            setHash(selectedMode);
        }
    };

    const handleComplete = (score, total, time, isNewRecord) => {
        setResult({ score, total, time, isNewRecord });
    };

    const handlePlayAgain = () => {
        // Pick new random mode FIRST (before triggering re-render)
        if (mode === 'random') {
            const modes = ['fullMap', 'singleState', 'nameChoices', 'shapeChoices'];
            setCurrentRandomMode(modes[Math.floor(Math.random() * modes.length)]);
        }
        // Force fresh mount with new key
        setGameKey(Date.now());
        // Clear result LAST (this triggers the re-render that shows the quiz)
        setResult(null);
    };

    const handleChangeMode = () => {
        setMode(null);
        setResult(null);
        setCurrentRandomMode(null);
        setHash(null);
    };

    const handleBack = () => {
        setMode(null);
        setResult(null);
        setCurrentRandomMode(null);
        setHash(null);
    };

    const handlePageChange = (newPage) => {
        setPage(newPage);
        if (newPage === 'progress') {
            setHash('progress');
        } else {
            setHash(null);
        }
        setMode(null);
        setResult(null);
    };

    const activeMode = mode === 'random' ? currentRandomMode : mode;

    const renderQuiz = () => {
        const modeKey = mode === 'random' ? 'random' : activeMode;
        // Use gameKey to force fresh component mount each game
        switch (activeMode) {
            case 'fullMap':
                return <FullMapQuiz key={gameKey} onComplete={handleComplete} timerEnabled={timerEnabled} bestTime={bestTimes[modeKey]} />;
            case 'singleState':
                return <SingleStateQuiz key={gameKey} onComplete={handleComplete} timerEnabled={timerEnabled} bestTime={bestTimes[modeKey]} />;
            case 'nameChoices':
                return <NameChoicesQuiz key={gameKey} onComplete={handleComplete} timerEnabled={timerEnabled} bestTime={bestTimes[modeKey]} />;
            case 'shapeChoices':
                return <ShapeChoicesQuiz key={gameKey} onComplete={handleComplete} timerEnabled={timerEnabled} bestTime={bestTimes[modeKey]} />;
            default:
                return null;
        }
    };

    return (
        <>
            <div className="app">
                <div className="header">
                    <h1> State Quest</h1>
                    {!mode && page === 'play' && <p>Master all 50 US states!</p>}
                </div>

                {!mode && !result && (
                    <div className="nav-tabs">
                        <button className={`nav-tab ${page === 'play' ? 'active' : ''}`} 
                            onClick={() => handlePageChange('play')}> Play</button>
                        <button className={`nav-tab ${page === 'progress' ? 'active' : ''}`} 
                            onClick={() => handlePageChange('progress')}> Progress</button>
                    </div>
                )}

                {page === 'progress' && !mode ? (
                    <ProgressPage />
                ) : result ? (
                    <CompletionScreen {...result} onPlayAgain={handlePlayAgain} onChangeMode={handleChangeMode} />
                ) : mode ? (
                    <>
                        <button className="back-btn" onClick={handleBack}> Exit</button>
                        {renderQuiz()}
                    </>
                ) : (
                    <ModeSelector onSelect={handleModeSelect} timerEnabled={timerEnabled}
                        onTimerToggle={() => setTimerEnabled(t => !t)} />
                )}
            </div>
            <Footer />
        </>
    );
};

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>
