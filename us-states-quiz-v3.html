<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="States Quiz">
    <title>US States Quiz</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        html, body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f0f7ff; min-height: 100vh; font-size: 18px; }
        #root { min-height: 100vh; }

        .app { max-width: 900px; margin: 0 auto; padding: 16px; min-height: 100vh; }
        .header { text-align: center; padding: 16px 0; }
        .header h1 { font-size: 1.8rem; color: #2563eb; margin-bottom: 4px; }
        .header p { color: #64748b; font-size: 1rem; }

        .mode-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 16px 0; }
        .mode-card { background: #fff; border-radius: 16px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); cursor: pointer; text-align: center; border: 3px solid transparent; transition: all 0.2s; }
        .mode-card:hover { transform: translateY(-2px); box-shadow: 0 4px 16px rgba(0,0,0,0.15); }
        .mode-card:active { transform: scale(0.98); }
        .mode-card .icon { font-size: 2.5rem; margin-bottom: 8px; }
        .mode-card .title { font-size: 1.1rem; font-weight: 700; color: #1e293b; }
        .mode-card .desc { font-size: 0.85rem; color: #64748b; margin-top: 4px; }
        .mode-card.random { grid-column: span 2; background: linear-gradient(135deg, #8b5cf6, #6366f1); }
        .mode-card.random .title, .mode-card.random .desc { color: #fff; }

        .quiz-header { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; gap: 8px; flex-wrap: wrap; }
        .back-btn { background: #fff; border: 2px solid #3b82f6; color: #3b82f6; padding: 10px 16px; border-radius: 10px; font-size: 1rem; font-weight: 600; cursor: pointer; }
        .timer { background: #fff; padding: 8px 16px; border-radius: 10px; font-weight: 600; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .timer .current { color: #1e293b; font-size: 1.1rem; }
        .timer .best { color: #22c55e; font-size: 0.85rem; }

        .progress-bar { width: 100%; height: 10px; background: #e2e8f0; border-radius: 5px; overflow: hidden; margin: 8px 0; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #3b82f6, #22c55e); border-radius: 5px; transition: width 0.3s; }
        .progress-text { text-align: center; color: #64748b; font-size: 0.9rem; font-weight: 600; }

        .map-container { display: flex; justify-content: center; align-items: center; padding: 8px; }
        .us-map { width: 100%; max-height: 45vh; touch-action: manipulation; }
        .state-path { fill: #dbeafe; stroke: #3b82f6; stroke-width: 0.5; cursor: pointer; transition: fill 0.2s; }
        .state-path:hover { fill: #93c5fd; }
        .state-path.selected { fill: #fbbf24; stroke: #f59e0b; stroke-width: 1.5; }
        .state-path.correct { fill: #4ade80; stroke: #16a34a; }
        .state-path.incorrect { fill: #f87171; stroke: #dc2626; }
        .state-path.labeled { fill: #a5b4fc; stroke: #6366f1; }

        .input-area { background: #fff; border-radius: 16px; padding: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-top: 12px; }
        .prompt { text-align: center; font-size: 1.2rem; font-weight: 600; color: #1e293b; margin-bottom: 12px; }
        .state-input { width: 100%; height: 50px; padding: 0 16px; font-size: 1.2rem; border: 3px solid #3b82f6; border-radius: 10px; text-align: center; outline: none; }
        .state-input:focus { border-color: #2563eb; box-shadow: 0 0 0 3px rgba(59,130,246,0.2); }

        .btn { padding: 14px 24px; border-radius: 10px; font-size: 1.1rem; font-weight: 700; cursor: pointer; border: none; transition: all 0.2s; }
        .btn:active { transform: scale(0.98); }
        .btn-primary { background: #3b82f6; color: #fff; }
        .btn-primary:hover { background: #2563eb; }
        .btn-primary:disabled { background: #cbd5e1; cursor: not-allowed; }
        .btn-success { background: #22c55e; color: #fff; }
        .btn-danger { background: #ef4444; color: #fff; }
        .btn-secondary { background: #fff; border: 2px solid #3b82f6; color: #3b82f6; }

        .btn-row { display: flex; gap: 12px; margin-top: 12px; }
        .btn-row .btn { flex: 1; }

        .choices { display: flex; flex-direction: column; gap: 10px; }
        .choice-btn { width: 100%; padding: 16px; font-size: 1.15rem; font-weight: 600; background: #fff; border: 3px solid #3b82f6; border-radius: 10px; cursor: pointer; transition: all 0.2s; }
        .choice-btn:hover { background: #3b82f6; color: #fff; }
        .choice-btn.correct { background: #22c55e; border-color: #22c55e; color: #fff; }
        .choice-btn.incorrect { background: #ef4444; border-color: #ef4444; color: #fff; }
        .choice-btn:disabled { opacity: 0.7; cursor: not-allowed; }

        .shape-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .shape-btn { aspect-ratio: 1; background: #fff; border: 3px solid #3b82f6; border-radius: 12px; cursor: pointer; padding: 8px; transition: all 0.2s; }
        .shape-btn:hover { border-color: #2563eb; transform: scale(1.02); }
        .shape-btn.correct { background: #dcfce7; border-color: #22c55e; }
        .shape-btn.incorrect { background: #fee2e2; border-color: #ef4444; }
        .shape-btn svg { width: 100%; height: 100%; }
        .shape-btn .state-path { fill: #3b82f6; stroke: #1d4ed8; }

        .single-state { display: flex; justify-content: center; align-items: center; padding: 20px; }
        .single-state svg { max-width: 280px; max-height: 220px; }
        .single-state .state-path { fill: #3b82f6; stroke: #1d4ed8; stroke-width: 2; }

        .feedback { position: fixed; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100; animation: fadeIn 0.2s; }
        .feedback.correct { background: rgba(34, 197, 94, 0.95); }
        .feedback.incorrect { background: rgba(239, 68, 68, 0.92); }
        .feedback .icon { font-size: 4rem; margin-bottom: 12px; }
        .feedback .msg { font-size: 1.8rem; font-weight: 700; color: #fff; }
        .feedback .answer { font-size: 1.2rem; color: #fff; margin-top: 8px; }

        .results { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 100; padding: 16px; }
        .results-card { background: #fff; border-radius: 20px; padding: 24px; max-width: 360px; width: 100%; text-align: center; }
        .results-card h2 { font-size: 1.5rem; color: #1e293b; margin-bottom: 16px; }
        .results-card .score { font-size: 3rem; font-weight: 700; color: #3b82f6; }
        .results-card .label { color: #64748b; }
        .results-card .time { font-size: 1.1rem; color: #22c55e; margin: 12px 0; }
        .results-card .record { color: #f59e0b; font-weight: 700; }

        .completion { display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 32px; min-height: 60vh; }
        .completion .trophy { font-size: 5rem; margin-bottom: 16px; }
        .completion h2 { font-size: 2rem; color: #2563eb; }
        .completion .score { font-size: 1.3rem; color: #64748b; margin: 12px 0; }
        .completion .time { font-size: 1.1rem; color: #22c55e; }
        .completion .record { color: #f59e0b; font-weight: 700; }

        .confetti { position: fixed; inset: 0; pointer-events: none; overflow: hidden; z-index: 1000; }
        .confetti-piece { position: absolute; width: 10px; height: 10px; top: -20px; animation: fall 2.5s ease-out forwards; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fall { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        .shake { animation: shake 0.4s ease; }

        @media (max-width: 500px) {
            .mode-grid { grid-template-columns: 1fr; }
            .mode-card.random { grid-column: span 1; }
            .header h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useCallback, useRef } = React;

// State data with names and SVG paths
const STATES = {
  AL: { name: "Alabama", path: "M628.5,466.4 l0.6,0.2 1.3,-2.7 0.6,-5.7 0,-1.6 0.5,-2.4 -0.9,-3.3 1.3,-4.3 0.7,-1.4 -1,-1 0.6,-0.7 -0.5,-5.7 0.7,-3.9 -52.9,5.1 -15.2,1.6 1.1,9.8 2.3,23.3 0,10.9 3.7,21.6 0.5,6.9 15.9,-1.6 16.3,-1.5 4.2,7 5,1.3 -0.2,-6.8 1.6,-1.4 0.2,-3 2.7,-3.5 1.5,-5 0.8,-1.6 2.9,-2.4 -0.7,-1.5 1.1,-2.4 -0.3,-8.6 2.2,-6.7 -0.7,-2.5 0.9,-2.4 -1.5,-2.6" },
  AK: { name: "Alaska", path: "M161.1,453.7 l-0.3,85.4 1.6,1 3.1,0.2 1.5,-1.1 h2.6 l0.2,2.9 7,6.8 0.5,2.6 3.4,-1.9 0.6,-0.2 0.3,-3.1 1.5,-1.6 1.1,-0.2 1.9,-1.5 3.1,2.1 0.6,2.9 1.9,1.1 1.1,2.4 3.9,1.8 3.4,6 2.7,3.9 2.3,2.7 1.5,3.7 5,1.8 5.2,2.1 1,4.4 0.5,3.1 -1,3.4 -1.8,2.3 -1.6,-0.8 -1.5,-3.1 -2.7,-1.5 -1.8,-1.1 -0.8,0.8 1.5,2.7 0.2,3.7 -1.1,0.5 -1.9,-1.9 -2.1,-1.3 0.5,1.6 1.3,1.8 -0.8,0.8 -1.3,-1 -2.1,-3.4 -1,-2.3 -1,1 -0.6,-0.3 -1.3,-1.5 1.8,-1.9 -1.5,-1.5 v-5 h-0.8 l-0.8,3.4 -1.1,0.5 -1,-3.7 -0.6,-3.7 -0.8,-0.5 0.3,5.7 v1.1 l-1.5,-1.3 -3.6,-6 -2.1,-0.5 -0.6,-3.7 -1.6,-2.9 -1.6,-1.1 v-2.3 l2.1,-1.3 -0.5,-0.3 -2.6,0.6 -3.4,-2.4 -2.6,-2.9 -4.8,-2.6 -4,-2.6 1.3,-3.2 v-1.6 l-1.8,1.6 -2.9,1.1 -3.7,-1.1 -5.7,-2.4 h-5.5 l-0.6,0.5 -6.5,-3.9 -2.1,-0.3 -2.7,-5.8 -3.6,0.3 -3.6,1.5 0.5,4.5 1.1,-2.9 1,0.3 -1.5,4.4 3.2,-2.7 0.6,1.6 -3.9,4.4 -1.3,-0.3 -0.5,-1.9 -1.3,-0.8 -1.3,1.1 -2.7,-1.8 -3.1,2.1 -1.8,2.1 -3.4,2.1 -4.7,-0.2 -0.5,-2.1 3.7,-0.6 v-1.3 l-2.3,-0.6 1,-2.4 2.3,-3.9 v-1.8 l0.2,-0.8 4.4,-2.3 1,1.3 h2.7 l-1.3,-2.6 -3.7,-0.3 -5,2.7 -2.4,3.4 -1.8,2.6 -1.1,2.3 -4.2,1.5 -3.1,2.6 -0.3,1.6 2.3,1 0.8,2.1 -2.7,3.2 -6.5,4.2 -7.8,4.2 -2.1,1.1 -5.3,1.1 -5.3,2.3 1.8,1.3 -1.5,1.5 -0.5,1.1 -2.7,-1 -3.2,0.2 -0.8,2.3 h-1 l0.3,-2.4 -3.6,1.3 -2.9,1 -3.4,-1.3 -2.9,1.9 h-3.2 l-2.1,1.3 -1.6,0.8 -2.1,-0.3 -2.6,-1.1 -2.3,0.6 -1,1 -1.6,-1.1 v-1.9 l3.1,-1.3 6.3,0.6 4.4,-1.6 2.1,-2.1 2.9,-0.6 1.8,-0.8 2.7,0.2 1.6,1.3 1,-0.3 2.3,-2.7 3.1,-1 3.4,-0.6 1.3,-0.3 0.6,0.5 h0.8 l1.3,-3.7 4,-1.5 1.9,-3.7 2.3,-4.5 1.6,-1.5 0.3,-2.6 -1.6,1.3 -3.4,0.6 -0.6,-2.4 -1.3,-0.3 -1,1 -0.2,2.9 -1.5,-0.2 -1.5,-5.8 -1.3,1.3 -1.1,-0.5 -0.3,-1.9 -4,0.2 -2.1,1.1 -2.6,-0.3 1.5,-1.5 0.5,-2.6 -0.6,-1.9 1.5,-1 1.3,-0.2 -0.6,-1.8 v-4.4 l-1,-1 -0.8,1.5 h-6.1 l-1.5,-1.3 -0.6,-3.9 -2.1,-3.6 v-1 l2.1,-0.8 0.2,-2.1 1.1,-1.1 -0.8,-0.5 -1.3,0.5 -1.1,-2.7 1,-5 4.5,-3.2 2.6,-1.6 1.9,-3.7 2.7,-1.3 2.6,1.1 0.3,2.4 2.4,-0.3 3.2,-2.4 1.6,0.6 1,0.6 2.3,-1.5 4.7,0.3 1.9,-1.5 -0.2,-2.9 2.3,-2.7 v-3.2 l-0.8,-6.1 -1.8,-0.6 -3.4,-0.2 -1.9,0.6 -1.3,2.1 h-1.1 l-0.2,-2.9 -4,-0.5 -3.2,0.6 -3.1,-2.6 -1,-2.4 -3.1,-0.5 -2.3,-3.7 1.5,-4.4 v-0.8 l-2.9,-1 -0.6,0.8 -0.8,3.2 -1.1,-1 -0.6,-3.6 0.6,-1.6 2.1,-1.8 0.2,-2.9 -0.8,-2.3 1.1,-0.5 1.6,1.3 3.2,0.3 0.6,-1.6 0.5,-2.6 2.7,-1.1 1.5,0.5 h3.2 l0.8,-1 0.2,-5 1.5,-3.2 4.4,-1.6 1.1,-3.1 -0.8,-2.4 1,-2.9 3.4,-0.2 3.7,1.3 2.4,1.8 2.6,1.1 3.2,-1.5 2.1,0.5 v1.3 l1.5,1.9 2.1,-0.2 2.3,-1 1.1,0.6 0.8,2.6 0.8,0.2 1.9,-1.9 3.6,0.3 1.6,1.5 0.3,2.3 2.7,0.5 4.4,-0.5 2.1,1.8 1.6,0.2 0.6,-0.8 3.2,2.3 0.5,4.2 1.6,1 1.5,-0.6 0.8,-2.4 1.8,0.3 2.4,2.7 4,1.3 2.1,1.9 -0.5,1.1 -0.2,3.4 -2.1,1.3 -0.8,-0.8 -2.4,0.5 0,1.8 1.3,1 1.3,-0.5 0.6,0.6 -0.6,2.1 h1.3 l1.6,-2.4 2.6,0.2 0.8,0.5 1.8,-2.1 0.3,1.6 2.7,0.6 1.1,1.6 3.7,-0.3 2.9,2.6 v1.3 l0.8,0.5 2.3,0 2.9,1.9 z m-51.4,2.9 l1.6,1.9 -0.2,1.6 -2.1,0.3 -1.8,-1.5 -0.2,-1.6 z m-6,0.8 l0.8,2.3 -1.8,0.5 -0.6,-2.3 z m-22.9,6.3 l2.3,0.6 0.2,0.8 -1.6,1.5 -1.5,-0.5 -0.8,-1.6 z" },
  AZ: { name: "Arizona", path: "M135.1,389.7 l-0.3,1.5 0.5,1 27.8,15.9 18.6,10.9 13.5,7.8 20.2,11.2 16.1,-26.3 20.7,-35.3 13.7,-23.8 13.5,-24.6 -25.2,2.7 -38.3,4.3 -24,-3.2 -1.3,10.8 -0.8,1 0,2.6 -2.7,5 -1.1,6.9 -1.8,1.1 -0.5,2.3 0.6,1.9 -0.8,3.9 -2.7,2.1 -0.2,2.1 -1,0.3 -2.1,-2.7 -1.9,-0.5 -0.6,0.2 -0.5,3.2 -5.7,3.4 -2.3,0.5 -1.5,1.9 -4,0.6 -1.1,0.5 -3.9,-0.6 -1.3,-1.5 -2.3,0.5 -1,2.7 -3.4,1.3 -1.5,2.7 -1.9,1 -1,2.4 -2.3,0.6 -1.8,-7.4 -1.5,-0.5" },
  AR: { name: "Arkansas", path: "M582.4,381.8 l-2.1,-12.5 -1.3,-16.2 -0.6,-13.5 -46,1.9 -42.7,1.3 1,10.4 0.3,5.5 -3.2,4.5 1.6,3.2 3.9,2.1 0.3,4.8 -3.6,5.8 4.8,0.2 2.3,1.5 -0.5,6.1 -2.9,4 -0.2,2.6 2.1,3.4 48.9,-0.6 30.7,-1.5 2.4,-3.9 1.9,-1.3 0.8,-4.5 3.9,-5.2 0.5,-3.1 1.5,-2.3 -1.8,-0.5 0,-4.2" },
  CA: { name: "California", path: "M122.7,385.9 l-19.7,-2.7 -10,-1.5 -16.7,-2.4 -2.9,-0.3 -1,3.4 1.9,3.5 2.1,5.3 3.4,4.7 1.3,4.5 0.5,2.4 2.3,3.4 2.3,5.5 2.6,3.2 1.5,3.2 0.5,4.7 -0.3,5.5 -1.3,1.8 0.2,2.7 -1.5,3.2 -0.6,7.6 -1,1.6 0.5,5.2 1.8,4.8 2.4,4.7 1.5,1.3 0.2,3.2 -1.5,3.9 -0.3,2.6 1.3,2.7 -0.5,3.4 -1.5,5 -1.5,2.7 0.5,2.4 -2.3,3.1 -2.6,7.9 -3.1,5 -1.6,2.4 0.5,1.3 5,0 12.7,1 14.5,1.8 17.1,2.1 1.5,-0.5 0.3,-1.5 -0.8,-1 0.2,-3.6 3.4,-5.5 2.9,-3.2 0.2,-1.9 -1.9,-2.4 -1,-3.6 1.5,-2.3 -0.3,-2.7 1.6,-2.6 0.3,-3.4 3.4,-4.4 0.5,-3.7 2.4,-3.7 1.6,-1.5 0.2,-2.3 1.5,-3.2 2.1,-1.6 2.1,-6 1,-4.8 1.8,-3.1 -0.2,-3.2 -1.6,-3.2 -1,-5.3 0,-4.7 -1.5,-5.5 1.1,-5.3 -0.8,-5.8 -0.8,-2.9 2.7,-5.8 0.3,-2.4 -0.8,-2.4 -0.3,-5.3 2.7,-4 1.8,-3.6 2.6,-2.7 v-2.7 l-2.1,-2.7 0.6,-1.9 -4.2,-6.9 -4,-3.6 -0.8,-2.9 -0.8,-5.3 -3.1,-5.2 -2.4,-5.5 -2.4,-0.3 -2.6,-3.4 -5.3,-5.3 -1.6,-3.9 -0.6,-3.2 -3.4,-4.7 -2.7,-4.2 -1.8,-3.7 z" },
  CO: { name: "Colorado", path: "M380.2,235.5 l-36,-3.5 -79.1,-8.6 -6.3,66.7 78.5,8.3 47.9,3.7 z" },
  CT: { name: "Connecticut", path: "M852,190.9 l3.6,-3.2 1.9,-2.1 0.6,-3.4 -0.3,-4 -0.8,-5.8 -27.9,6.5 -1.6,5.7 0.6,5.5 0.3,8.4 8.1,-2.4 9.4,-2.6 z" },
  DE: { name: "Delaware", path: "M834.4,247.2 l-1,0.5 -3.6,-2.4 -2.1,-5.3 0,-5.8 1.3,-4.4 -1.9,-0.5 -3.7,2.4 -1.8,4.5 1.6,4.4 1.5,2.4 -0.3,3.7 4.7,10.6 9.4,-2.7 z" },
  FL: { name: "Florida", path: "M703.8,475.7 l-3.1,-0.3 -2.1,-1.8 -3.2,-4 -4.7,-2.6 -2.1,-4.4 -2.3,0 -0.5,1.3 -4,-0.8 -1.3,-2.3 0.8,-2.7 1.1,0.8 1,-2.6 -3.4,-2.6 -2.6,0.3 -2.3,-3.1 -3.6,-2.4 -3.7,-0.2 -2.6,1.1 -3.4,-4.5 -0.5,-7.1 -1.5,-2.4 0.6,-3.2 -0.6,-2.9 -60,5.7 -7.3,0.6 -0.3,4.2 2.4,1 2.1,3.1 5.8,1.3 3.6,2.7 7.9,2.3 3.4,2.9 8.6,0.8 3.2,1.9 3.1,4.7 5.2,1.5 6.3,3.9 4,1.8 2.4,3.9 1.1,3.2 4.4,3.6 0.6,3.4 3.1,6.8 2.6,1.3 0.2,1.9 3.2,3.6 0.8,3.4 0.6,3.7 -0.5,3.6 1.3,4.2 1,1.5 -0.3,5 2.3,5 1.8,0.8 -0.6,2.1 1,2.6 0.3,2.4 -1.3,3.6 0.6,0.8 1.1,-1 3.1,-6 1.5,-3.9 0.5,-5.3 2.4,-4.2 -0.5,-2.3 -2.1,-1 0.2,-2.1 3.4,-4 2.7,-5.7 1.5,-5.7 2.9,-5.3 0.8,-3.9 0.5,-3.2 -0.5,-3.9 0.6,-3.2 2.3,-2.9" },
  GA: { name: "Georgia", path: "M699.5,389.2 l-4.5,0.8 -14.3,1.9 -23.9,2.9 -3.6,0.3 0.3,4.4 1.8,10.9 2.3,12.7 1.6,12.6 1.9,7.9 2.9,9.4 2.1,8.1 7.3,-0.6 60,-5.7 0.6,2.9 1.5,2.4 0.5,7.1 3.4,4.5 2.6,-1.1 3.7,0.2 3.6,2.4 2.3,3.1 -0.3,-4.2 -2.6,-7.3 -2.1,-9.2 -3.7,-10.5 0.2,-4.8 -2.1,-4.2 -1.6,-5.2 -2.4,-2.4 -1.1,-3.2 0.2,-3.4 -0.3,-2.7 -2.3,-6 -3.4,-3.1 -2.7,-3.4 -1.9,-4.7 -1.9,-2.4 0,-2.4 -2.4,-0.5 -1.8,-4 -3.7,-5.3 -0.5,-2.4 -3.2,-3.2 -2.6,-5" },
  HI: { name: "Hawaii", path: "M233.1,519.3 l1.9,-3.6 0.8,-0.3 0.3,-1.8 -0.5,-1.8 -2.4,-1 -1.6,1.3 -1.5,3.2 1,2.6 z m21.8,-7.6 l4.4,-2.4 0.8,-1.5 0.3,-2.4 -3.4,-1.9 -3.1,0.6 -2.6,1.8 -0.5,2.4 1.3,3.1 z m8.6,-9.4 l1.9,2.7 2.1,-0.2 1.1,-1.5 0.3,-3.9 -1.8,-2.1 -2.3,-0.2 -1.8,1.8 z m15.5,-14.7 l1.1,4.2 2.4,1.5 2.9,-1.3 3.4,-1.9 0.5,-1.5 -0.6,-2.1 -3.2,-1.8 -4.2,0.2 z m19.5,-13.7 l-1.8,3.4 0.6,2.9 2.3,0.2 3.2,-0.8 3.6,-2.4 4.8,-2.3 0.3,-1.6 -1.9,-2.3 -3.9,-0.6 -3.4,1 z m24.3,-8.4 l-0.8,4.4 1,3.6 2.6,0.2 2.1,-1.8 2.6,-4.8 -0.2,-2.9 -1.5,-1.8 -2.9,-0.3 z" },
  ID: { name: "Idaho", path: "M175.1,105.9 l-2.9,0.2 -1.1,1.5 0.3,1.3 -0.8,0.8 0.2,1.9 -1.9,2.7 0.5,1.3 -1.3,2.4 1.6,2.6 1,3.4 3.2,3.2 0.3,1.6 -2.3,4.2 0.5,1.5 -0.8,3.2 -5.3,7.6 -0.3,2.4 -0.8,0.8 0.6,6.3 -2.4,3.9 0.6,2.1 2.4,2.3 0.8,3.1 -0.8,4.8 -3.6,2.4 -1.9,3.7 0,2.3 -6.5,14.2 -0.3,1.8 1.5,4.4 -1,4.5 2.3,6.3 3.9,-0.2 1.8,1.3 0.5,1 -0.5,1.3 -3.6,3.2 -0.5,3.1 0.3,1.8 24,3.2 38.3,-4.3 -7.2,-49.7 -7.8,-50.5 -27.9,-3.7 -0.3,1.9 1.8,3.4 -0.8,2.3 -1.6,-0.3 -2.4,-2.4 -2.1,-0.6 -2.3,1.6" },
  IL: { name: "Illinois", path: "M582.4,224.9 l-0.5,-9.5 -1,-6.6 -1.3,-3.1 1.5,-3.4 2.1,-2.3 0.5,-5.8 -1.9,-2.7 -0.8,-3.7 -3.9,-4.7 -43.9,3.4 0,4.2 -1.3,3.2 -0.2,2.4 1.5,2.1 0.3,3.6 -0.8,6.1 -2.1,4.4 -0.6,4 1.3,6.8 2.6,5.2 8.1,10.3 -0.2,7.9 -1.8,4.4 -0.8,8.2 0.8,5 1.5,2.7 -0.3,8.2 -0.8,1.9 -0.8,0.8 0.2,1.6 3.1,2.9 5.8,1.3 2.9,-3.9 2.4,-0.6 5.2,2.3 3.4,-1.3 1,-3.6 2.4,-2.1 2.1,-0.5 0.6,-3.2 3.7,-3.6 2.1,-0.5 0.8,-3.4 -1,-2.1 1.6,-4.4 0.5,-3.6 -0.5,-3.7 -1.8,-4.4 -2.9,-1.6 -1.5,-3.7 2.9,-5.8 1.9,-0.6 1.6,-4.4 0.5,-4.7 3.1,-3.6" },
  IN: { name: "Indiana", path: "M619.7,246.9 l-1.1,-21.6 -1.1,-14.3 -36.6,3.2 -0.2,11.8 -3.1,3.6 -0.5,4.7 -1.6,4.4 -1.9,0.6 -2.9,5.8 1.5,3.7 2.9,1.6 1.8,4.4 0.5,3.7 -0.5,3.6 -1.6,4.4 1,2.1 -0.8,3.4 -2.1,0.5 -3.7,3.6 -0.6,3.2 3.7,-0.2 5.2,-3.1 2.3,0.3 0.6,4.5 1.5,0.6 2.4,-1.5 5,-0.2 1.6,1.3 2.1,-2.4 4.5,-1 3.2,1 1.8,-0.8 1,-3.2 3.2,-3.9 5.5,-2.6 1.8,-3.1 0.8,-7.6 2.3,-3.9" },
  IA: { name: "Iowa", path: "M523.3,199.8 l2.7,-4.2 0.2,-4.7 -1.8,-3.1 -0.6,-3.2 0.5,-2.4 -2.7,-4 -2.3,-4.5 -60.7,2.9 -31.5,1 0.3,4.8 1.8,2.4 2.6,1.3 0.5,3.1 3.2,4.7 0.8,2.9 -2.1,5 -0.3,2.7 2.3,4.4 2.9,1.6 0.6,1.9 -0.8,3.6 -1.5,1.9 0.3,1.8 1.3,1.5 4.5,1.5 5.3,-2.6 2.3,0.5 1.9,2.3 2.9,0.8 4.2,-1.6 2.4,0.8 1.6,3.2 2.6,1.6 3.1,-0.3 3.4,-2.4 1.6,0.3 0.6,-1.9 43.9,-3.4" },
  KS: { name: "Kansas", path: "M485.7,296.2 l-78.5,-2.1 -66.6,-3.4 -0.6,37.8 1.6,22.7 64,1 68.4,-0.5 10,-0.3 0,-4.4 -1.6,-2.7 0.3,-3.4 1.5,-1.1 0.5,-4 0.6,-2.6 -2.4,-3.6 -0.3,-2.4 0.8,-3.1 -0.5,-4.7 -1.9,-3.4 0.5,-3.4 1,-2.4 0.6,-3.1 2.6,-2.1" },
  KY: { name: "Kentucky", path: "M685.5,313.7 l-6,4.5 -3.4,3.9 -5.7,2.6 -2.7,-1.8 -4.5,3.1 -2.4,-0.3 -3.2,1.5 -1.6,3.2 -4,0.3 -1.6,2.9 -2.9,-0.5 -2.7,2.4 -40.3,3.2 -24.7,2.3 -0.3,-3.2 -2.9,-0.6 -2.6,0.6 -2.3,2.9 -1.6,-0.6 0.2,-2.3 -2.6,-1.5 -4.7,-0.3 -2.1,-1.8 1.8,-3.9 -2.7,-1.8 -5.3,-0.8 -2.6,4.5 -0.3,1.8 -2.3,0.3 -1.5,3.2 2.6,2.4 -0.5,1.5 -4.2,0.5 -1.5,-0.6 1.8,4 5.5,0.3 1.6,2.4 2.9,-0.3 2.1,2.6 2.6,0.3 0.8,-1.3 2.4,1.3 -0.8,3 2.9,0.6 1.9,3.2 4.5,-2.4 2.6,0.2 2.1,2.1 1.8,-0.6 2.4,-2.6 2.1,0.3 24.5,-2.7 29,-3.4 15.8,-2.1 19.2,-2.4 1,2.3 3.6,0.8 1.1,-1.9 2.9,0.2 0.5,-2.4 2.3,-1.8 1.9,0.3 1.1,-1.5 -0.8,-1.9 2.9,-4.2 2.6,-1.1 0.2,-3.2 0.8,-1.5 -1.3,-2.1 2.7,-5.3" },
  LA: { name: "Louisiana", path: "M597.1,472.4 l-1,-9.7 -1.8,-5 -2.3,-3.7 -0.5,-5 -26.5,0.5 -27.6,0.3 0,8.6 1.3,5.5 4,6.5 1.3,3.7 -1.9,3.2 -2.3,-0.5 -0.5,-2.1 -2.7,-3.9 -2.9,-0.8 -1.8,1.3 0.3,3.2 -2.4,1.6 -0.8,2.4 4,5.8 1,7.1 -0.8,3.7 -1,6.5 2.4,3.4 6.5,1.8 10.6,1.3 -0.3,-2.7 1.3,-0.6 0.5,1.1 4.2,0.6 1.1,1.9 -1.5,5.3 6,-3.4 4.5,-0.5 3.4,1.9 2.9,0.2 2.6,-1.5 1.9,3.1 1.5,-0.5 0.2,-3.7 1.6,-1.5 3.1,0.6 -0.5,1.6 -2.1,0.6 -0.2,2.3 2.4,1.5 1,2.6 6.3,0.3 1,-2.1 -2.4,-0.5 -1.5,-3.4 0.8,-1.6 -0.3,-1.5 -1.5,-0.6 0.5,-2.6 -0.8,-3.1 -2.3,-2.1 0.5,-2.4 -1.6,-1 2.7,-3.6 3.6,-0.2 1.3,-4 0.8,-2.9 -0.8,-3.1 2.1,-0.6 -0.5,-2.4 3.9,-0.3" },
  ME: { name: "Maine", path: "M880.8,95.7 l1.5,-1.8 1.9,-3.1 -0.8,-4 -3.4,-1.9 0.6,-3.9 -1.6,-5 -1.6,0.2 -1.6,3.2 -0.3,3.6 1.6,4.7 -1.1,3.1 z m-28.7,21.8 l1.3,-2.3 -1.1,-1.6 0.2,-3.6 -1.9,-0.3 -0.6,-8.4 -2.7,-5.3 -1.5,-5.3 0.8,-2.3 -1.5,-2.6 -1.9,-8.4 -2.6,0.3 -3.1,2.4 0.3,2.4 0.8,0.3 0.3,5.8 2.3,3.1 0.5,7.6 4.7,9.2 0.5,3.1 -2.6,1.3 -0.8,1.6 0.5,2.9 2.9,3.9 0.3,1.5 z m0.3,4.7 l1.9,-1.9 -0.5,-1.5 -1.3,0 -1.1,2.3 z m2.9,-5 l1.6,-0.8 -0.5,-1.5 -1,0.2 0,1.9 z m-32.7,-4.2 l1.5,-1.1 2.4,2.1 4.8,0.5 0.5,-4.8 1.6,-0.8 0.5,-2.4 -1.5,-3.4 -0.3,-5.5 0.8,-1.5 -0.6,-4.2 -2.6,-7 -2.7,-1.3 -1.1,0.6 -3.2,2.6 -0.3,1.8 -2.9,-0.2 -1.1,1 1.3,1.6 0.6,4 -1.1,5.3 -1.9,2.9 -0.3,3.9 0.8,1.5 -0.6,2.3 1.3,1.3 z m3.2,2.6 l0.6,-1.6 1.1,0.3 0.2,1.9 z m-3.2,0.8 l1.5,-0.8 0.5,1 -1.3,1.3 z m-7.4,-41.1 l1.6,-0.3 1,-1.8 1.6,0.8 1.3,3.4 1.5,1.3 2.1,-1.8 2.3,-5.5 3.4,-7.4 1.9,-7.6 -2.3,-1.5 0.3,-3.9 3.4,-5 2.1,-5 -0.3,-2.4 -1.8,0.3 -3.2,3.4 -1.6,4.7 -4.4,1.3 -1.9,2.4 -1.6,4.4 -0.3,3.9 0.6,0.6 -1,2.4 -4,2.6 -2.4,5.5 -0.5,4.8 2.1,0.8 z" },
  MD: { name: "Maryland", path: "M833.1,250.5 l-9.4,2.7 -4.7,-10.6 -4.5,-1.3 -9.4,2.6 -17.5,3.9 -40,8.2 0.8,4.8 -1.1,2.1 1.3,2.4 1.9,0.3 1.3,2.3 -2.1,0 -1.6,-0.5 -2.3,3.4 2.3,0.5 1.9,2.9 2.7,-0.8 1.5,-3.2 1.5,-0.8 1.9,0.5 2.4,-0.2 2.3,4.8 6.5,1.1 2.9,2.3 2.1,3.4 5.5,3.4 3.7,-0.2 2.3,-3.4 -0.6,-2.6 -2.9,-1 0.2,-4.5 -0.8,-3.2 -1.9,-0.8 -1.1,-2.7 0.6,-0.8 0.3,-3.1 -1.9,-2.6 1,-1.6 -1.3,-0.8 1.6,-3.1 3.1,2.6 4,0.3 3.2,1.6 2.7,2.3 1.8,-0.3 8.1,2.9 4.7,0.5 0.5,-1.1 2.6,0.6 0.5,-2.3 -2.3,-1.5 -0.6,-1.5 -2.1,-1.3 -1.5,-2.9 1.1,-6.3 2.6,0.3 0.2,-3.2" },
  MA: { name: "Massachusetts", path: "M880.3,168 l0.2,-2.4 -1.9,-0.2 -0.2,-2.1 -2.4,0.6 1.5,2.6 z m-10.6,2.6 l2.6,-1.1 0.5,-1.1 -2.9,-0.2 -1.5,1 z m-24.3,9.4 l-0.3,-4 -0.8,-5.8 -28.2,7.1 0.3,5.3 -2.1,1.8 1.6,1.9 2.7,0 2.9,-2.1 5.8,0.3 3.9,-1 3.6,3.2 3.6,-0.6 3.4,-3.4 1.6,0 0.8,-1.1 z m12.9,-9.4 l2.3,1.5 1.9,-1.8 -1,-2.1 0.5,-2.1 2.1,1.6 2.4,-1.5 0.5,-2.1 -4,-0.5 -2.4,2.4 -3.2,0.8 z" },
  MI: { name: "Michigan", path: "M581.7,118.9 l2.1,-3.9 2.7,-2.6 2.4,-0.3 0.6,-2.3 3.4,-1.5 1.1,0.8 -0.3,2.4 1.5,2.7 1.8,1 0.8,-0.5 3.1,-3.1 1.6,0.2 0.8,-1.5 0.2,-3.1 3.6,-0.3 0.6,-4 -1.3,-0.5 -1.5,1.5 -1.8,0.2 -1.9,-1.1 0,-2.3 1.5,-2.3 0.6,-3.9 1.6,-1.1 2.1,-4 -0.2,-3.4 -1.8,-0.2 -4.4,2.4 -2.4,-0.8 -2.9,2.4 -2.4,-0.5 -1.9,0.5 -2.1,2.4 -3.7,2.3 0,-1 3.1,-3.2 1.9,-4.5 -0.5,-1.5 -1.1,1.5 -3.9,1.8 -0.5,1.3 -1.8,-0.8 1,-1.6 2.9,-2.4 1.1,-2.6 0,-2.7 -1.3,-2.1 -1.3,0.8 -0.3,3.4 -1.5,0.6 -0.8,-3.4 -1.3,-1.6 -0.5,0.5 -0.6,3.9 -1.9,0.3 0.5,-4.4 -0.5,-2.4 -1.8,1.1 -1.8,3.6 -0.5,5.2 0.8,3.4 -0.5,2.7 -2.1,1.1 -0.6,2.4 -1.5,-0.3 -1.3,1.8 -0.5,-1 0.8,-3.1 1,-1.8 -0.3,-3.7 0.6,-1.1 -0.6,-1.9 -1.6,-0.6 -0.6,0.5 -1.5,5.3 -2.6,3.9 0.2,1.5 -2.1,1.5 0.3,0.5 2.1,0.8 1.5,2.4 -0.2,4.7 -1.5,3.6 -0.3,4.4 0.8,4 0.2,6 -1.5,1.8 0.6,2.4 -0.5,2.4 0.8,2.3 0.2,3.4 2.6,4.7 2.6,5.2 3.9,2.6 0.8,-0.2 6.8,-5.5 2.4,-1.3 z m-10,41.3 l1,-2.9 2.4,-2.9 2.4,-1.3 0.5,-2.7 1.8,-2.7 -0.5,-5.8 -1.6,-4.2 -1.1,-0.5 -0.3,-2.4 -2.3,-0.6 -1.5,0.5 -1.5,2.1 -2.1,0.2 -0.2,0.8 -3.4,0.8 -2.6,1.8 -2.7,-0.5 -3.4,0.5 -5.5,2.9 -5.8,1.9 -1.6,4 0,3.1 3.2,1.3 1.9,0.3 0.8,1.3 4.4,-0.2 3.1,-1.3 1.8,-1.9 0.6,0.5 0.3,3.4 2.7,0.8 1.5,-0.6 2.7,1.1 1.8,1.1 z" },
  MN: { name: "Minnesota", path: "M521.4,95.7 l0.2,-10.9 -1.6,-7.6 -2.3,-9.7 -1.6,-3.4 -2.4,-1.8 -0.2,-5.3 -1.6,-4.5 -0.3,-8.1 -38.7,0.3 0,17.9 0.6,47.7 2.1,1.3 5.2,0.2 1.5,3.4 7.1,0.2 0.3,-1.9 8.4,0 0.5,2.4 2.4,1.1 3.4,-3.2 1.8,2.1 4.2,0.5 0.2,5.2 1,0.3 2.6,-1.6 1.3,0.8 -0.2,7.1 0.6,1.6 3.4,1.5 4.7,0.6 0.6,8.9 1.8,0 1.5,-1.6 1.3,-0.3 3.6,2.3 4.2,0.8 1,2.6 2.3,0.2 1,-1 0.6,-5.2 2.1,-2.3 -0.6,-10.9 -1.5,-3.9 -3.4,-5.5 -0.6,-5.5 0.6,-3.4 2.6,-3.6 0,-8.7" },
  MS: { name: "Mississippi", path: "M597.1,472.4 l-3.9,0.3 0.5,2.4 -2.1,0.6 0.8,3.1 -0.8,2.9 -1.3,4 -3.6,0.2 -2.7,3.6 1.6,1 -0.5,2.4 2.3,2.1 0.8,3.1 -0.5,2.6 1.5,0.6 0.3,1.5 -0.8,1.6 1.5,3.4 2.4,0.5 -1,2.1 19.4,-1.3 18.9,-1.6 0.6,-11.3 0.8,-17.1 1.5,-14.5 -0.8,-4.5 -2.3,-3 -0.5,-5 -26.5,0.5 -27.6,0.3 0,8.6 1.3,5.5 4,6.5 1.3,3.7 -1.9,3.2 -2.3,-0.5 -0.5,-2.1 -2.7,-3.9 -2.9,-0.8 -1.8,1.3 0.3,3.2 -2.4,1.6 -0.8,2.4 4,5.8 1,7.1 -0.8,3.7 -1,6.5" },
  MO: { name: "Missouri", path: "M582.4,292.5 l-2.6,2.1 -0.6,3.1 -1,2.4 -0.5,3.4 1.9,3.4 0.5,4.7 -0.8,3.1 0.3,2.4 2.4,3.6 -0.6,2.6 -0.5,4 -1.5,1.1 -0.3,3.4 1.6,2.7 0,4.4 1.3,16.2 2.1,12.5 48.9,-0.6 30.7,-1.5 0.3,-3.2 -2.9,-0.6 -2.6,0.6 -2.3,2.9 -1.6,-0.6 0.2,-2.3 -2.6,-1.5 -4.7,-0.3 -2.1,-1.8 1.8,-3.9 -2.7,-1.8 -5.3,-0.8 -2.6,4.5 -0.3,1.8 -2.3,0.3 -1.5,3.2 2.6,2.4 -0.5,1.5 -4.2,0.5 -1.5,-0.6 -1,-5.5 -3.1,-2.9 -0.2,-1.6 0.8,-0.8 0.8,-1.9 0.3,-8.2 -1.5,-2.7 -0.8,-5 0.8,-8.2 1.8,-4.4 0.2,-7.9 -8.1,-10.3 -2.6,-5.2 -1.3,-6.8 -10,0.3 -68.4,0.5 -64,-1 -1.3,7.4 1.6,3.4 4.4,2.9 4.4,2.4 4.2,0.6 2.1,1.8 0.6,3.9 4.5,4.2 2.1,5.5 5.2,5.2 -0.2,4.7 -2.3,2.4 -0.5,2.3 1.3,2.3 1.6,1.1 2.1,-0.6 42.7,-1.3" },
  MT: { name: "Montana", path: "M292.5,60.4 l-0.3,17.6 1.5,23.4 1.6,24.2 0.3,5.8 -55.3,-4.2 -54.8,-6.8 -27.9,-3.7 -7.8,50.5 26.1,4.5 23.9,3.4 0.5,-1.3 -0.5,-1 -1.8,-1.3 -3.9,0.2 -2.3,-6.3 1,-4.5 -1.5,-4.4 0.3,-1.8 6.5,-14.2 0,-2.3 1.9,-3.7 3.6,-2.4 0.8,-4.8 -0.8,-3.1 -2.4,-2.3 -0.6,-2.1 2.4,-3.9 -0.6,-6.3 0.8,-0.8 0.3,-2.4 5.3,-7.6 0.8,-3.2 -0.5,-1.5 2.3,-4.2 -0.3,-1.6 -3.2,-3.2 -1,-3.4 -1.6,-2.6 1.3,-2.4 -0.5,-1.3 1.9,-2.7 -0.2,-1.9 0.8,-0.8 -0.3,-1.3 1.1,-1.5 2.9,-0.2 2.3,-1.6 2.1,0.6 2.4,2.4 1.6,0.3 0.8,-2.3 -1.8,-3.4 0.3,-1.9 35.2,3.7 34.9,2.6 32.6,1.3" },
  NE: { name: "Nebraska", path: "M427.1,200.7 l-31.5,-1 -60.7,-2.9 -4.7,42.4 79.1,8.6 36,3.5 -0.5,-23.9 -2.1,-16 -15.6,-10.7" },
  NV: { name: "Nevada", path: "M140.3,297.2 l24,-3.2 -7.2,-49.7 -7.8,-50.5 -26.1,-4.5 -5.5,18 -7.1,26 -7.1,22.6 -5.8,21.8 -4.2,14.5 -5.2,17.4 -1.8,6.1 -1.1,4.7 12.4,17.4 5.2,7.6 12.4,17.6 2.7,4.4 1.3,2.3 13.5,7.8 1.5,-0.5 0.3,-1.5 -0.8,-1 0.2,-3.6 3.4,-5.5 2.9,-3.2 0.2,-1.9 -1.9,-2.4 -1,-3.6 1.5,-2.3 -0.3,-2.7 1.6,-2.6 0.3,-3.4 3.4,-4.4 0.5,-3.7 2.4,-3.7 1.6,-1.5 0.2,-2.3 1.5,-3.2 2.1,-1.6 2.1,-6 1,-4.8 1.8,-3.1 -0.2,-3.2 -1.6,-3.2 -1,-5.3 0,-4.7" },
  NH: { name: "New Hampshire", path: "M847.5,75.5 l0.6,-1.3 -1,-2.9 1.8,-3.9 -1.5,-5.2 -0.6,-3.2 -1,-4 -0.2,-2.6 -22.7,6.1 -1.1,5.2 0.8,3.2 -0.3,3.9 1.9,6.3 0.3,3.7 -0.3,4.7 0,8.4 1.1,4.4 -0.3,5.5 1.5,1 0.5,7.4 -0.3,3.7 -1.5,1.1 -0.3,1.3 0.5,2.6 3.6,1.1 14,-3.7 0.8,-3.6 1,-5.2 -0.5,-2.3 0.8,-4.7 -0.5,-5.8 0.8,-2.6 1.1,-14.5 z" },
  NJ: { name: "New Jersey", path: "M830.3,195 l-2.4,2.3 -1.5,3.9 1.6,1.5 -1.3,2.3 -1.1,4.4 -1.5,1.9 0.8,3.4 2.9,2.1 0.3,3.6 -1.8,0.3 -0.3,1.6 0.8,2.4 -0.5,4.4 3.1,4.4 4.5,4 3.6,5.5 3.4,3.7 2.3,1 1.5,-1 0.2,-3.9 -1.1,-2.6 -0.5,-2.1 1.9,-2.3 0.2,-3.4 -0.8,-3.9 -3.4,-4.2 -0.6,-5.2 1,-5.3 0,-5.7 -1.6,-1.5 z" },
  NM: { name: "New Mexico", path: "M281.2,437.1 l-13.5,-7.8 -1.3,-2.3 -2.7,-4.4 -12.4,-17.6 -5.2,-7.6 -12.4,-17.4 1.1,-4.7 -33.7,3.4 -6.6,68.9 27.8,3.4 57.3,6.5 1.3,-10.8 z" },
  NY: { name: "New York", path: "M830.3,163.9 l0.5,-2.1 -3.7,-2.9 -3.6,-0.3 -3.4,1.5 -3.1,-2.6 -25.3,5.7 -45.5,10.3 2.3,7.6 -1.3,1.6 -0.5,2.3 1.5,3.7 -1.9,3.2 2.9,5.5 2.4,0.6 4.2,-3.9 2.9,-1.1 4,-0.3 5.3,-1.8 3.9,0.2 8.2,-3.7 7.4,-0.2 1.5,-1.3 3.7,-0.3 1.9,-3.4 3.1,-1.8 2.3,-3.1 2.3,-0.5 1.9,1.1 1.3,-1.3 4.8,0.3 1,-2.4 4.7,-5.3 2.1,-1.5 2.3,-3.6 z m12.1,-4.4 l3.4,-3.4 2.1,0.8 2.1,-2.3 0.3,-4.4 -1,-0.6 -3.1,1.3 -1,2.4 -3.6,1 z" },
  NC: { name: "North Carolina", path: "M825.5,337.9 l-3.6,-0.5 -3.6,3.2 -1.8,-0.6 -5,4 -6.1,0.5 -5.2,-2.1 -3.7,3.2 -3.4,0.2 -2.7,3.2 -1,3.4 -2.3,-0.5 -3.1,2.1 -0.6,-2.4 -3.7,0.2 -1.9,-0.8 -4.4,3.1 -6.5,7.9 -28.4,3.7 -22.3,1.5 -31.5,4.2 -5.5,-0.6 2.6,-3.2 1.3,-4.8 3.1,-3.1 0.6,-2.7 3.1,-2.4 2.9,-4 3.6,-2.1 2.7,-0.2 0.8,-1.1 2.6,-0.2 1,-1.9 7.9,-3.4 4.4,0.2 1.1,-1 4.2,0.5 2.4,-2.3 5.7,-1.3 5.7,1.3 5.8,-3.6 2.3,0.3 2.4,-1.8 4.4,0.5 4.5,-2.3 5.2,-1 7.1,3.4 2.9,-1.5 4,-3.9 5.7,0.2 3.9,1.5 2.3,1.9 1.6,-0.3 2.1,-3.1 2.3,-1.5 0.8,0.3 z" },
  ND: { name: "North Dakota", path: "M417.7,53.6 l0.3,5.3 1,15.6 0.6,24.4 0.2,6.5 -55.3,-4.2 -54.8,-6.8 -16.4,-2.4 0,-0.5 -1.5,-23.4 0.3,-17.6 48.7,1.8 38.7,-0.3 38.2,-2.4 z" },
  OH: { name: "Ohio", path: "M693.5,231.7 l-2.9,3.9 -2.4,5.5 -3.2,2.1 -3.2,5 -4.4,5.5 -4.7,2.3 -4.7,0.6 -3.4,-1.6 -2.4,1.5 -2.4,3.4 -4.2,-2.4 -3.6,-0.6 -2.3,-1.8 -2.3,3.9 -0.8,7.6 -1.8,3.1 -5.5,2.6 -3.2,3.9 -1,3.2 -1.8,0.8 1.5,3.7 5.3,1.5 1.1,1.3 0.8,2.7 1.9,1.5 0.5,2.7 5.2,5 3.7,0.3 3.1,-2.6 2.4,0.5 0.5,1.6 1.9,0.2 2.7,2.7 4.2,0.5 1.9,-0.6 1.1,2.1 2.1,0.5 3.2,-2.4 3.6,1.8 3.1,-4 2.6,0.2 1,1.5 0.6,0 2.6,-3.2 4.4,-1 2.1,2.1 2.1,-0.8 0.3,-2.4 2.1,-2.1 1,-3.2 1.6,-0.8 0.2,-1.9 -1.5,-3.6 2.9,-5.3 1.8,-8.4 0.6,-9.5 1.9,-2.6 -0.6,-4.2 2.7,-5.3 z" },
  OK: { name: "Oklahoma", path: "M340.6,350.7 l-1.6,-22.7 0.6,-37.8 -30.7,0.5 -1.9,2.3 0.2,2.9 -1.8,2.6 -0.3,1.5 2.1,2.4 -2.3,2.4 -2.7,-0.3 -0.8,2.4 1,1.8 -0.5,2.1 -1.3,0.6 -0.6,-1.1 -2.1,-0.2 -2.1,2.6 -0.8,-2.4 -2.3,-0.6 -1.5,2.4 0.5,2.6 -2.4,-0.2 -2.3,-2.1 -0.3,-4 -1.3,0.8 -1.6,2.9 -3.7,-1.3 -1.1,-3.2 -2.3,-0.8 -2.1,0.5 -0.5,2.1 -2.1,-1.5 -3.4,0.8 0,2.9 -2.7,-1.5 -2.3,1 -0.6,-3.2 -1.1,-0.3 -2.6,1.5 -0.3,2.6 -1.3,-1.6 -1.6,0.5 -1.1,3.7 -2.9,-0.5 -2.6,2.3 -0.3,-2.7 -1.9,-2.3 -1.1,0.6 0.2,3.2 -3.9,0.8 -3.9,-2.3 -3.7,1.6 1.5,6.9 0.8,4.8 2.1,5.7 1.6,5 1.6,7.4 1,4.7 2.9,5.5 0.5,3.4 1.6,5.2 57.3,0.5 57.7,-1.8 0.2,-6.1" },
  OR: { name: "Oregon", path: "M86.7,156.5 l-4.8,-1 -9.3,-0.6 -6.8,-3.2 -3.4,0.6 -1.8,-1.6 -1.6,0.5 -1.1,2.4 1.3,3.6 -1.6,3.9 0.2,2.7 5,6.5 1.1,2.6 0.2,2.1 3.1,3.9 3.2,0.8 0.5,3.6 4.2,0.3 3.2,3.4 0.5,3.1 -3.7,5.5 -0.2,4.7 1.6,3.1 0.6,6.3 -0.6,4.8 -3.9,5.5 -1.5,5.5 4.2,0.8 6.8,0.6 26.1,4.5 23.9,3.4 5.5,-18 7.1,-26 7.1,-22.6 5.8,-21.8 -19.5,-5.3 -19,-6.3 -5.2,0.8 -2.6,-1.6 -5.8,0.5 -3.4,0.3 -2.1,3.2 -3.4,5 z" },
  PA: { name: "Pennsylvania", path: "M830.3,195 l-1.1,-9.2 -1,-7.9 -45.5,10.3 -25.3,5.7 -2.4,2.1 1.3,4.5 1.5,3.4 2.6,1 0.8,4.4 4.7,5.3 4.2,-0.3 1.9,-2.1 2.1,0.8 4.4,-0.6 4.4,3.1 2.7,-0.3 1.8,-3.1 2.3,0.8 1.6,3.1 2.4,-2.1 4,1.8 3.7,-2.9 4.5,2.1 4.7,-3.4 2.6,0.5 3.4,-2.9 2.4,1.1 0.8,1.5 3.2,-1.6 2.3,1.1 1.5,-1.9 1.1,-4.4 1.3,-2.3 -1.6,-1.5 1.5,-3.9 z" },
  RI: { name: "Rhode Island", path: "M857.6,178 l-1,-7.1 -7.1,1.8 0.8,3.4 2.1,4.8 3.4,1 z" },
  SC: { name: "South Carolina", path: "M731.6,383 l-2.4,0.6 -2.9,-1 -2.7,1 -1.9,-0.3 -0.8,0.8 -1.9,-1.3 -3.1,0.3 -1.5,-1.5 -2.1,0.6 -2.4,-0.3 -2.1,1.8 -3.6,-1.5 -4.5,0.8 -14.3,1.9 2.6,5 3.2,3.2 0.5,2.4 3.7,5.3 1.8,4 2.4,0.5 0,2.4 1.9,2.4 1.9,4.7 2.7,3.4 3.4,3.1 0.3,2.7 -0.2,3.4 1.1,3.2 2.4,2.4 1.6,5.2 2.1,4.2 -0.2,4.8 0.3,4.2 2.6,-1.1 3.7,0.2 3.6,2.4 2.3,3.1 2.6,-0.3 3.4,2.6 -1,-2.6 -1.1,-0.8 0.8,-2.7 1.3,2.3 4,0.8 0.5,-1.3 2.3,0 2.1,4.4 4.7,2.6 3.2,4 2.1,1.8 3.1,0.3 2.4,-6.5 1.1,-8.6 6.1,-4.5 3.2,-3.9 3.9,-2.7 1.3,-4 1.3,-6.3 -5.5,-5.3 -8.1,-2.4 -4.5,-3.4 -5,-6 -6.5,-4.2 -5,-1.5" },
  SD: { name: "South Dakota", path: "M417.7,131.4 l-0.2,-6.5 -0.6,-24.4 -1,-15.6 -0.3,-5.3 -38.2,2.4 -55,-2.3 -29.1,-1.9 1.5,23.4 0,0.5 4.7,42.4 60.7,2.9 31.5,1 15.6,10.7 2.9,-3.6 -0.5,-3.4 3.6,-5.8 0.5,-5.3 1,-0.8 0.3,-5.8 2.6,-1.9 z" },
  TN: { name: "Tennessee", path: "M686.5,346.9 l-29,3.4 -24.5,2.7 -2.1,-0.3 -2.4,2.6 -1.8,0.6 -2.1,-2.1 -2.6,-0.2 -4.5,2.4 -6.8,-0.6 -9.7,0.8 -5.5,-0.6 -53.1,4 -1.5,5.5 -4.5,3.4 -0.8,4 1.8,0.5 53.1,-4 31.5,-4.2 22.3,-1.5 28.4,-3.7 6.5,-7.9 4.4,-3.1 1.9,0.8 3.7,-0.2 0.6,2.4 3.1,-2.1 2.3,0.5 1,-3.4 2.7,-3.2 3.4,-0.2 3.7,-3.2 5.2,2.1 6.1,-0.5 5,-4 1.8,0.6 3.6,-3.2 -1,-2.3 -19.2,2.4 -15.8,2.1" },
  TX: { name: "Texas", path: "M404,381.7 l-1.3,-7.4 -1.6,-7.4 -1.6,-5 -2.1,-5.7 -0.8,-4.8 -1.5,-6.9 30.7,-0.5 -0.2,6.1 -57.7,1.8 -57.3,-0.5 -1.6,-5.2 -0.5,-3.4 -2.9,-5.5 -1,-4.7 -6.6,68.9 2.9,0.5 1,1.9 0.2,3.9 1.3,0.5 -0.8,5.5 -1.9,5.2 -1.3,2.3 1.3,1.3 -0.6,1.8 -2.7,2.4 0.5,1.1 -1.1,4.4 -2.7,2.1 -1.6,0.2 -0.5,2.4 -5.7,4.2 -1.6,-0.5 -2.4,1.1 0.3,1.3 -2.1,3.7 -3.7,1.5 -1.3,3.9 -2.9,-0.5 -0.8,0.8 0.3,1.5 -3.2,0.8 -3.4,3.6 -0.5,2.7 -3.2,0.3 -3.7,3.7 -2.6,0 -2.4,1.3 -5,-3.9 -3.4,0.5 -3.9,2.6 0.2,2.4 -2.1,1.8 -1.5,4.2 -0.3,5.5 -2.1,5 0.8,3.2 -2.1,7.1 1,3.9 -0.6,3.2 -1,1.6 1,2.4 0.6,4.4 1.6,2.6 -0.3,1.8 1.8,3.1 2.4,2.3 2.3,0.2 0.6,1.3 1.3,0.2 2.1,-2.1 1.9,0.5 0.6,-1.5 2.6,0.5 1.9,3.1 2.9,1.5 2.6,0.2 1.6,3.1 1.9,0.3 0.6,-0.6 3.2,4.8 2.1,1 1,2.7 1.8,0.5 2.4,3.1 4,1.5 3.7,2.6 3.2,-0.2 0.6,2.1 1.8,0.2 2.1,2.4 2.1,0.8 0.5,1.3 0.8,0.2 0.8,3.4 3.1,0.6 1.9,2.7 1.3,0.3 1.1,2.1 2.4,0.2 1.5,1 3.4,-2.9 2.9,-1.5 2.6,-0.5 5.3,-3.4 6.5,-5.7 3.2,-1.1 5.3,-4.4 4.4,-2.4 4.2,-4.5 4.5,-2.7 0.6,-1.8 2.1,-1.1 0.3,-2.4 2.1,-3.2 3.1,-0.6 2.6,-2.1 1.8,-4.8 2.3,-3.6 3.2,-2.3 2.4,-6.3 5.2,-5 0.2,-4.7 3.7,-7.4 2.4,-1.6 2.3,-0.5 3.4,-5.2 3.6,-2.6 -0.6,-4 2.7,-4.7 3.4,-1.9 1.6,-2.1 0.6,0.8 0.6,5 0.5,5 2.3,3.7 1.8,5 1,9.7 26.5,-0.5 27.6,-0.3 0.5,5 2.3,3 0.8,4.5 -0.8,-4.5 0.2,-7.9 -1.3,-3.7 -4,-6.5 -1.3,-5.5 0,-8.6 -48.9,0.6" },
  UT: { name: "Utah", path: "M224.8,297.2 l-24,3.2 -0.5,-3.1 0.3,-1.8 -3.6,-3.2 0.5,-1.3 0.5,-1 -1.8,-1.3 -3.9,0.2 2.3,-6.3 -1,-4.5 1.5,-4.4 -0.3,-1.8 -6.5,-14.2 -0.3,-2.3 2.3,-0.5 5.7,-3.4 0.5,-3.2 0.6,-0.2 1.9,0.5 2.1,2.7 1,-0.3 0.2,-2.1 2.7,-2.1 0.8,-3.9 -0.6,-1.9 0.5,-2.3 1.8,-1.1 1.1,-6.9 2.7,-5 0,-2.6 0.8,-1 1.3,-10.8 25.2,-2.7 -6.3,66.7" },
  VT: { name: "Vermont", path: "M822.6,116 l2.1,-0.8 -0.6,-5.5 0.6,-5.3 -0.6,-9.7 -0.8,-3.9 1.1,-5.2 22.7,-6.1 -0.6,-2.1 -2.4,-0.5 -0.8,-2.6 -1.3,0.8 -1.1,-3.2 -2.4,-0.5 -4.4,1.3 -1.9,3.6 -4.5,1.3 -0.5,3.9 1.3,1.8 -3.1,2.1 0.3,6.5 -0.6,1.3 0.3,8.7 2.7,5 0.2,9.2 z" },
  VA: { name: "Virginia", path: "M823.6,286.2 l-0.8,-0.3 -2.3,1.5 -2.1,3.1 -1.6,0.3 -2.3,-1.9 -3.9,-1.5 -5.7,-0.2 -4,3.9 -2.9,1.5 -7.1,-3.4 -5.2,1 -4.5,2.3 -4.4,-0.5 -2.4,1.8 -2.3,-0.3 -5.8,3.6 -5.7,-1.3 -5.7,1.3 -2.4,2.3 -4.2,-0.5 -1.1,1 -4.4,-0.2 -7.9,3.4 -1,1.9 -2.6,0.2 -0.8,1.1 -2.7,0.2 -3.6,2.1 -2.9,4 -3.1,2.4 -0.6,2.7 -3.1,3.1 -1.3,4.8 -2.6,3.2 5.5,0.6 53.1,-4 0.8,-4 4.5,-3.4 1.5,-5.5 -2.1,-2.6 -2.9,0.3 -1.6,-2.4 -5.5,-0.3 -1.8,-4 4.2,-0.5 0.5,-1.5 -2.6,-2.4 1.5,-3.2 2.3,-0.3 0.3,-1.8 2.6,-4.5 5.3,0.8 2.7,1.8 4.7,0.3 2.6,1.5 -0.2,2.3 1.6,0.6 2.3,-2.9 2.6,-0.6 2.9,0.6 0.3,3.2 3.1,-1.5 6,-4.5 1.3,2.1 -0.8,1.5 -0.2,3.2 -2.6,1.1 -2.9,4.2 0.8,1.9 -1.1,1.5 -1.9,-0.3 -2.3,1.8 -0.5,2.4 -2.9,-0.2 -1.1,1.9 -3.6,-0.8 5.3,10.3 3.2,1.8 2.4,-1.8 2.9,-0.5 0.5,-1.6 4.4,1 2.3,-0.5 3.2,-3.1 0.8,-3.7 3.1,-5 1.9,-6 2.4,-4.5 -0.5,-3.6 1.8,-4.8 z" },
  WA: { name: "Washington", path: "M136.9,24.8 l-7.1,-1.8 -9.5,-1.8 -7.6,-0.5 -9.2,-2.4 -4.7,0.2 -5.3,2.3 -7.6,1.3 0.5,2.1 4.2,2.6 -1.3,2.9 -4.5,0.5 -1.1,7.4 -2.9,3.9 0.3,4.2 4,2.3 -0.8,3.4 -2.9,0.2 -0.5,4.2 4.4,1.3 2.6,3.2 3.9,2.3 3.9,4.4 5.5,1.5 1.3,2.6 -3.4,0.8 -0.3,2.7 2.1,2.9 4.4,2.3 2.3,0.5 5.2,-0.8 19,6.3 19.5,5.3 3.4,-5 2.1,-3.2 3.4,-0.3 5.8,-0.5 2.6,1.6 5.2,-0.8 -1.1,-5 -1,-14 -0.5,-5.8 1.9,-7.9 -2.9,-1 -5.5,-0.6 -2.1,-2.6 -4.2,-1.1 -4.4,-3.4 -0.6,-1.1 -3.7,-0.6 0,-2.6 -3.6,-0.8 -0.3,-3.4 -1,-0.8 -0.8,1.8 -0.3,4 -1.8,0.2 -0.6,-6.1 1.3,-2.4 -0.6,-2.3 z" },
  WV: { name: "West Virginia", path: "M740,247.4 l-3.2,2.1 -2.4,-5.5 -2.9,-1.6 -1.1,-4.2 -2.4,1 -0.8,4.4 -4.4,5 -2.4,-0.5 -3.1,2.6 -3.7,-0.3 -5.2,-5 -0.5,-2.7 -1.9,-1.5 -0.8,-2.7 -1.1,-1.3 -5.3,-1.5 -1.5,-3.7 1.8,0.8 3.2,-1 4.5,1 2.1,2.4 -1.6,-1.3 -5,-0.2 -2.4,1.5 -1.5,-0.6 -0.6,-4.5 -2.3,-0.3 -5.2,3.1 -3.7,0.2 -2.1,0.5 -2.4,2.1 -1,3.6 -3.4,1.3 -5.2,-2.3 -2.4,0.6 -2.9,3.9 -5.8,-1.3 -3.1,-2.9 -0.2,-1.6 2.7,-5.3 -1.3,2.1 4.2,0.5 1.5,0.6 1.8,-4 -5.5,0.3 1.8,-3.9 -2.7,-1.8 -5.3,-0.8 -2.6,4.5 2.6,2.4 -0.3,3.6 1.6,0.6 2.3,-2.9 2.6,-0.6 2.9,0.6 1.3,-0.6 1.8,4.8 2.9,1.8 2.1,0 0.5,1.1 1.3,0.3 2.3,4.7 4.4,3.9 0.3,2.4 -0.6,2.3 2.6,4.4 5,6.5 0,4 3.2,2.9 0.6,2.7 0.5,-2.4 2.3,-1.8 1.9,0.3 1.1,-1.5 -0.8,-1.9 2.9,-4.2 2.6,-1.1 0.2,-3.2 0.8,-1.5 1.5,1.5 3.4,0.2 0.2,-1.6 2.9,0.2 0.5,-2.4 2.3,-1.8 5.2,5.3 1.5,1 0.5,2.1 2.3,1.9 2.6,-0.6 1.9,-3.2 2.4,-1.8 1,-3.6 3.2,-4.4 2.6,-7.1" },
  WI: { name: "Wisconsin", path: "M565.3,118.1 l-0.6,-3.4 -1.8,-2.1 0.6,-2.7 1.3,-2.6 -1,-2.3 0.5,-2.7 2.1,-2.6 0.5,-3.4 -0.6,-2.7 0.3,-3.1 -2.7,-8.4 -2.3,-4.2 -1.6,-0.5 -1.6,-2.9 -0.5,-3.9 -2.1,-0.6 -0.6,-5 0.5,-1.6 -1.5,-1.5 0.3,-2.9 -2.3,-4.5 -0.2,-2.4 -1.3,1.8 -2.9,0.8 -2.3,2.9 -1,4.2 -2.1,5 -1.3,1.5 -1.9,5.5 -2.1,2.3 0.6,5.2 -1,-1 -2.3,-0.2 -1,-2.6 -4.2,-0.8 -3.6,-2.3 -1.3,0.3 -1.5,1.6 -1.8,0 -0.6,-8.9 -4.7,-0.6 -3.4,-1.5 -0.6,-1.6 0.2,-7.1 -1.3,-0.8 -2.6,1.6 -1,-0.3 -0.2,-5.2 1.5,-2.4 5.3,-1.3 1.3,-2.3 -1.3,-1 -5.3,1.6 -3.2,2.4 -5.2,6.3 -2.6,1 0,4.2 1.5,1.1 -0.5,2.9 2.1,3.6 -0.3,1.9 -2.4,0 0.5,7.9 1.3,2.7 -0.5,5.3 1.9,5.8 2.1,2.3 0.8,4.8 1.5,1.5 -0.3,7.6 -1.5,5.5 1.3,2.6 -0.5,2.1 0.3,2.7 5,4.4 4.7,1 1.6,-1.5 3.4,1.3 2.3,-0.5 5.3,2.6 5.3,0.3 3.6,-2.4 0.6,-1.9 3.6,2.3 2.9,0.3 2.1,-0.2 1.9,-2.4 3.4,-0.8 1.1,-0.8 1,-3.1 3.9,-2.6 0.5,-3.4 z" },
  WY: { name: "Wyoming", path: "M292.5,148.6 l-0.3,-5.8 -1.6,-24.2 -1.5,-23.4 29.1,1.9 55,2.3 0.5,23.9 2.1,16 -78.5,-2.1 z m-5.1,55.7 l78.5,8.3 -0.5,-23.9 -2.1,-16 -1.1,-20 z" }
};

const STATE_LIST = Object.entries(STATES).map(([id, data]) => ({ id, ...data }));

// Utility functions
const shuffle = arr => [...arr].sort(() => Math.random() - 0.5);
const formatTime = ms => {
  const s = Math.floor(ms / 1000);
  const m = Math.floor(s / 60);
  return m > 0 ? `${m}:${String(s % 60).padStart(2, '0')}` : `${s}s`;
};

// Storage helpers
const loadBestTimes = () => {
  try { return JSON.parse(localStorage.getItem('usQuizBestTimes') || '{}'); } catch { return {}; }
};
const saveBestTime = (mode, time) => {
  const times = loadBestTimes();
  if (!times[mode] || time < times[mode]) {
    times[mode] = time;
    localStorage.setItem('usQuizBestTimes', JSON.stringify(times));
    return true;
  }
  return false;
};

// Confetti component
const Confetti = () => {
  const pieces = Array.from({ length: 50 }, (_, i) => ({
    id: i,
    left: Math.random() * 100,
    delay: Math.random() * 0.5,
    color: ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dfe6e9'][Math.floor(Math.random() * 6)]
  }));
  return (
    <div className="confetti">
      {pieces.map(p => (
        <div key={p.id} className="confetti-piece" style={{
          left: `${p.left}%`,
          background: p.color,
          animationDelay: `${p.delay}s`,
          borderRadius: Math.random() > 0.5 ? '50%' : '0'
        }} />
      ))}
    </div>
  );
};

// US Map SVG component
const USMap = ({ onStateClick, stateClasses = {}, highlightState = null }) => (
  <svg className="us-map" viewBox="0 0 960 600" preserveAspectRatio="xMidYMid meet">
    {STATE_LIST.map(state => (
      <path
        key={state.id}
        d={state.path}
        className={`state-path ${stateClasses[state.id] || ''} ${highlightState === state.id ? 'selected' : ''}`}
        onClick={() => onStateClick && onStateClick(state.id)}
      />
    ))}
  </svg>
);

// Single state shape for quiz display
const StateShape = ({ stateId, className = '' }) => {
  const state = STATES[stateId];
  if (!state) return null;

  // Parse path to find bounds
  const path = state.path;
  const nums = path.match(/-?\d+\.?\d*/g)?.map(Number) || [];
  let minX = Infinity, maxX = -Infinity, minY = Infinity, maxY = -Infinity;
  for (let i = 0; i < nums.length; i += 2) {
    if (nums[i] < minX) minX = nums[i];
    if (nums[i] > maxX) maxX = nums[i];
    if (nums[i+1] < minY) minY = nums[i+1];
    if (nums[i+1] > maxY) maxY = nums[i+1];
  }
  const padding = 10;
  const vb = `${minX - padding} ${minY - padding} ${maxX - minX + padding * 2} ${maxY - minY + padding * 2}`;

  return (
    <svg viewBox={vb} preserveAspectRatio="xMidYMid meet" className={className}>
      <path d={state.path} className="state-path" />
    </svg>
  );
};

// Timer display
const Timer = ({ time, bestTime, running }) => (
  <div className="timer">
    <span className="current">{formatTime(time)}</span>
    {bestTime && <span className="best"> Best: {formatTime(bestTime)}</span>}
  </div>
);

// Progress bar
const Progress = ({ current, total }) => (
  <div>
    <div className="progress-bar">
      <div className="progress-fill" style={{ width: `${(current / total) * 100}%` }} />
    </div>
    <div className="progress-text">{current} / {total}</div>
  </div>
);

// Feedback overlay
const Feedback = ({ correct, stateName, onDone }) => {
  useEffect(() => {
    const t = setTimeout(onDone, correct ? 800 : 1500);
    return () => clearTimeout(t);
  }, []);

  return (
    <div className={`feedback ${correct ? 'correct' : 'incorrect'}`}>
      <div className="icon">{correct ? '‚úì' : '‚úó'}</div>
      <div className="msg">{correct ? 'Correct!' : 'Not quite!'}</div>
      {!correct && <div className="answer">It was {stateName}</div>}
    </div>
  );
};

// ============ QUIZ MODES ============

// Mode 1: Full Map - Label all states, then check
const FullMapMode = ({ onBack }) => {
  const [labels, setLabels] = useState({});
  const [selected, setSelected] = useState(null);
  const [input, setInput] = useState('');
  const [checked, setChecked] = useState(false);
  const [results, setResults] = useState(null);
  const [startTime] = useState(Date.now());
  const [showConfetti, setShowConfetti] = useState(false);
  const inputRef = useRef(null);
  const bestTime = loadBestTimes().fullMap;

  const handleStateClick = (id) => {
    if (checked) return;
    setSelected(id);
    setInput(labels[id] || '');
    setTimeout(() => inputRef.current?.focus(), 50);
  };

  const handleSubmit = () => {
    if (!selected || !input.trim()) return;
    setLabels(prev => ({ ...prev, [selected]: input.trim() }));
    setInput('');
    setSelected(null);
  };

  const handleCheck = () => {
    const correct = {};
    const incorrect = {};
    Object.entries(labels).forEach(([id, answer]) => {
      const isCorrect = answer.toLowerCase() === STATES[id].name.toLowerCase();
      if (isCorrect) correct[id] = true;
      else incorrect[id] = answer;
    });

    const unlabeled = STATE_LIST.filter(s => !labels[s.id]).map(s => s.id);
    const score = Object.keys(correct).length;
    const time = Date.now() - startTime;
    const isRecord = score === 50 && saveBestTime('fullMap', time);

    setResults({ correct, incorrect, unlabeled, score, time, isRecord });
    setChecked(true);
    if (score === 50) setShowConfetti(true);
  };

  const handleReset = () => {
    setLabels({});
    setSelected(null);
    setInput('');
    setChecked(false);
    setResults(null);
    setShowConfetti(false);
  };

  const getStateClass = (id) => {
    if (!checked) return labels[id] ? 'labeled' : '';
    if (results.correct[id]) return 'correct';
    if (results.incorrect[id]) return 'incorrect';
    return '';
  };

  return (
    <div className="quiz-container">
      {showConfetti && <Confetti />}
      <div className="quiz-header">
        <button className="back-btn" onClick={onBack}>‚Üê Back</button>
        <Timer time={Date.now() - startTime} bestTime={bestTime} />
      </div>

      <Progress current={Object.keys(labels).length} total={50} />

      <div className="map-container">
        <USMap
          onStateClick={handleStateClick}
          stateClasses={Object.fromEntries(STATE_LIST.map(s => [s.id, getStateClass(s.id)]))}
          highlightState={selected}
        />
      </div>

      {!checked ? (
        <div className="input-area">
          <div className="prompt">
            {selected ? `Name this state (${STATES[selected].name.substring(0,1)}...)` : 'Tap a state to label it'}
          </div>
          <input
            ref={inputRef}
            className="state-input"
            value={input}
            onChange={e => setInput(e.target.value)}
            onKeyDown={e => e.key === 'Enter' && handleSubmit()}
            placeholder={selected ? 'Type state name...' : ''}
            disabled={!selected}
          />
          <div className="btn-row">
            <button className="btn btn-primary" onClick={handleSubmit} disabled={!selected || !input.trim()}>
              Set Label
            </button>
            <button className="btn btn-success" onClick={handleCheck} disabled={Object.keys(labels).length === 0}>
              Check Work
            </button>
            <button className="btn btn-secondary" onClick={handleReset}>Reset</button>
          </div>
        </div>
      ) : (
        <div className="results">
          <div className="results-card">
            <h2>{results.score === 50 ? 'üéâ Perfect!' : 'Results'}</h2>
            <div className="score">{results.score}/50</div>
            <div className="label">states correct</div>
            <div className="time">Time: {formatTime(results.time)}</div>
            {results.isRecord && <div className="record">üèÜ New Record!</div>}
            <div className="btn-row" style={{marginTop: 16}}>
              <button className="btn btn-primary" onClick={handleReset}>Try Again</button>
              <button className="btn btn-secondary" onClick={onBack}>Menu</button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

// Mode 2: Single State - Show state, type name
const SingleStateMode = ({ onBack }) => {
  const [queue, setQueue] = useState(() => shuffle(STATE_LIST));
  const [index, setIndex] = useState(0);
  const [input, setInput] = useState('');
  const [feedback, setFeedback] = useState(null);
  const [score, setScore] = useState({ correct: 0, total: 0 });
  const [startTime] = useState(Date.now());
  const [done, setDone] = useState(false);
  const [showConfetti, setShowConfetti] = useState(false);
  const inputRef = useRef(null);
  const bestTime = loadBestTimes().singleState;

  const current = queue[index];

  useEffect(() => {
    inputRef.current?.focus();
  }, [index, feedback]);

  const handleSubmit = () => {
    if (!input.trim()) return;
    const isCorrect = input.trim().toLowerCase() === current.name.toLowerCase();
    setScore(prev => ({
      correct: prev.correct + (isCorrect ? 1 : 0),
      total: prev.total + 1
    }));
    setFeedback({ correct: isCorrect, stateName: current.name });
  };

  const handleNext = () => {
    setFeedback(null);
    setInput('');
    if (index + 1 >= queue.length) {
      const time = Date.now() - startTime;
      const isRecord = score.correct === 50 && saveBestTime('singleState', time);
      setDone({ time, isRecord });
      if (score.correct + (feedback?.correct ? 1 : 0) === 50) setShowConfetti(true);
    } else {
      setIndex(index + 1);
    }
  };

  if (done) {
    return (
      <div className="quiz-container">
        {showConfetti && <Confetti />}
        <div className="completion">
          <div className="trophy">üèÜ</div>
          <h2>Quiz Complete!</h2>
          <div className="score">{score.correct} / 50 correct</div>
          <div className="time">Time: {formatTime(done.time)}</div>
          {done.isRecord && <div className="record">üèÜ New Best Time!</div>}
          <div className="btn-row" style={{marginTop: 24}}>
            <button className="btn btn-primary" onClick={() => {
              setQueue(shuffle(STATE_LIST));
              setIndex(0);
              setScore({ correct: 0, total: 0 });
              setDone(false);
              setShowConfetti(false);
            }}>Play Again</button>
            <button className="btn btn-secondary" onClick={onBack}>Menu</button>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="quiz-container">
      {feedback && <Feedback {...feedback} onDone={handleNext} />}
      <div className="quiz-header">
        <button className="back-btn" onClick={onBack}>‚Üê Back</button>
        <Timer time={Date.now() - startTime} bestTime={bestTime} />
      </div>

      <Progress current={index + 1} total={50} />

      <div className="single-state">
        <StateShape stateId={current.id} />
      </div>

      <div className="input-area">
        <div className="prompt">What state is this?</div>
        <input
          ref={inputRef}
          className="state-input"
          value={input}
          onChange={e => setInput(e.target.value)}
          onKeyDown={e => e.key === 'Enter' && handleSubmit()}
          placeholder="Type state name..."
          disabled={!!feedback}
        />
        <button className="btn btn-primary" style={{width: '100%', marginTop: 12}} onClick={handleSubmit} disabled={!input.trim() || !!feedback}>
          Submit
        </button>
      </div>
    </div>
  );
};

// Mode 3: Name from Choices - Show state, pick name from 4
const NameChoiceMode = ({ onBack }) => {
  const [queue, setQueue] = useState(() => shuffle(STATE_LIST));
  const [index, setIndex] = useState(0);
  const [choices, setChoices] = useState([]);
  const [selected, setSelected] = useState(null);
  const [score, setScore] = useState({ correct: 0, total: 0 });
  const [startTime] = useState(Date.now());
  const [done, setDone] = useState(false);
  const [showConfetti, setShowConfetti] = useState(false);
  const bestTime = loadBestTimes().nameChoice;

  const current = queue[index];

  useEffect(() => {
    if (!current) return;
    const wrong = shuffle(STATE_LIST.filter(s => s.id !== current.id)).slice(0, 3);
    setChoices(shuffle([current, ...wrong]));
  }, [index, current]);

  const handleChoice = (choice) => {
    if (selected) return;
    setSelected(choice.id);
    const isCorrect = choice.id === current.id;
    setScore(prev => ({
      correct: prev.correct + (isCorrect ? 1 : 0),
      total: prev.total + 1
    }));

    setTimeout(() => {
      if (index + 1 >= queue.length) {
        const time = Date.now() - startTime;
        const finalCorrect = score.correct + (isCorrect ? 1 : 0);
        const isRecord = finalCorrect === 50 && saveBestTime('nameChoice', time);
        setDone({ time, isRecord, finalCorrect });
        if (finalCorrect === 50) setShowConfetti(true);
      } else {
        setIndex(index + 1);
        setSelected(null);
      }
    }, 800);
  };

  if (done) {
    return (
      <div className="quiz-container">
        {showConfetti && <Confetti />}
        <div className="completion">
          <div className="trophy">üèÜ</div>
          <h2>Quiz Complete!</h2>
          <div className="score">{done.finalCorrect} / 50 correct</div>
          <div className="time">Time: {formatTime(done.time)}</div>
          {done.isRecord && <div className="record">üèÜ New Best Time!</div>}
          <div className="btn-row" style={{marginTop: 24}}>
            <button className="btn btn-primary" onClick={() => {
              setQueue(shuffle(STATE_LIST));
              setIndex(0);
              setScore({ correct: 0, total: 0 });
              setSelected(null);
              setDone(false);
              setShowConfetti(false);
            }}>Play Again</button>
            <button className="btn btn-secondary" onClick={onBack}>Menu</button>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="quiz-container">
      <div className="quiz-header">
        <button className="back-btn" onClick={onBack}>‚Üê Back</button>
        <Timer time={Date.now() - startTime} bestTime={bestTime} />
      </div>

      <Progress current={index + 1} total={50} />

      <div className="single-state">
        <StateShape stateId={current.id} />
      </div>

      <div className="input-area">
        <div className="prompt">What state is this?</div>
        <div className="choices">
          {choices.map(c => (
            <button
              key={c.id}
              className={`choice-btn ${selected === c.id ? (c.id === current.id ? 'correct' : 'incorrect') : ''} ${selected && c.id === current.id ? 'correct' : ''}`}
              onClick={() => handleChoice(c)}
              disabled={!!selected}
            >
              {c.name}
            </button>
          ))}
        </div>
      </div>
    </div>
  );
};

// Mode 4: Shape from Choices - Show name, pick shape from 4
const ShapeChoiceMode = ({ onBack }) => {
  const [queue, setQueue] = useState(() => shuffle(STATE_LIST));
  const [index, setIndex] = useState(0);
  const [choices, setChoices] = useState([]);
  const [selected, setSelected] = useState(null);
  const [score, setScore] = useState({ correct: 0, total: 0 });
  const [startTime] = useState(Date.now());
  const [done, setDone] = useState(false);
  const [showConfetti, setShowConfetti] = useState(false);
  const bestTime = loadBestTimes().shapeChoice;

  const current = queue[index];

  useEffect(() => {
    if (!current) return;
    const wrong = shuffle(STATE_LIST.filter(s => s.id !== current.id)).slice(0, 3);
    setChoices(shuffle([current, ...wrong]));
  }, [index, current]);

  const handleChoice = (choice) => {
    if (selected) return;
    setSelected(choice.id);
    const isCorrect = choice.id === current.id;
    setScore(prev => ({
      correct: prev.correct + (isCorrect ? 1 : 0),
      total: prev.total + 1
    }));

    setTimeout(() => {
      if (index + 1 >= queue.length) {
        const time = Date.now() - startTime;
        const finalCorrect = score.correct + (isCorrect ? 1 : 0);
        const isRecord = finalCorrect === 50 && saveBestTime('shapeChoice', time);
        setDone({ time, isRecord, finalCorrect });
        if (finalCorrect === 50) setShowConfetti(true);
      } else {
        setIndex(index + 1);
        setSelected(null);
      }
    }, 800);
  };

  if (done) {
    return (
      <div className="quiz-container">
        {showConfetti && <Confetti />}
        <div className="completion">
          <div className="trophy">üèÜ</div>
          <h2>Quiz Complete!</h2>
          <div className="score">{done.finalCorrect} / 50 correct</div>
          <div className="time">Time: {formatTime(done.time)}</div>
          {done.isRecord && <div className="record">üèÜ New Best Time!</div>}
          <div className="btn-row" style={{marginTop: 24}}>
            <button className="btn btn-primary" onClick={() => {
              setQueue(shuffle(STATE_LIST));
              setIndex(0);
              setScore({ correct: 0, total: 0 });
              setSelected(null);
              setDone(false);
              setShowConfetti(false);
            }}>Play Again</button>
            <button className="btn btn-secondary" onClick={onBack}>Menu</button>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="quiz-container">
      <div className="quiz-header">
        <button className="back-btn" onClick={onBack}>‚Üê Back</button>
        <Timer time={Date.now() - startTime} bestTime={bestTime} />
      </div>

      <Progress current={index + 1} total={50} />

      <div className="input-area">
        <div className="prompt" style={{fontSize: '1.8rem', margin: '20px 0'}}>{current.name}</div>
        <div className="shape-grid">
          {choices.map(c => (
            <button
              key={c.id}
              className={`shape-btn ${selected === c.id ? (c.id === current.id ? 'correct' : 'incorrect') : ''} ${selected && c.id === current.id ? 'correct' : ''}`}
              onClick={() => handleChoice(c)}
              disabled={!!selected}
            >
              <StateShape stateId={c.id} />
            </button>
          ))}
        </div>
      </div>
    </div>
  );
};

// ============ MAIN APP ============

const App = () => {
  const [mode, setMode] = useState(null);

  if (mode === 'fullMap') return <FullMapMode onBack={() => setMode(null)} />;
  if (mode === 'singleState') return <SingleStateMode onBack={() => setMode(null)} />;
  if (mode === 'nameChoice') return <NameChoiceMode onBack={() => setMode(null)} />;
  if (mode === 'shapeChoice') return <ShapeChoiceMode onBack={() => setMode(null)} />;

  const modes = ['fullMap', 'singleState', 'nameChoice', 'shapeChoice'];
  const startRandom = () => setMode(modes[Math.floor(Math.random() * modes.length)]);

  return (
    <div className="app">
      <div className="header">
        <h1>US States Quiz</h1>
        <p>Learn all 50 states!</p>
      </div>

      <div className="mode-grid">
        <div className="mode-card" onClick={() => setMode('fullMap')}>
          <div className="icon">üó∫Ô∏è</div>
          <div className="title">Full Map</div>
          <div className="desc">Label all 50 states</div>
        </div>

        <div className="mode-card" onClick={() => setMode('singleState')}>
          <div className="icon">‚úèÔ∏è</div>
          <div className="title">Type Name</div>
          <div className="desc">Type the state name</div>
        </div>

        <div className="mode-card" onClick={() => setMode('nameChoice')}>
          <div className="icon">üéØ</div>
          <div className="title">Pick Name</div>
          <div className="desc">Choose from 4 options</div>
        </div>

        <div className="mode-card" onClick={() => setMode('shapeChoice')}>
          <div className="icon">üß©</div>
          <div className="title">Pick Shape</div>
          <div className="desc">Find the right shape</div>
        </div>

        <div className="mode-card random" onClick={startRandom}>
          <div className="icon">üé≤</div>
          <div className="title">Random Mode</div>
          <div className="desc">Surprise me!</div>
        </div>
      </div>
    </div>
  );
};

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>

</body>
</html>
