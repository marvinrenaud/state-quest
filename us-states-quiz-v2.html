<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="States Quiz">
    <title>US States Quiz</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        :root {
            --primary: #4d96ff;
            --primary-dark: #3a7bd5;
            --secondary: #ff6b6b;
            --success: #6bcb77;
            --warning: #ffd93d;
            --error: #ff4757;
            --bg-main: #f0f7ff;
            --bg-card: #ffffff;
            --text-primary: #2d3436;
            --text-secondary: #4a5568;
            --text-light: #ffffff;
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --border-radius: 12px;
            --border-radius-lg: 20px;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
            --transition-fast: 150ms ease;
            --transition-normal: 250ms ease;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            margin: 0;
            padding: 0;
            font-family: var(--font-family);
            font-size: 18px;
            line-height: 1.5;
            color: var(--text-primary);
            background: var(--bg-main);
            min-height: 100vh;
            overscroll-behavior: none;
        }

        #root {
            min-height: 100vh;
        }

        .app-container {
            max-width: 1024px;
            margin: 0 auto;
            padding: var(--spacing-md);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            text-align: center;
            padding: var(--spacing-md) 0;
        }

        .header h1 {
            font-size: 2rem;
            margin: 0;
            color: var(--primary-dark);
        }

        .header .subtitle {
            color: var(--text-secondary);
            margin-top: var(--spacing-xs);
        }

        /* Mode Selection */
        .mode-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacing-md);
            padding: var(--spacing-md) 0;
        }

        .mode-card {
            background: var(--bg-card);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-md);
            cursor: pointer;
            transition: transform var(--transition-fast), box-shadow var(--transition-fast);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            min-height: 140px;
            border: 3px solid transparent;
        }

        .mode-card:hover, .mode-card:focus {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        }

        .mode-card:active {
            transform: scale(0.98);
        }

        .mode-card .emoji {
            font-size: 2.5rem;
            margin-bottom: var(--spacing-sm);
        }

        .mode-card .title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .mode-card .difficulty {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-top: var(--spacing-xs);
        }

        .mode-card.random {
            grid-column: span 2;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .mode-card.random .title,
        .mode-card.random .difficulty {
            color: white;
        }

        /* Quiz Container */
        .quiz-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-sm) 0;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
        }

        .back-button {
            background: var(--bg-card);
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            min-height: 44px;
        }

        .timer-display {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .timer-current {
            color: var(--text-primary);
        }

        .timer-best {
            color: var(--success);
            font-size: 1rem;
        }

        /* Progress Bar */
        .progress-section {
            padding: var(--spacing-sm) 0;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--success));
            border-radius: 6px;
            transition: width var(--transition-normal);
        }

        .progress-text {
            text-align: center;
            font-weight: 600;
            color: var(--text-secondary);
            margin-top: var(--spacing-xs);
        }

        /* US Map */
        .map-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: var(--spacing-sm);
        }

        .us-map {
            width: 100%;
            max-height: 50vh;
            touch-action: manipulation;
        }

        .state-path {
            fill: #e8f4fd;
            stroke: #4a90a4;
            stroke-width: 0.5;
            cursor: pointer;
            transition: fill 0.2s ease;
        }

        .state-path:hover {
            fill: #b8d4e8;
        }

        .state-path.selected {
            fill: var(--warning);
            stroke: #f39c12;
            stroke-width: 1.5;
        }

        .state-path.correct {
            fill: var(--success);
            stroke: #4a9c5d;
        }

        .state-path.incorrect {
            fill: var(--error);
            stroke: #d63031;
        }

        .state-path.answered {
            fill: #b8d4e8;
            stroke: #4a90a4;
        }

        /* Input Area */
        .input-area {
            padding: var(--spacing-md);
            background: var(--bg-card);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            margin-top: var(--spacing-md);
        }

        .input-prompt {
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: var(--spacing-md);
            color: var(--text-primary);
        }

        .state-input {
            width: 100%;
            height: 56px;
            padding: var(--spacing-md) var(--spacing-lg);
            font-size: 1.2rem;
            font-family: inherit;
            border: 3px solid var(--primary);
            border-radius: var(--border-radius);
            background: var(--bg-card);
            color: var(--text-primary);
            text-align: center;
            outline: none;
        }

        .state-input:focus {
            border-color: var(--primary-dark);
            box-shadow: 0 0 0 4px rgba(77, 150, 255, 0.2);
        }

        .submit-button {
            width: 100%;
            height: 56px;
            margin-top: var(--spacing-md);
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: background var(--transition-fast);
        }

        .submit-button:hover {
            background: var(--primary-dark);
        }

        .submit-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Action Buttons for Full Map Mode */
        .action-buttons {
            display: flex;
            gap: var(--spacing-md);
            margin-top: var(--spacing-md);
        }

        .action-button {
            flex: 1;
            height: 50px;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            border: 2px solid;
            transition: all var(--transition-fast);
        }

        .action-button.check {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .action-button.reset {
            background: white;
            border-color: var(--secondary);
            color: var(--secondary);
        }

        .action-button:hover {
            transform: scale(1.02);
        }

        /* Choice Buttons */
        .choices-container {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
            padding: var(--spacing-md) 0;
        }

        .choice-button {
            width: 100%;
            min-height: 60px;
            padding: var(--spacing-md) var(--spacing-lg);
            font-size: 1.2rem;
            font-weight: 600;
            font-family: inherit;
            background: var(--bg-card);
            border: 3px solid var(--primary);
            border-radius: var(--border-radius);
            color: var(--text-primary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .choice-button:hover:not(:disabled) {
            background: var(--primary);
            color: white;
        }

        .choice-button:active:not(:disabled) {
            transform: scale(0.98);
        }

        .choice-button.correct {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .choice-button.incorrect {
            background: var(--error);
            border-color: var(--error);
            color: white;
        }

        .choice-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        /* Shape Choices */
        .shape-choices {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-md);
            padding: var(--spacing-md) 0;
        }

        .shape-choice {
            background: var(--bg-card);
            border: 3px solid var(--primary);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            cursor: pointer;
            transition: all var(--transition-fast);
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 100px;
            min-height: 100px;
        }

        .shape-choice:hover:not(:disabled) {
            border-color: var(--primary-dark);
            transform: scale(1.02);
        }

        .shape-choice.correct {
            background: var(--success);
            border-color: var(--success);
        }

        .shape-choice.incorrect {
            background: var(--error);
            border-color: var(--error);
        }

        .shape-choice svg {
            width: 100%;
            height: 100%;
        }

        /* Single State Display */
        .single-state-container {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: var(--spacing-lg);
            flex: 1;
        }

        .single-state-svg {
            max-width: 300px;
            max-height: 250px;
        }

        .single-state-svg .state-path {
            fill: var(--primary);
            stroke: var(--primary-dark);
            stroke-width: 2;
        }

        /* State Name Display */
        .state-name-display {
            text-align: center;
            padding: var(--spacing-xl);
        }

        .state-name-display h2 {
            font-size: 2.5rem;
            color: var(--primary-dark);
            margin: 0;
        }

        .state-name-display p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Feedback Overlay */
        .feedback-overlay {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            animation: fadeIn 0.2s ease;
        }

        .feedback-overlay.correct {
            background: rgba(107, 203, 119, 0.95);
        }

        .feedback-overlay.incorrect {
            background: rgba(255, 107, 107, 0.92);
        }

        .feedback-icon {
            font-size: 5rem;
            margin-bottom: var(--spacing-md);
        }

        .feedback-message {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            text-align: center;
        }

        .feedback-answer {
            font-size: 1.3rem;
            color: white;
            margin-top: var(--spacing-md);
            text-align: center;
        }

        /* Completion Screen */
        .completion-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: var(--spacing-xl);
            flex: 1;
        }

        .completion-screen .trophy {
            font-size: 5rem;
            margin-bottom: var(--spacing-md);
        }

        .completion-screen h2 {
            font-size: 2rem;
            color: var(--primary-dark);
            margin: 0;
        }

        .completion-screen .score {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin: var(--spacing-md) 0;
        }

        .completion-screen .time-result {
            font-size: 1.2rem;
            color: var(--success);
            margin-bottom: var(--spacing-lg);
        }

        .completion-screen .new-record {
            color: #d69e2e;
            font-weight: 700;
        }

        .play-again-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--border-radius);
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: var(--spacing-md);
        }

        /* Check Work Results */
        .check-results {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            padding: var(--spacing-md);
        }

        .check-results-card {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-xl);
            max-width: 400px;
            width: 100%;
            text-align: center;
        }

        .check-results-card h3 {
            font-size: 1.5rem;
            margin: 0 0 var(--spacing-md) 0;
        }

        .check-results-card .score-big {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
        }

        .check-results-card .score-label {
            color: var(--text-secondary);
        }

        .check-results-card .continue-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--border-radius);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: var(--spacing-lg);
        }

        /* Confetti */
        .confetti-container {
            position: fixed;
            inset: 0;
            pointer-events: none;
            overflow: hidden;
            z-index: 1000;
        }

        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 10px;
            top: -20px;
            animation: confetti-fall 2.5s ease-out forwards;
        }

        @keyframes confetti-fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Timer Toggle */
        .timer-toggle {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-md);
            background: var(--bg-card);
            border-radius: var(--border-radius);
            margin-bottom: var(--spacing-md);
        }

        .timer-toggle label {
            font-weight: 600;
        }

        .toggle-switch {
            width: 60px;
            height: 44px;
            background: #ccc;
            border-radius: 22px;
            position: relative;
            cursor: pointer;
            transition: background var(--transition-fast);
        }

        .toggle-switch.active {
            background: var(--primary);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 36px;
            height: 36px;
            background: white;
            border-radius: 50%;
            top: 4px;
            left: 4px;
            transition: transform var(--transition-fast);
        }

        .toggle-switch.active::after {
            transform: translateX(16px);
        }

        /* Focus states for accessibility */
        .mode-card:focus-visible,
        .choice-button:focus-visible,
        .shape-choice:focus-visible,
        .action-button:focus-visible {
            outline: 3px solid var(--primary);
            outline-offset: 2px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .shape-choices {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .mode-grid {
                grid-template-columns: 1fr;
            }
            .mode-card.random {
                grid-column: span 1;
            }
            .shape-choices {
                grid-template-columns: 1fr;
            }
            .shape-choices {
                grid-template-columns: 1fr;
            }
            .header h1 {
                font-size: 1.5rem;
            }
        }

        @media (orientation: landscape) {
            .us-map {
                max-height: 60vh;
            }
            .single-state-svg {
                max-height: 35vh;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useCallback, useMemo, useRef } = React;

        // US States Data
        const STATES_DATA = [
            { id: "AL", name: "Alabama", region: "Southeast" },
            { id: "AK", name: "Alaska", region: "West" },
            { id: "AZ", name: "Arizona", region: "Southwest" },
            { id: "AR", name: "Arkansas", region: "South" },
            { id: "CA", name: "California", region: "West" },
            { id: "CO", name: "Colorado", region: "West" },
            { id: "CT", name: "Connecticut", region: "Northeast" },
            { id: "DE", name: "Delaware", region: "Northeast" },
            { id: "FL", name: "Florida", region: "Southeast" },
            { id: "GA", name: "Georgia", region: "Southeast" },
            { id: "HI", name: "Hawaii", region: "West" },
            { id: "ID", name: "Idaho", region: "West" },
            { id: "IL", name: "Illinois", region: "Midwest" },
            { id: "IN", name: "Indiana", region: "Midwest" },
            { id: "IA", name: "Iowa", region: "Midwest" },
            { id: "KS", name: "Kansas", region: "Midwest" },
            { id: "KY", name: "Kentucky", region: "Southeast" },
            { id: "LA", name: "Louisiana", region: "South" },
            { id: "ME", name: "Maine", region: "Northeast" },
            { id: "MD", name: "Maryland", region: "Northeast" },
            { id: "MA", name: "Massachusetts", region: "Northeast" },
            { id: "MI", name: "Michigan", region: "Midwest" },
            { id: "MN", name: "Minnesota", region: "Midwest" },
            { id: "MS", name: "Mississippi", region: "South" },
            { id: "MO", name: "Missouri", region: "Midwest" },
            { id: "MT", name: "Montana", region: "West" },
            { id: "NE", name: "Nebraska", region: "Midwest" },
            { id: "NV", name: "Nevada", region: "West" },
            { id: "NH", name: "New Hampshire", region: "Northeast" },
            { id: "NJ", name: "New Jersey", region: "Northeast" },
            { id: "NM", name: "New Mexico", region: "Southwest" },
            { id: "NY", name: "New York", region: "Northeast" },
            { id: "NC", name: "North Carolina", region: "Southeast" },
            { id: "ND", name: "North Dakota", region: "Midwest" },
            { id: "OH", name: "Ohio", region: "Midwest" },
            { id: "OK", name: "Oklahoma", region: "South" },
            { id: "OR", name: "Oregon", region: "West" },
            { id: "PA", name: "Pennsylvania", region: "Northeast" },
            { id: "RI", name: "Rhode Island", region: "Northeast" },
            { id: "SC", name: "South Carolina", region: "Southeast" },
            { id: "SD", name: "South Dakota", region: "Midwest" },
            { id: "TN", name: "Tennessee", region: "Southeast" },
            { id: "TX", name: "Texas", region: "South" },
            { id: "UT", name: "Utah", region: "West" },
            { id: "VT", name: "Vermont", region: "Northeast" },
            { id: "VA", name: "Virginia", region: "Southeast" },
            { id: "WA", name: "Washington", region: "West" },
            { id: "WV", name: "West Virginia", region: "Southeast" },
            { id: "WI", name: "Wisconsin", region: "Midwest" },
            { id: "WY", name: "Wyoming", region: "West" }
        ];

        // Accurate SVG paths for US states (from verified geographic data)
        const STATE_PATHS = {
            "AL": "M628.6,466.4l-1.8-22.2l-1.5-15.8l-1.5-17.3l0.8-0.8l3.4-1l2.3-1l1.7-2.9l2.1-1.7l-0.2-3.1l1.9-3.2l-0.4-2.7l1.6-3.3l-0.1-2l-36.9,3.7l-23.5,2.3l0.3,3.8l1.7,15.7l1.6,13.9l1.4,17l1.5,16.2l0.5,9.4l3.6,10.1l-0.9,3.8l2.8,4l-0.3,2.5l6.3,0.1l18.5-1.4l4.6-0.2l-1-5.4l2.9-5.7l2.1-2.9l1.7-6.7l3.8-5.7l0.9-0.7",
            "AK": "M158.7,573.7l-0.3-0.2l-0.2-1.1l1.3-1.4l2.6-0.4l1.5,0.8l-0.7,1.5l-2.1,0.8l-2.1,0ZM138.6,571.4l2.4-0.2l0.9,0.6l-1.3,1.2l-2.5-0.3l0.5-1.3ZM68.4,546.4l-1.7-2.2l2.5-0.6l1.4,1.2l-0.3,1.9l-1.9-0.3ZM57.4,540.3l1.7-1.6l2.5,1.4l-0.4,1.8l-2.2,0.2l-1.6-1.8ZM80.4,536.9l-2.5-0.1l-0.4-1.4l1.9-0.9l1.8,0.8l-0.8,1.6ZM40.5,532.9l1.9-0.1l1,1.4l-1.9,0.9l-1.4-0.8l0.4-1.4ZM32.4,529.9l-0.5-1.5l2.4-0.2l0.9,1.2l-1.1,1l-1.7-0.5ZM22.5,527.4l-0.4-1.7l2.1-0.5l0.8,1.6l-0.8,1l-1.7-0.4ZM2.5,519.3l1.6-0.7l1.9,1l-0.3,1.6l-2.2,0.3l-1-2.2ZM172.3,572.5l-1.9,1.9l0.2,1.3l4.6-0.7l2.4-2l-1.5-1.9l-3.8,1.4ZM191.6,555.3l-2.7,2.6l0.8,2l4.1-1l1.6-2.8l-0.9-1.8l-2.9,1Z",
            "AZ": "M140.3,443.5l-0.3-1.8l-35.7,5.2l-35.9,4.2l-13.7,1.3l2.7,18.1l5.3,35.2l7.4,45.2l5.9,33.3l22.9-4.1l36.9-7.8l27.9-6.5l-6.6-36.9l-1-2l1.2-2.9l-2.1-3.1l-0.2-5.7l-1.9-1.9l2.4-4.5l0.4-3.1l-3.4-5.6l2.3-4.1l-0.9-4.2l1.2-1.6l-0.4-2.3l-2.6-1.9l-0.7-2.9l-2.5-0.9l-0.9-1.7l0.3-3.9l-2.6-4.7l0.7-3.1l-1.1-3.6l0.7-2.1l-1.3-4.8",
            "AR": "M554.3,391.9l-3.4-0.3l-6.2,0.8l-42.5,1.5l-30.3,0.4l-1.9,10l-1.1,9l-0.9,6.4l1.5,7.4l-2.4,5.2l1.7,1.5l3.7,1.6l0.9,3.7l-0.1,3.2l2.6-0.4l2.8-2.3l3.3,1.4l3.6-1.4l1.1,2l-2.6,3l-0.3,2.6l3.1,1.4l-1.7,2.4l2.8,3l-2.1,2l0.3,1.8l42.6-0.5l26.6-0.9l2.4-3.1l-0.7-2.9l2.2-1.9l0.5-3.3l2.7-4.9l-3.1-1.3l0.7-3.3l-1.9-2.3l2.4-0.9l0.3-5.4l1.7-4.2l-1.1-1.7l1.6-5l-1.3-1.3l0.7-5.8l1.7-6.3l-0.2-3.7l-2.5-4.2l1.6-2.4l-0.9-2.7",
            "CA": "M61.4,329.5l-2.6,0.1l-1-2.2l-3.2-3l-1.7-7.7l-0.5-5.7l1.7-4.5l0.9-5.9l-1.5-3.1l-3.1-2.7l-0.7-3.9l2.5-4l0.3-4.3l-1.7-3.9l1-5.9l2.9-5.7l4.1-3l1.9-5.9l-0.5-4.6l3.3-5.8l4.5-7.8l3.9-3.8l0.5-2.5l4.4-4.9l1.8-1.6l-1-2l-3.9-0.5l-2.7-2.7l-1-5.3l3.1-1.1l0.7-2.9l3.6-4.7l0.1-3.4l-1.3-0.5l-1-4.6l1.6-4.1l-0.9-4l0.1-7.7l-1.7-4.5l-3.8-5.2l-1.9-5.3l0.4-4.2l-3.2-3.9l-3.9-4.9l2.9-0.8l0.1-7.5l11.9,2.9l32.8,7.9l21.7,4.5l24.2,5l0.2,0.6l-1.5,3.1l0.9,2.4l-0.1,4.4l1.9,2.7l-3.5,0.3l0.4,4.2l7.7,46.7l5.4,31.6l7.2,42l-17.7,2.9l-29,3.8l-0.1,3.9l-2.7,3.9l-0.8,3.3l1.9,2.9l-0.9,1.7l-3.2-0.2l-2.7,2l0.4,3.7l-2.7,0.9l-3,3.4l-0.7,3l-5.3,5.4l-1.9,4.7l0.4,1.7l-2.4,2.7l0.2,1.7l-2.7,1.9l-1.2,2.7l-5.3,6.2l-0.7,5.7l-1.6,2.3l0.9,3.9l3.4,3.4l-0.5,5.2l-1.5,2l1.4,4.4l-0.7,2.3l-6.2-0.2l-22.1-12.9l-6.7-4.3l-13.9-9.9l-17.5-13.3l-10.2-8.7l-2.7-4.9",
            "CO": "M381.9,285.5l-54.3,3l-48.7,1.4l-41.9,0.1l-1.7,37l1.7,30.3l2.9,47.6l47.7-2.1l50.7-4.3l46.2-5.4l-0.5-35.5l-1.1-36.9l-1-35.2",
            "CT": "M852.1,185.5l-3.9-14.2l-0.9-2.7l-5.9,1.5l-24.9,5.7l1.4,6l0.6,7.2l-1.2,3l1.9,2.1l6.7-1.1l7-3.3l9.2-1.7l9.7-2.1l0.3-0.4",
            "DE": "M821.4,249.2l-1.1-4.7l-1.3-5.6l-2.7-10.7l4.9-1.2l4.7-0.4l1.8,3.9l1.5,5.6l-0.3,3.7l-2.5,2.7l0.7,2.5l-0.8,1.5l2.2,3l-0.3,2.5l-4.1-0.3l-2.7-2.5",
            "FL": "M697.4,537.8l-0.7-5.5l-2.4-9.5l-3.7-6.5l-2.8-4l-1.9-6.7l-3.8-4.6l-1.7-2.4l-1-5.9l-4.7-6.5l-5.3-8.7l-4.9-3.7l-1.6-5.4l-1.9-4.2l0.2-1.7l-4.9-5.5l-6.4-0.1l-10.5,0.6l-49.1,4.3l-3.2,4.9l1.4,5.5l4.4,2l0.5,2.8l5.3-0.2l8.5-0.6l26.1-2.1l5.9,0.5l5.2,3l8,1.5l7.2,3.9l5,4.9l4.5,6.7l4.9,3.7l1.7,4.3l7.4,8.9l3.9,6.9l4.6,8.5l2.1,7.6l0.3,7.7l-1.5,5l2.5,6l1.9,1.7l-0.3,5.9l1.7,3.5l0.3,2.7l-2.5,4.9l-0.3,2.8l2.2,2.6l-1.6,6.3l-3.2,2.9l-1.8,3.7l-4.1,3.2l-0.3,3.5l-3.3-0.7l-2.9-3.7l-0.1-4l-1.9-0.5l-3.9,1.5l-1.9-0.5l0.9-3.1l-3.3,0.9l-4.9,4.7l-2.5,0.3l-2.2-1.9l-3.9,0.6l-3,1.9l-3.9-1.2l-3.2,0.7l-3.7-2.3l-5.7-1.7l-2.2-2.9l-3.3-0.5l-3.5-2.7l-5.2-1.5l-0.7-1.6l-3.4-1.5l-3.9,1.6l-5-3.3l-4.6-0.3l-0.7-2.9l-2.2,0.7l-1.2-1.3l3.9-2.7l6.9-3.4l3.5-2.8l5.7-1.1l3.9-1.6l2.5-3.1l4.5-0.9l2.2-2.4l0.3-2.9l6.5-6l5.5-5.1l1.2-5l-1.2-1.8l2.7-6l3.2-2.9l-0.4-3.6l3.8-5.2l0.3-7.6l2.7-2.9",
            "GA": "M698.2,389.3l-3.1,0.2l-20.9,2.5l-24.9,2.6l-7.1,0.9l1.3,8.7l2.4,16.2l2.6,20.7l0.8,7.8l3.3,21.7l0.9,4.9l10.1-0.9l19-2l4.9,6.7l3.2,4.5l5,2.7l2.7,4.9l4.5,6.7l2.5,1.4l3.9,3.1l3.7-0.2l1.4-1.1l2.3,0.8l1.5-3.2l4.3-3.7l1.7-6.2l2.9-1.5l-0.4-2.6l1-2.5l3.3-3.6l2.9-5.7l-1.7-1.7l1.1-3.9l-2.1-3.2l1.7-2.9l-1.5-3.5l-1.7-3.7l-3.5-1.7l1.7-4.6l-0.2-4.7l-2.8-4l-2.1-0.5l-1.7-3.4l-2.9-7.2l-2.5-2.4l0.2-2.5l-4.2-5.7l1-4l-2.8-3.2l-0.9-3.4l1.2-3.6l-1.5-2.5l-2.5-7.6l-2.9-4.1",
            "HI": "M233.1,571.3l3.1-3.6l0.4-1.9l-1.4-2.8l-4.2,0.5l-1.7,2.9l0.2,2.3l3.6,2.6ZM248.6,560.6l5.7-2.9l1.9-3l-0.7-3.8l-2.9-0.2l-4,1.9l-2.3,4.9l2.3,3.1ZM262.9,551.2l3.3-0.9l1.8-3l-1.1-3.9l-4.6,1l-1.7,4l2.3,2.8ZM285.5,535.8l6.9-4.1l1.5-3.7l-1.9-4.9l-5.6,2.6l-2.7,5.2l1.8,4.9ZM315.7,518.5l4.6-1.1l3.7-2.9l0.3-2.9l-3.7-0.7l-5.7,2.4l-1.6,3.6l2.4,1.6ZM331.7,507.5l7.9-1.4l3.2-1.9l1.6-4.9l-4.9-2.6l-6.3,2.4l-3.4,4.1l1.9,4.3Z",
            "ID": "M171.6,80.9l-2.7,10.5l3.2,6.3l-0.4,4.5l4.2,5.3l2.5,1.9l-0.7,5.2l3.9,5.5l0.5,2.9l3.2,2.5l-1.2,4.9l1.7,4.8l-0.5,2.9l-3.1,3.2l-3.4,5.9l0.4,4.1l-3.8,0.2l-3.2,6l0.9,3.4l-6.3,12.9l-4.1,3.1l0.5,6.9l-3.9,0.3l0.5,5.4l1.3,4.9l-4.3,12.3l-5.1,0.8l-2.9,1.7l-3.5-1.8l-5.9,0.5l-4.4-0.8l-7.7,2l-2.5-0.2l-0.9-3.9l-3.9-0.5l-6.7,1.5l-4.9,2.7l-1.9-0.3l-4.7,1.5l-4.5-1.3l-2.4-35.9l7.4-54.6l18.9,2.7l15.2,1.7l13.6,1.2l21.9,1.5",
            "IL": "M585.4,248.1l-0.3-3.7l-1.8-2.3l-0.4-3.6l-4.2-5.2l-0.5-6.3l2.3-3.9l0.2-3.7l-2.7-3.3l-0.6-4.9l3.6-1.9l2.9-5.5l4.1-4l-0.4-2.6l-2.4-2.2l0.2-2.9l-3.9-0.6l-4.4-3.7l-6.9-12l-7.7,0.7l-7.4,0l-22.5,1.2l-0.7,4l1.9,2.6l0.5,2.9l-2.7,2.7l-0.4,3.4l2.5,5.1l-0.2,10.9l-1.9,27.9l-0.4,22.7l0.9,8.1l2.9,4.6l3.4,3.8l0.4,10.6l-2.7,2.5l-0.4,2l1.7,3.5l6.2,5.2l4.5,0.2l3.4-2.6l3.1,0.9l2.6,4.9l6.4,0.9l4.9-0.5l1.4-2.3l0.9-5.4l4.4-4.8l2.2-1l1.5-6.2l3.6-4.5l-0.3-2.9l-2.8-2.5l0.5-5.9l2.1-7.9l-0.2-5.3l1.9-3.7",
            "IN": "M608.5,248.3l-0.3-2.9l0.9-2.9l3.4-3.2l0.3-3.1l-1.5-4.6l-0.5-7.9l1.9-3.9l-1.9-11.5l-1.1-7.4l-1.2-8l-0.7-6.1l-24.2,2.6l-22.7,1.5l0.2,2.9l2.4,2.2l0.4,2.6l-4.1,4l-2.9,5.5l-3.6,1.9l0.6,4.9l2.7,3.3l-0.2,3.7l-2.3,3.9l0.5,6.3l4.2,5.2l0.4,3.6l1.8,2.3l0.3,3.7l0.3,7.2l5.9-0.7l21.4-2.1l16.1-1.2l3.8-0.3",
            "IA": "M525.9,199.6l0.3-4.2l3.2-3.7l0.3-3.5l-3-3l-0.5-5.7l-2.6-6.4l-0.5-3.9l0.3-2.9l-3.8-4.7l-52.7,2.9l-53.2,1.3l-1.1,5.6l3.4,6.9l4.9,4.7l1.2,4.1l-3.4,5.7l-0.5,4.5l2.4,3.5l3.1,6.9l5.2,2.5l3.7,4.5l0.7,4.7l1.9,1.5l3.7-2.9l5.4-0.5l3.2,1.5l3.3-2l5.9,0.9l3.1,3.7l14.4-0.5l44.3-2.4l8.6-0.7l0.1-3.2l2.4-3.7l-2-3.3l-2.9-1l0.2-5.5",
            "KS": "M467.2,303.2l-53.3,1.4l-74.5-1.5l-0.5,36.7l0.6,20.3l58.5-0.7l57.4-2.5l26.3-1.9l-0.3-3.3l-1.7-2.4l1.3-5.2l-1.8-6.1l1.6-6.2l-0.1-6.1l-3.7-4.5l2.5-6.4l-1.3-2.6l-4-1l-1.5-3.1l-3.2-1.3l-2.3-3.6",
            "KY": "M693.4,312.5l-5.8,0.3l-12.9,1.1l-27.5,2.7l-23.6,1.6l-21.5,0.8l-9.6,0.9l0.5,3.9l-5.1,5l-4.7-0.3l-3.2,1.7l-1.4-2.6l-3.9,2l-4,5l0.9,3.7l-4.4,0.3l-2.7,4.1l-4,0.3l-2.8,3.1l-1.8-0.4l-0.2,2.2l-2.7-1.9l-5-0.7l-0.2-3.7l-2.4-0.3l-2.4,2.7l-3.7-1.4l-4.3,3.3l-3.2-2.7l-3.6,0.2l-2.1-2.7l0.9,6l-2.8,4l1.9,3.3l3.4,1.3l1.5,3.1l3.7,0.7l2.2,1.9l4.4-2.6l4.9,1.6l3.3-2.7l3.9,0.9l0.7,2.8l3.7-1.9l3.9,0.6l0.4,2.3l2.9-0.2l2.3-2.1l3.7,1.7l1.3-2.6l3.2-1l0.8-3.5l3.9-2.4l5,3.2l3.6-3.1l4.1-0.6l2.5-2.9l4.3,0.9l2.2,2.7l2.9-3.9l5.6-3.3l1.9-3.7l4.4-3.5l4.7-1.1l3.7-3.7l5.7-0.3l5-3.3l3.9,2.3l3-3l1.3,1.7l2.3-0.9l1.1-3.4l3.9-1.6l0.3-2l-2.4-2.9l4.9-4.2",
            "LA": "M555.5,504.5l-1.7-7.5l-2.9-3.5l0.3-5.3l3.7-2.9l-3.3-1.8l-1.2-4.1l2-4.7l-0.2-3.5l-23.1,0.3l-25.9,0.1l-2.7,5.4l0.6,4.9l2.7,3.1l-0.6,6.4l-2.9-3l-2.9,0.8l-1.7,4.3l-3,1.9l3.7,5.5l0.7,7.5l3.7,3.7l-0.5,6.8l-2.3,4.2l1.4,2.9l-0.7,3.7l4.2,2.5l-1.9,3.3l6.9,0.2l10.7,1.7l10.2,0.7l0.7,3l5.9,0.7l2.7-2.5l3.8,2.2l-1,3.6l2.6,1.7l4.7-2.7l1.1-3l2.6,1.3l-0.9,3.8l4.3,1l0.6-2.3l-2.8-1.7l-0.1-2.9l4-1.9l2.9,3.2l2,0.2l1.2-2.6l2.6-0.2l0.7,2.7l3.4,1l2.3-1.7l-1.4-2.3l0.9-1.7l-3.3-4l3.3-1.3l-0.9-2.9l2.3-0.2l0.2-2.1l-2.7-3.4l6.4-5.4l-6.2-2.9l-7-1.7l-6.3-1.4l-2.9-4.9",
            "ME": "M884.6,68.4l1.8-2.4l1.5-4.7l-2.2-5.9l-1.7,0.3l-1.1,3.1l0.1,4.2l-1.9,4l3.5,1.4ZM852.9,119.5l2.2-2.2l3.4-0.7l3.2-2.5l1.9-2.6l-0.9-2.2l-1.7,0.4l-2.2,2.9l-2.6,0.9l-2.9,2.2l-0.9,2.9l0.5,0.9ZM833.2,53.6l5.4,1.9l3.9,0.2l1.8-1.7l3.3,2.2l3.9,0.9l0.7,3.9l2.2,0.5l0.2-3.6l1.5-0.9l2.9,1.4l-0.3,2.8l3.3,3.9l1.7,5.7l3.1,6.3l-0.7,2l-2.4-0.6l-0.3,3.1l-1.6,0.5l-1,4.8l-2.6,3.4l-4.1,8.1l-3.9,3.1l-1.6-0.2l-2.1,1.8l-2.7-3.3l-0.5-5.2l-5.5-3.5l-1.4-4.2l0.9-2.7l-2.2-4.3l-3.2-4.1l-2.9-0.6l-2,3l-2.2-0.5l-3.9-5.4l-4.2,0.4l-1.5-0.7l-2.2-4.2l-4.7-9.2l2.4-2.1l2.7,0.4l2.8-3.2l1.5-3.5l2.3,0.3l1.9-2.4l5.7,1.2l1.4,5.8l5.9,2.3",
            "MD": "M822.6,249.5l-3.7-8.4l-3.8-4.2l-0.7-4.7l-5.9,1.3l-6.4,0.4l-2.3-3.6l-1.1-3.2l-3.6-0.2l-8.9,2.1l-26.6,5.7l-17.2,3.1l0.9,4.3l-4.9-4.4l-2.9,3.2l-1.7,5l1.7,5.9l3.7,0.9l3.2,2.1l2.7-1.7l2.7-4.7l2.9,0.9l3.4-0.2l1.9-3.9l2.5-1.3l2.4,5.9l4.2-0.4l2.5-2.5l4.9,2.6l-2.1,4.5l0.8,4.1l3.3,2.4l3.5-0.9l4-4.6l1.3,5.9l1.9,1.2l2.5-1l-0.4-4.3l-3.7-3.7l-1-2.9l0.5-3.6l4.6,3.9l2.7,0.7l1.5,3.4l4.4,1.9l2.3-0.7l2.4,2.2l2.9-1.5l2.5,3.7l4.1-0.9l3.6-2.3",
            "MA": "M878.9,164.9l0.5-2l-2.9-0.8l-0.4-3.9l-2.8-0.2l0.9,4.4l4.7,2.5ZM867.9,164.9l2.7-1.3l0.9-1.6l-3.2-0.2l-1.6,1.7l1.2,1.4ZM852.1,185.5l1.9-1.7l2.8-0.7l3.9-3.4l3.9,0.6l4.6-2.5l-2.1-1.9l0.3-2.4l-3.7-0.3l-0.2-2.9l-3.8,1.7l-0.8,2.3l-3.5-0.2l-4.3,0.6l-11.7,2.9l-21.2,5.4l-5.9,1.5l0.9,2.7l3.9,14.2l5.6-1.5l5.7-1.5l3.3-1.5l0.9-3.3l3.4-1.9l2.5,2.9l3.9-0.7l1.9-4.2l4.5-1l1-2.6l3.5,0.7l2.7-2.2",
            "MI": "M627.2,108.3l1.3-2.3l3.1-1.9l5.4-0.9l1.9-1.5l0.5-1.9l4.4-0.2l-1.1,3.5l1.1,1.6l-0.4,1.7l-3.7,1.1l-2.9,2.6l-1.4,3.9l-2.8,3.1l-2.6,0.5l-1.7-0.7l-1.8-2.6l-2.4-1.6l0.5-2l2.6-2.4ZM547.1,148.7l3-5.2l3.4-4.1l3-1.9l3.5-3.9l-0.4-7.5l0.9-3.4l0.5-4.6l-0.7-5.7l-3-4.9l-1.1-5.3l-2-2.7l-3.8-0.8l-0.7-4l-1.9-0.4l-7.9,2.6l-3.2,4.5l-0.6,5.3l2.9,2.5l-1.3,1.4l-4.9,0.7l-1.3,2.2l0.5,2.9l-2.1,0.2l-3.5,3.9l-2.9-0.2l0.3-1.9l2.1-2.4l0.3-3.5l1.2-4.3l-0.4-2.9l-1.7-0.2l-4.1,4.1l-2.6,4.6l-2.4,1.5l-2.5,3.9l-0.4,4.7l-5.6,1.4l-2.3-0.4l-0.5-1.5l4.4-2.1l0.6-4.4l1.3-2.6l-0.5-3.4l-2.9-0.9l-4,0.9l-3.4,1.9l-2.4-0.6l-3.2,1.3l-1.1,2.1l-2.3-0.5l-0.6,3l-5.2,0.7l-0.8,4.9l-2.7,0.7l-1.7-0.5l-1.7-6l-2.5-3.9l-1.5,1.3l0.7,4.5l-1.9,0.9l-2.1-2.1l-2.1,1.4l0.5,4.9l3.2,1.2l0.9,5.6l3.7,1.7l1.7,3.5l-0.3,4.2l1.9,1.6l2.5-2.7l5.4-0.7l0.7,1.5l-3.2,4.3l-0.2,2.7l0.9,0.9l4.5-3l6-1.5l2.3,2l2.8,0.2l5-3.5l5.7-1.1l4.5,1.5l8.9,1.9l4.7,2.1l10.6,1.5l1.5,1.2",
            "MN": "M530.4,76.9l-0.3,7.5l-3.6,2.7l-0.5,7.6l2.4,5.1l3.4,2.2l2.5,6.4l0.7,18.6l0.6,8.7l2.7,5.3l1.2,4.9l-0.3,5.1l-0.3,3.2l-2,3.9l-0.8,5.2l3,3.9l0.5,3.4l52.7-2.9l-0.3-34.9l-3.3-4l-4.9-3.1l-1.4-7.5l-0.1-8.9l1.8-2.1l-0.9-3.7l-4.7-3.3l-0.7-8.6l-3.7-3.1l-0.4-4.9l-5.2,0.4l-5.4,2l-3.9-0.2l-0.8-2.5l-4.9-0.5l-6.1,2.1l-2.9-4.5l-4.9,0.7l-2.2-1.5l-0.5-4.2l-3.2-1.1l-1.1,3.6",
            "MS": "M596.9,485.5l-3.9-0.3l-26.9,1.7l-25.8,1l-2.7,5.4l0.6,4.9l2.7,3.1l-0.6,6.4l-2.9-3l-2.9,0.8l-1.7,4.3l-3,1.9l3.7,5.5l0.7,7.5l3.7,3.7l-0.5,6.8l-2.3,4.2l1.4,2.9l-0.7,3.7l4.2,2.5l27-1.3l3.3-0.2l3.3,4.9l6.3,1.4l7,1.7l1-12.8l2.1-30.6l1.9-14.7",
            "MO": "M556.6,297.7l-0.9-2.7l-0.7-3.5l-57.4,2.5l-58.5,0.7l-0.9,6.9l1.9,4.9l4.1,3.9l4.5,3.5l5.3,1.5l1.5,2.5l0.9,3.5l3.9,4l1.7,4.5l5.4,4.7l0.2,3.7l-3.5,3.2l-0.7,4l2.7,3.9l2.5,2.5l7.1-0.2l40.6-1.2l21.9-0.5l-0.7-5l2.5-2.9l-0.7-3.2l3.3-5.9l4.7-4.2l3.2-1.9l-0.2-2.9l-3.9-4l-0.2-3.7l4.9-8.3l1.7-2.1l1.9-6.7l-0.2-3.1l3.2-2.7",
            "MT": "M296.9,65.2l-0.6,17l1.2,19.6l1.7,22.5l1.4,21.5l-45.6-2.6l-45.5-4.7l-36.1-5.7l-7.4,54.6l-11.9-1.7l-1.2-3.9l-3.5-0.9l-1.2-2l-2.3,0.3l-1.6,1.5l-2.6-1.5l-0.9-2.5l-3.6,0.4l-3.7-6.9l-0.7-1.3l-4.9-0.5l-1.6-4.1l-3.6-0.3l-1.9-2.2l0.3-2.9l-2-2.3l-0.4-4.7l-3.4-3.1l0.3-5l-6.9-12.1l-2.5,0.3l-2.1-1.7l1.2-4.6l-1.7-2.7l-0.1-4.6l-4-2.4l-0.2-1.4l0.7-3.5l-2.9-2l-1.1-3.3l2.1-3.8l-0.9-2.4l2-2.7l58.7,9.1l51.7,5.9l51.7,3.9",
            "NE": "M415.3,205.8l-52.8,0.9l-66.9-2l-1.7,37.1l48.7-1.4l54.3-3l18.9-1.5l0.3-11.9l-1-18.2",
            "NV": "M140.2,184.9l-25.5,87.6l-7.7,26.9l-13.8,44.2l29,3.8l17.7-2.9l-7.2-42l-5.4-31.6l-7.7-46.7l-0.4-4.2l3.5-0.3l-1.9-2.7l0.1-4.4l-0.9-2.4l1.5-3.1l-0.2-0.6l-24.2-5l17.7-16.7",
            "NH": "M868.9,94.1l-0.4-3.2l-3.1-0.5l-0.6-3.2l-2.9-6l1.9-3.5l-0.4-4l-0.9-5l-3.2-1.9l-1.4,5.5l-5.7-1.2l-1.9,2.4l-2.3-0.3l0.2,3.6l-1.1,4.4l1.7,3.7l-0.4,5.7l-1.2,9.3l0.9,3.9l-1.7,2.4l0.7,5.4l-0.5,4.1l1.5,3.1l0.2,7.5l-3.2,1.3l-0.4,2.8l4.2,0.9l7.6-2.2l1.8-2.5l0.9-5.1l2.5-3l0.4-4.5l2.3-7.2l3.9-7.6l-0.3-3.5l1.9-1.7l0.5-5.2",
            "NJ": "M823.9,199.6l-3.3-3.5l-2.3,1.5l-2.7,4.7l-0.9,3.2l1.7,2.4l-2.2,2.6l-0.2,4.2l2.5,2.2l-0.3,5.6l1.1,4.5l2.3,2.7l2.4,5.7l4.9,5.2l4.6,1.9l3.2-0.7l2.4-3.9l0.9-2.2l-0.9-3.7l-2.6-1.9l-0.9-3.9l-3.7-2.6l-0.7-5.2l-1.4-5.4l0.5-3.5l-2.9-5.2l-1.5-1.7",
            "NM": "M274.6,396.9l-6.3-53.1l-8.4-57l21.9-2.9l39.1-6.1l36.5-6.8l3.9,20.9l4.9,29.2l5.1,34.9l3.4,21l-41,4.5l-44.4,3.2l-3.8-2.8l0.3-3.2l-5.7-1.9l-5.5,0.5l0.1,18.6",
            "NY": "M848.1,167.3l-3.9,3.4l-3.9-0.6l-4.6,2.5l-2.8,0.7l-1.9,1.7l-5.6,1.5l-5.7,1.5l-5.6,1.5l-11.7,2.9l-19.6,4.5l-14.2,3.1l-2.5-10l-0.7-1.5l-1.6,0.9l-2.6,3.7l-5.4,2.6l-3.9,0.6l-5.9,2.7l-7.2,2.1l-0.5,2l2.1,4.5l-3.5,3.1l-4.5,2.1l-6.9,1.3l-7.4-0.5l-5.7,2.2l-5.2,4.5l-2.3,5.5l-1.3,4.7l0.2,3.9l3.4,2l2.2-0.4l3.7-3.2l2.5,1.3l11.4-1.1l29.5-5.5l4.9-1l5.7-3.3l4.1-4.5l4.9-4.2l3.9-1.8l4.8,1.7l3.4-2.3l3.3-2.3l-0.3-4.2l1.9-1.9l0.3-3.5l4.7,1.9l2.4-2.2l-1.7-1.6l2.9-2.9l0.8-2.7l5.6-4.4l2.9,0.3l1.1,3.5l2.9-0.3l1.1-1.5l5.5-2.7l3.8,1.6l4.3-3.7l1.4-3.5l3.2-1.3l-0.2-7.5l-1.5-3.1l0.5-4.1l-0.7-5.4l1.7-2.4",
            "NC": "M825.9,323.9l-9.6,1.6l-21.9,3.4l-36.9,5.5l-24.4,2.6l-17.6,2.3l-16.7,1l0.4,4.1l-4,5.2l0.2,4l3.9,2.5l1.4,2.9l-0.6,6.5l3.5,4.7l5.1-0.5l3.7-2.5l3.5,0.5l2.5-4l4.7-3.2l3.9-1.7l1-3.6l4.9-0.5l3.7-2.9l6.5-1l3.2-3.2l4.4-0.2l0.9-1.5l4.2,0.2l4.5-2.9l5.5-1l2.7-1.5l8.4,3.2l4.2-2.4l4.2-4.2l7.6-0.2l5.2,1.4l4.2,2.1l2.4-0.2l1.7-6.5l3.2-4.5l3.4-0.7",
            "ND": "M412.2,76.9l-1,18.7l-0.9,15.3l0.5,14.8l0.4,10.9l-51.7-2.5l-51.7-3.9l-11.2-1.5l1.4-21.5l-1.7-22.5l-1.2-19.6l0.6-17l52.3,2.9l63.2,2.9",
            "OH": "M679.9,217.3l-2.4,1.7l-5.3,2.7l-4.3,4.2l-4.2,6.5l-3.8,3l-4.2,1.1l-3.7-0.9l-2.9,0.2l-2.5,2.5l-4.3-2.5l-4.2-0.4l-3.7-2.6l-0.9,2.9l0.3,2.9l-3.8,0.3l-16.1,1.2l-21.4,2.1l-5.9,0.7l1.1,7.5l3.3,14.8l2.1,13.3l2.3,16.5l1.6,8.7l2.7,5.1l3.9,1.5l1.9-3.7l3.5,0.7l2.2,2.3l2.5-0.3l4.4-2.1l3.3,2.3l1.7-3.7l4.2,0.2l3.5-1.2l5.2,1.8l2.6-2.9l1.5,1.9l1.9-0.5l1.9-3.9l2.5,1.5l3.2,0.4l1.9-2.7l2.9,2.5l3.5-3.4l4.9-0.3l3.9-3.9l2.9,0.8l0.2-5.5l1.3-3.7l3.2-2.9l0.1-6.9l3.5-6.4l-0.7-1.7l2.2-7.7l3.2-3.5l1-5.9l-1.9-2.9l1.7-4.5l-4.5-0.7",
            "OK": "M460.7,356.1l-61.9,1.3l-55.9,0l0.3,11.2l-2.9,5.7l-2.1,1.5l1.5,3.7l1.3,4.5l2.6,2.3l-0.2,2.7l4.5,0l-0.5,3.2l1.3,0.2l0.5-2.9l2.2,0.7l0.7,3.6l1.5-2l1.9,2.5l-0.2,2.9l2.2,1.7l1.7-2.9l2.5,0.9l1,2.1l0.9-2l2.4,1.7l-0.9,2l3.2,1.4l2.5-3.2l2.2,1.4l0.2,2.7l1.5,0.2l1.7-2.4l1.9,2.4l3.3-0.2l1.3,1.9l2.2-1.7l-0.2-2.4l2.9-0.3l2.4,1.9l1-1.9l2.7,0.5l0.9-2.7l3.2,1.2l1.5-1.2l-0.5-2.7l3.5-0.7l0.3,3l3.6-0.4l1-3.3l1.9,1l1.2-1.5l-0.2-3.5l3.5,0.9l1.9-2.2l0.9,1.5l3.5-1.5l0.2,2.4l4.4-0.2l1.5,2.1l2.4-2.6l2.3,0.7l-0.2-2.4l2-2.1l-0.9-1.7l3.4-0.7l1.7,2.4l1.4-3.1l3.7-0.5l2.4,1.2l2.9-2.6l0.2-11.5l25.2-0.7l27.2-1.7l-1.7-14.8l-0.9-9.9",
            "OR": "M122.5,168.2l-17.7,16.7l-21.7-4.5l-32.8-7.9l-11.9-2.9l-2.6,9.2l-3.9,7.6l0.6,3.5l-3.9,5.3l-4.9,2.9l-0.7,6.3l-3.6,6.5l1,4.7l-0.5,6.5l-3.9,0.7l0.8,6.3l35.9-4.2l35.7-5.2l25.5-87.6",
            "PA": "M815.9,192.8l-2.1-11.2l-3.2-15.7l-24.6,5.1l-51.9,9.9l-6.1,0.9l2.4,6.3l0.7,3.9l1.9,1.3l0.7,6.9l5,4.9l3.7-0.5l2.5-2.9l2.5,0.9l5.4-0.5l4.9,3.1l3.2-0.2l3.2-3.5l2.5,0.5l3,2.9l4.5-3.5l5.1,3.6l4.4-2.7l5.2,3.2l4.7-2.6l3.5,0.3l4.4-2l2.7,0.7l1.5,1.5l4.2-2l3.4,0.9l2.4-1.5l3.3,3.5",
            "RI": "M869.9,177.6l-1.5-6.4l-0.7-4.2l-6.7,1.9l1,3.1l3.2,6.6l3.7,1l1-2",
            "SC": "M739.6,386.4l-3.9-2.6l-3.7,0.9l-4.5-2.1l-3.9,1.7l-4.5-1.1l-4,1.9l-2.5-1.5l-1.9,1.5l-1.9-0.7l-2.8,2.9l-3.2-1.9l-3.4,0.2l0.4,4.1l-4,5.2l0.2,4l3.9,2.5l1.4,2.9l-0.6,6.5l3.5,4.7l5.1-0.5l3.7-2.5l3.5,0.5l2.5-4l4.7-3.2l3.9-1.7l1-3.6l4.9-0.5l3.7-2.9l6.5-1l3.2-3.2l4.4-0.2l0.9-1.5l-2.3-5.9l-7.2-0.8l-6.5-3.5",
            "SD": "M412.7,136.5l-0.4-10.9l-0.5-14.8l0.9-15.3l1-18.7l-52.7-0.5l-66.1-2.9l-1.1,37.4l66.9,2l52.8-0.9l0.2,3.7l-0.3,3.5l-2.5,3.7l-0.3,4.9l-3.3,7.9l-0.7,4.7l6.2-0.3",
            "TN": "M693.8,341.8l-12.9,1.1l-27.5,2.7l-23.6,1.6l-21.5,0.8l-21.2,1.1l-28.9,1.5l-6.1,5.3l-5.9,0.2l-5.4,3.7l0.5,2.1l6.2,0.8l-0.4,2.7l-4.9,3.7l-3.4,3.7l-5.5,2.2l-1.5,3.6l-5.2,4.9l-2.4,2.5l2,3.4l42.7-3.6l11.3-1.2l16.9-1.7l35.3-4l2.4-0.5l0.1-4.2l4.9-0.5l2.5-3.5l3.4-1.2l2.2,0.5l0.5-3.3l5.7-1.9l3.3-2.5l2.7,0.3l3.1-4.5l3.4-0.2l3.4-2.9l7.2-0.9l2.4-3.6l3.9-3l3.5-3.9l2.9-0.3l-0.4-4.1",
            "TX": "M455.8,544l-0.5-3.2l-2.9-5l-1.1-4.2l-2.6-3.5l0.4-2.8l-1.7-6.5l-2.5-3.6l-2.9-1.9l-0.6-4.1l-0.4-5.7l-0.8-2.9l-1.7-1.5l0.7-4.5l-1.5-1.6l-0.9-3.3l-2.5-3.2l-1.9-1.1l0.2-3.9l-1.1-2.9l0.2-3.7l-2.3-2.5l0.3-2.1l-5.3-6.7l-2.5-1.7l-1.5-3.7l-4.5-3.3l-6.6-11.6l-2.6-1.2l-6.9-4.4l-5.1-1.7l-4.7-0.7l-2.6-3.3l-6.9-2.5l-6.2-1.4l-2.5-3.2l-3.3-0.5l-2.8-6l-3.9-0.2l-1.3-3.4l-3.6-3.3l-0.7-4.9l0.9-7.2l-2.7-0.5l-5.1,2.3l-3.3,4.7l-0.3,3.5l-3.7,6.5l-3.4,0.2l-3.3,2.5l-6.4,2.9l-2.2,3.9l-5.9,5.6l-2.9,1.5l-0.9,2.5l-5.2,3l-6.9,1.4l-7.3,5.1l-5.6,1.6l-1.1,1.9l-4.9,1.9l-2.1,2.1l-0.3,3.4l-5.8,0.2l-6.9,4.4l-4.7,4.7l-1.9,5.5l0.9,2l-3.5,1l-4.9,5.9l0.4,2l-2.4,5.2l-0.4,4.9l2.3,2.4l-0.7,6.2l-3.5,6.5l1.2,3l-0.7,4l0.5,4.4l2.7,3.1l-0.3,3.9l1.6,3.1l-2,5.4l1.3,4.3l2.1,2l-0.9,2.1l1.9,3.4l2.4,0.2l1.7,5.1l3.5,3.1l0.5,2.6l3.1,0.7l3.4,3.3l2.2-0.5l2.9,1.5l1.6,3.6l3.9,0.5l2.5,2.4l2.8-1.5l4.9,1.7l5.7-2.2l2.4,0.7l3,3.9l2.5-1.5l1.1,1.4l-1.5,5.7l1.7,1.6l-1.5,2.1l0.5,1.4l2.2-1.5l2.6,3.2l4.1,1.2l4.6,3.2l5.4,0.4l1.4,2.8l4.2,0.3l4.1,2.1l2.2,3.3l1.7,4.2l4.9-2.8l8.2-2.7l3.4-1.7l5.3-1.2l6.2-4.3l3.9-1.9l3.2-2.9l5.3-2.6l7.9-6.6l4.4-3.7l3.4-4l3.9-2.5l0.4-2.9l1.7-3.4l-0.3-3.5l-2.3-1.7l1.5-6.4l2.4-1.7l-0.9-1.2l1.2-6.1l2.3-2l1.5-4.9l2.4-1.3l2-4.3l0.8-5.9",
            "UT": "M236.3,284.8l-36.5,6.8l-39.1,6.1l-21.9,2.9l7.7-26.9l25.5-87.6l-0.2-0.6l24.2,5l21.7,4.5l32.8,7.9l-4.4,35.4l-9.8,52.5",
            "VT": "M843.4,93.7l-5.9-2.3l-1.4-5.8l-5.7-1.2l-2.8,3.2l-2.7-0.4l-2.4,2.1l-0.6,7.6l0.7,2.4l-3.5,5.5l0.1,6.9l-0.7,7.9l2,3.7l-0.2,7.1l-0.1,9.9l2.3,0.1l0.3-2.5l3.6-1l0.3-3.2l4.5-1.2l0.5-2.9l4.8-5.9l0.9-4.3l5.5-2.1l-0.7-5.8l-0.5-5.9l0.9-4.7l1.3-4.2l-0.2-4.9",
            "VA": "M809.4,297.7l-1.4-1.2l-2.5,0.4l-2.5-2.9l1.4-1.4l1.2-3.8l-1.5-4l-3-2.6l-0.7-3.4l-2.8-3l-2.5-1.4l-3.9,4.9l0.2,3.9l-3.5,0l-5.9-0.5l-5.9,2.4l-5.8,0.4l-6.5,4.2l-5.2-0.5l-5.2,0.9l-3.9,3.6l-4.7,0.9l-3.4,2.7l-2.9-1.7l-2.7,0.7l-1.7,2.7l-8.4,0.9l-9.7,1.9l-21.9,2.7l-23.7,2.5l2.6,8.5l8.9-0.4l21.2-1.1l21.5-0.8l23.6-1.6l27.5-2.7l12.9-1.1l5.8-0.3l1.3,1.7l1.4-1.4l0.2-3.9l4.7,1.5l1.9-1.7l4.5,1.5",
            "WA": "M131.7,27.8l-3.2-0.9l-5.5,0.8l-5.9-0.6l-4.2,1.3l-6.2-0.4l-2.3,0.5l-1.5,2.9l-5.5,0.2l-1.5,4.3l0.5,4.1l2.1,2.5l0.2,3.5l0.7,5.5l2.2,0.3l1.9,3.1l2.7-0.2l3.3,2.7l4.4,0.7l1.5,2.9l-0.9,3.5l2.5,2.9l-0.4,2l-1.9-0.2l-3.9-3.4l-1.1,0.9l0.9,3.7l-3.2,0.3l-0.7-2.7l-1.5,0.9l-0.1,2.7l2.4,1.4l-1.5,3.7l1.9,4.3l-4.6,1.9l2.5,3.7l35.9,7.8l44.6,8.2l-7.4-54.5l-36.1-5.7l-18.3-4.4l-3.6,1l-1.4-9.9",
            "WV": "M741.5,241.9l-0.7-4.9l-3.5-4.3l-0.7-6.2l0.8-5.7l-1.9-5l-3.6,0.3l-3.9,2.5l-2.4,3.1l-3.5-0.4l-3.9-4.4l-2.6-0.7l-1.9,1l0.8,5.5l-1.9,6.6l-3.5,1.7l-3.5,4.2l-1.9,0.7l-0.9-4.3l-3.1,3.6l-1.7,3.4l0.3,5.2l-4.6,8l-3.3,3.9l0.6,3.3l-1.5,3.3l2.7,3.3l3.5-0.7l4.7-5.5l0.9-2.4l3.1-1.7l1.5,1.5l-0.3,3.5l3.2,1.9l2.3-4.7l3.1-2.5l0.5,3.5l2.7-0.7l2.9,1.7l3.4-2.7l4.7-0.9l3.9-3.6l5.2-0.9l-1.1-3.9l2.7-0.4l0.8-2.6l3.9-2.3",
            "WI": "M558.5,110.9l1.1-2.9l3.3-4.3l1.1-3.6l-1.5-3.9l-0.1-5.6l-2.1-6.4l-2.2-1.4l-0.3-1.9l1.1-2.6l-0.6-4.4l-2.1-1.9l1.4-3.9l-1-4.7l-1.4,0.5l-2.3,2.7l-3.4,3.7l-0.9,3.7l-2.9,0.5l-0.3,3.4l-3.8,4l-0.9-0.9l0.2-2.7l3.2-4.3l-0.7-1.5l-5.4,0.7l-2.5,2.7l-1.9-1.6l0.3-4.2l-1.7-3.5l-3.7-1.7l-0.9-5.6l-3.2-1.2l-0.5-4.9l-0.7-4.5l-0.6-8.7l-0.7-18.6l-2.5-6.4l-3.4-2.2l-2.4-5.1l-3.9,0.9l-4.3,1.3l-1.7,3.7l-4.6,3.2l-1.9,3.6l-0.2,5.4l1.9,3.9l2.3,2l-0.4,3.4l3.1,2.2l-0.7,5.4l0.3,3.4l-0.6,4l-2.5,6.1l0.9,2.5l-0.8,2.9l-1.3-0.3l-0.8-2.5l-1.9,1.9l1.2,4.3l-0.9,6.3l2.7,1.5l2.4-0.6l0.5,17.5l1.7,12.3l1.5,10.3l3.4,4l2.9,1.3l2.5-0.5l4.9-2.5l8.6-1.5l2.2-1.9l6.4-2.2l2.9,0.7l5.2-3.6l2.3,0.4l5.6-1.4",
            "WY": "M296.2,145.7l1.7,22.9l2.5,29.7l-47.7,2.1l-50.7,4.3l-46.2,5.4l-4.4,35.4l47.9-7.9l35-5.1l53.4-5.9l7.1-62.9l2.2-18.2l-0.8-0.3"
        };

        // Utility functions
        const shuffle = arr => {
            const a = [...arr];
            for (let i = a.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [a[i], a[j]] = [a[j], a[i]];
            }
            return a;
        };

        const getRandomChoices = (correct, count = 2) => {
            const others = STATES_DATA.filter(s => s.name !== correct.name);
            const choices = shuffle(others).slice(0, count);
            choices.push(correct);
            return shuffle(choices);
        };

        const levenshtein = (a, b) => {
            const m = a.length, n = b.length;
            const dp = Array(m + 1).fill(null).map(() => Array(n + 1).fill(0));
            for (let i = 0; i <= m; i++) dp[i][0] = i;
            for (let j = 0; j <= n; j++) dp[0][j] = j;
            for (let i = 1; i <= m; i++) {
                for (let j = 1; j <= n; j++) {
                    dp[i][j] = a[i-1] === b[j-1] ? dp[i-1][j-1] : 1 + Math.min(dp[i-1][j-1], dp[i][j-1], dp[i-1][j]);
                }
            }
            return dp[m][n];
        };

        const checkAnswer = (input, correct) => {
            const cleanInput = input.trim().toLowerCase();
            const cleanCorrect = correct.toLowerCase();
            if (cleanInput === cleanCorrect) return true;
            const state = STATES_DATA.find(s => s.name === correct);
            if (state && cleanInput === state.id.toLowerCase()) return true;
            const maxDist = correct.length > 8 ? 2 : 1;
            return levenshtein(cleanInput, cleanCorrect) <= maxDist;
        };

        const formatTime = ms => {
            const s = Math.floor(ms / 1000);
            const m = Math.floor(s / 60);
            const sec = s % 60;
            return `${m}:${sec.toString().padStart(2, '0')}`;
        };

        // Storage helpers
        const loadProgress = () => {
            try {
                return JSON.parse(localStorage.getItem('usStatesProgress') || '{}');
            } catch { return {}; }
        };

        const saveProgress = (data) => {
            localStorage.setItem('usStatesProgress', JSON.stringify(data));
        };

        const loadBestTimes = () => {
            try {
                return JSON.parse(localStorage.getItem('usStatesBestTimes') || '{}');
            } catch { return {}; }
        };

        const saveBestTime = (mode, time) => {
            const times = loadBestTimes();
            if (!times[mode] || time < times[mode]) {
                times[mode] = time;
                localStorage.setItem('usStatesBestTimes', JSON.stringify(times));
                return true;
            }
            return false;
        };

        // Components will continue in next section...
        const ENCOURAGING_MESSAGES = [
            "Great job!", "Awesome!", "You got it!", "Perfect!",
            "Way to go!", "Excellent!", "Nice work!", "Super!"
        ];

        const GENTLE_MESSAGES = [
            "Almost!", "Good try!", "Keep going!", "You'll get it!"
        ];

        // Confetti Component
        const Confetti = ({ active }) => {
            if (!active) return null;
            const pieces = useMemo(() => {
                const colors = ['#ff6b6b', '#ffd93d', '#6bcb77', '#4d96ff', '#ff9ff3'];
                return Array.from({ length: 30 }, (_, i) => ({
                    id: i,
                    color: colors[i % colors.length],
                    left: `${Math.random() * 100}%`,
                    delay: `${Math.random() * 0.5}s`
                }));
            }, []);

            return (
                <div className="confetti-container">
                    {pieces.map(p => (
                        <div key={p.id} className="confetti-piece"
                            style={{ left: p.left, backgroundColor: p.color, animationDelay: p.delay }} />
                    ))}
                </div>
            );
        };

        // Feedback Overlay
        const FeedbackOverlay = ({ show, isCorrect, correctAnswer, onClose }) => {
            useEffect(() => {
                if (show) {
                    const timer = setTimeout(onClose, 1500);
                    return () => clearTimeout(timer);
                }
            }, [show, onClose]);

            if (!show) return null;

            const message = isCorrect
                ? ENCOURAGING_MESSAGES[Math.floor(Math.random() * ENCOURAGING_MESSAGES.length)]
                : GENTLE_MESSAGES[Math.floor(Math.random() * GENTLE_MESSAGES.length)];

            return (
                <div className={`feedback-overlay ${isCorrect ? 'correct' : 'incorrect'}`}>
                    <Confetti active={isCorrect} />
                    <div className="feedback-icon">{isCorrect ? '✓' : '✗'}</div>
                    <div className="feedback-message">{message}</div>
                    {!isCorrect && <div className="feedback-answer">It's <strong>{correctAnswer}</strong></div>}
                </div>
            );
        };

        // Check Results Modal
        const CheckResults = ({ correct, total, onClose }) => (
            <div className="check-results">
                <div className="check-results-card">
                    <h3>Progress Check</h3>
                    <div className="score-big">{correct}/{total}</div>
                    <div className="score-label">states correct so far</div>
                    <button className="continue-btn" onClick={onClose}>Continue</button>
                </div>
            </div>
        );

        // US Map Component
        const USMap = ({ onSelect, answers, selectedId, showResults, correctStates }) => {
            const getStateClass = (id) => {
                let cls = 'state-path';
                if (selectedId === id) cls += ' selected';
                if (showResults && answers[id]) {
                    cls += correctStates.has(id) ? ' correct' : ' incorrect';
                } else if (answers[id] && !showResults) {
                    cls += ' answered';
                }
                return cls;
            };

            return (
                <svg viewBox="0 0 960 600" className="us-map">
                    {STATES_DATA.map(state => (
                        <path
                            key={state.id}
                            d={STATE_PATHS[state.id]}
                            className={getStateClass(state.id)}
                            onClick={() => onSelect(state)}
                        />
                    ))}
                </svg>
            );
        };

        // Single State Display
        const SingleState = ({ stateId }) => {
            const path = STATE_PATHS[stateId];
            // Calculate bounding box for centering
            return (
                <svg viewBox="0 0 960 600" className="single-state-svg" preserveAspectRatio="xMidYMid meet">
                    <path d={path} className="state-path" />
                </svg>
            );
        };

        // Mode Selector
        const ModeSelector = ({ onSelect, timerEnabled, onTimerToggle }) => (
            <div>
                <div className="timer-toggle">
                    <label>Timer:</label>
                    <div className={`toggle-switch ${timerEnabled ? 'active' : ''}`} onClick={onTimerToggle} />
                    <span>{timerEnabled ? 'On' : 'Off'}</span>
                </div>
                <div className="mode-grid">
                    <div className="mode-card" onClick={() => onSelect('fullMap')}>
                        <span className="emoji">🗺️</span>
                        <span className="title">Full Map Label</span>
                        <span className="difficulty">Hardest</span>
                    </div>
                    <div className="mode-card" onClick={() => onSelect('singleState')}>
                        <span className="emoji">🔍</span>
                        <span className="title">Single State ID</span>
                        <span className="difficulty">Medium-Hard</span>
                    </div>
                    <div className="mode-card" onClick={() => onSelect('nameChoices')}>
                        <span className="emoji">📝</span>
                        <span className="title">Name from Choices</span>
                        <span className="difficulty">Medium</span>
                    </div>
                    <div className="mode-card" onClick={() => onSelect('shapeChoices')}>
                        <span className="emoji">🎯</span>
                        <span className="title">Shape from Choices</span>
                        <span className="difficulty">Easiest</span>
                    </div>
                    <div className="mode-card random" onClick={() => onSelect('random')}>
                        <span className="emoji">🎲</span>
                        <span className="title">Random Mode</span>
                        <span className="difficulty">Mix of all types</span>
                    </div>
                </div>
            </div>
        );

        // Full Map Quiz Mode
        const FullMapQuiz = ({ onComplete, timerEnabled, bestTime }) => {
            const [answers, setAnswers] = useState({});
            const [selected, setSelected] = useState(null);
            const [input, setInput] = useState('');
            const [showCheck, setShowCheck] = useState(false);
            const [checkResult, setCheckResult] = useState(null);
            const [startTime] = useState(Date.now());
            const [elapsed, setElapsed] = useState(0);
            const inputRef = useRef();

            useEffect(() => {
                if (timerEnabled) {
                    const interval = setInterval(() => setElapsed(Date.now() - startTime), 100);
                    return () => clearInterval(interval);
                }
            }, [timerEnabled, startTime]);

            const handleSelect = (state) => {
                setSelected(state);
                setInput(answers[state.id] || '');
                setTimeout(() => inputRef.current?.focus(), 100);
            };

            const handleSubmit = () => {
                if (!selected || !input.trim()) return;
                setAnswers(prev => ({ ...prev, [selected.id]: input.trim() }));
                setSelected(null);
                setInput('');
            };

            const handleCheck = () => {
                const correctSet = new Set();
                Object.entries(answers).forEach(([id, answer]) => {
                    const state = STATES_DATA.find(s => s.id === id);
                    if (state && checkAnswer(answer, state.name)) {
                        correctSet.add(id);
                    }
                });
                setCheckResult({ correct: correctSet.size, total: 50, correctStates: correctSet });
                setShowCheck(true);
            };

            const handleReset = () => {
                setAnswers({});
                setSelected(null);
                setInput('');
            };

            const handleFinish = () => {
                const correctSet = new Set();
                Object.entries(answers).forEach(([id, answer]) => {
                    const state = STATES_DATA.find(s => s.id === id);
                    if (state && checkAnswer(answer, state.name)) {
                        correctSet.add(id);
                    }
                });
                const isNewRecord = timerEnabled && saveBestTime('fullMap', elapsed);
                onComplete(correctSet.size, 50, elapsed, isNewRecord);
            };

            const answeredCount = Object.keys(answers).length;

            return (
                <div className="quiz-container">
                    <div className="quiz-header">
                        {timerEnabled && (
                            <div className="timer-display">
                                <span className="timer-current">⏱️ {formatTime(elapsed)}</span>
                                {bestTime && <span className="timer-best">🏆 {formatTime(bestTime)}</span>}
                            </div>
                        )}
                    </div>
                    <div className="progress-section">
                        <div className="progress-bar">
                            <div className="progress-fill" style={{ width: `${(answeredCount / 50) * 100}%` }} />
                        </div>
                        <div className="progress-text">{answeredCount}/50 states labeled</div>
                    </div>
                    <div className="map-container">
                        <USMap
                            onSelect={handleSelect}
                            answers={answers}
                            selectedId={selected?.id}
                            showResults={showCheck}
                            correctStates={checkResult?.correctStates || new Set()}
                        />
                    </div>
                    {selected && (
                        <div className="input-area">
                            <div className="input-prompt">What state is this? ({selected.id})</div>
                            <input
                                ref={inputRef}
                                type="text"
                                className="state-input"
                                value={input}
                                onChange={e => setInput(e.target.value)}
                                onKeyDown={e => e.key === 'Enter' && handleSubmit()}
                                placeholder="Type state name..."
                                autoComplete="off"
                                autoCapitalize="off"
                            />
                            <button className="submit-button" onClick={handleSubmit} disabled={!input.trim()}>
                                Save Answer
                            </button>
                        </div>
                    )}
                    <div className="action-buttons">
                        <button className="action-button check" onClick={handleCheck}>Check Work</button>
                        <button className="action-button reset" onClick={handleReset}>Reset</button>
                    </div>
                    {answeredCount === 50 && (
                        <button className="submit-button" onClick={handleFinish} style={{ marginTop: '16px' }}>
                            Finish Quiz
                        </button>
                    )}
                    {showCheck && checkResult && (
                        <CheckResults
                            correct={checkResult.correct}
                            total={checkResult.total}
                            onClose={() => setShowCheck(false)}
                        />
                    )}
                </div>
            );
        };

        // Single State Quiz
        const SingleStateQuiz = ({ onComplete, timerEnabled, bestTime }) => {
            const [queue] = useState(() => shuffle([...STATES_DATA]));
            const [index, setIndex] = useState(0);
            const [input, setInput] = useState('');
            const [correct, setCorrect] = useState(0);
            const [feedback, setFeedback] = useState(null);
            const [startTime] = useState(Date.now());
            const [elapsed, setElapsed] = useState(0);
            const inputRef = useRef();

            useEffect(() => {
                if (timerEnabled) {
                    const interval = setInterval(() => setElapsed(Date.now() - startTime), 100);
                    return () => clearInterval(interval);
                }
            }, [timerEnabled, startTime]);

            useEffect(() => {
                inputRef.current?.focus();
            }, [index]);

            const current = queue[index];

            const handleSubmit = () => {
                if (!input.trim()) return;
                const isCorrect = checkAnswer(input, current.name);
                if (isCorrect) setCorrect(c => c + 1);
                setFeedback({ isCorrect, correctAnswer: current.name });
            };

            const handleNext = () => {
                setFeedback(null);
                setInput('');
                if (index + 1 >= 50) {
                    const isNewRecord = timerEnabled && saveBestTime('singleState', elapsed);
                    onComplete(correct + (feedback?.isCorrect ? 0 : 0), 50, elapsed, isNewRecord);
                } else {
                    setIndex(i => i + 1);
                }
            };

            if (index >= 50) return null;

            return (
                <div className="quiz-container">
                    <div className="quiz-header">
                        {timerEnabled && (
                            <div className="timer-display">
                                <span className="timer-current">⏱️ {formatTime(elapsed)}</span>
                                {bestTime && <span className="timer-best">🏆 {formatTime(bestTime)}</span>}
                            </div>
                        )}
                    </div>
                    <div className="progress-section">
                        <div className="progress-bar">
                            <div className="progress-fill" style={{ width: `${((index + 1) / 50) * 100}%` }} />
                        </div>
                        <div className="progress-text">{index + 1}/50</div>
                    </div>
                    <div className="single-state-container">
                        <SingleState stateId={current.id} />
                    </div>
                    <div className="input-area">
                        <div className="input-prompt">What state is this?</div>
                        <input
                            ref={inputRef}
                            type="text"
                            className="state-input"
                            value={input}
                            onChange={e => setInput(e.target.value)}
                            onKeyDown={e => e.key === 'Enter' && (feedback ? handleNext() : handleSubmit())}
                            placeholder="Type state name..."
                            autoComplete="off"
                            autoCapitalize="off"
                            disabled={feedback !== null}
                        />
                        <button
                            className="submit-button"
                            onClick={feedback ? handleNext : handleSubmit}
                            disabled={!feedback && !input.trim()}
                        >
                            {feedback ? 'Next' : 'Submit'}
                        </button>
                    </div>
                    <FeedbackOverlay
                        show={feedback !== null}
                        isCorrect={feedback?.isCorrect}
                        correctAnswer={feedback?.correctAnswer}
                        onClose={handleNext}
                    />
                </div>
            );
        };

        // Name Choices Quiz
        const NameChoicesQuiz = ({ onComplete, timerEnabled, bestTime }) => {
            const [queue] = useState(() => shuffle([...STATES_DATA]));
            const [index, setIndex] = useState(0);
            const [choices, setChoices] = useState(() => getRandomChoices(queue[0]));
            const [correct, setCorrect] = useState(0);
            const [feedback, setFeedback] = useState(null);
            const [selected, setSelected] = useState(null);
            const [startTime] = useState(Date.now());
            const [elapsed, setElapsed] = useState(0);

            useEffect(() => {
                if (timerEnabled) {
                    const interval = setInterval(() => setElapsed(Date.now() - startTime), 100);
                    return () => clearInterval(interval);
                }
            }, [timerEnabled, startTime]);

            const current = queue[index];

            const handleChoice = (choice) => {
                if (feedback) return;
                setSelected(choice.id);
                const isCorrect = choice.id === current.id;
                if (isCorrect) setCorrect(c => c + 1);
                setFeedback({ isCorrect, correctAnswer: current.name });
            };

            const handleNext = () => {
                setFeedback(null);
                setSelected(null);
                if (index + 1 >= 50) {
                    const isNewRecord = timerEnabled && saveBestTime('nameChoices', elapsed);
                    onComplete(correct, 50, elapsed, isNewRecord);
                } else {
                    const nextIndex = index + 1;
                    setIndex(nextIndex);
                    setChoices(getRandomChoices(queue[nextIndex]));
                }
            };

            return (
                <div className="quiz-container">
                    <div className="quiz-header">
                        {timerEnabled && (
                            <div className="timer-display">
                                <span className="timer-current">⏱️ {formatTime(elapsed)}</span>
                                {bestTime && <span className="timer-best">🏆 {formatTime(bestTime)}</span>}
                            </div>
                        )}
                    </div>
                    <div className="progress-section">
                        <div className="progress-bar">
                            <div className="progress-fill" style={{ width: `${((index + 1) / 50) * 100}%` }} />
                        </div>
                        <div className="progress-text">{index + 1}/50</div>
                    </div>
                    <div className="single-state-container">
                        <SingleState stateId={current.id} />
                    </div>
                    <div className="input-prompt" style={{ textAlign: 'center', marginBottom: '16px' }}>
                        What state is this?
                    </div>
                    <div className="choices-container">
                        {choices.map(choice => (
                            <button
                                key={choice.id}
                                className={`choice-button ${
                                    feedback && choice.id === current.id ? 'correct' : ''
                                } ${feedback && selected === choice.id && choice.id !== current.id ? 'incorrect' : ''}`}
                                onClick={() => handleChoice(choice)}
                                disabled={feedback !== null}
                            >
                                {choice.name}
                            </button>
                        ))}
                    </div>
                    <FeedbackOverlay
                        show={feedback !== null}
                        isCorrect={feedback?.isCorrect}
                        correctAnswer={feedback?.correctAnswer}
                        onClose={handleNext}
                    />
                </div>
            );
        };

        // Shape Choices Quiz
        const ShapeChoicesQuiz = ({ onComplete, timerEnabled, bestTime }) => {
            const [queue] = useState(() => shuffle([...STATES_DATA]));
            const [index, setIndex] = useState(0);
            const [choices, setChoices] = useState(() => getRandomChoices(queue[0]));
            const [correct, setCorrect] = useState(0);
            const [feedback, setFeedback] = useState(null);
            const [selected, setSelected] = useState(null);
            const [startTime] = useState(Date.now());
            const [elapsed, setElapsed] = useState(0);

            useEffect(() => {
                if (timerEnabled) {
                    const interval = setInterval(() => setElapsed(Date.now() - startTime), 100);
                    return () => clearInterval(interval);
                }
            }, [timerEnabled, startTime]);

            const current = queue[index];

            const handleChoice = (choice) => {
                if (feedback) return;
                setSelected(choice.id);
                const isCorrect = choice.id === current.id;
                if (isCorrect) setCorrect(c => c + 1);
                setFeedback({ isCorrect, correctAnswer: current.name });
            };

            const handleNext = () => {
                setFeedback(null);
                setSelected(null);
                if (index + 1 >= 50) {
                    const isNewRecord = timerEnabled && saveBestTime('shapeChoices', elapsed);
                    onComplete(correct, 50, elapsed, isNewRecord);
                } else {
                    const nextIndex = index + 1;
                    setIndex(nextIndex);
                    setChoices(getRandomChoices(queue[nextIndex]));
                }
            };

            return (
                <div className="quiz-container">
                    <div className="quiz-header">
                        {timerEnabled && (
                            <div className="timer-display">
                                <span className="timer-current">⏱️ {formatTime(elapsed)}</span>
                                {bestTime && <span className="timer-best">🏆 {formatTime(bestTime)}</span>}
                            </div>
                        )}
                    </div>
                    <div className="progress-section">
                        <div className="progress-bar">
                            <div className="progress-fill" style={{ width: `${((index + 1) / 50) * 100}%` }} />
                        </div>
                        <div className="progress-text">{index + 1}/50</div>
                    </div>
                    <div className="state-name-display">
                        <h2>{current.name}</h2>
                        <p>Find this state:</p>
                    </div>
                    <div className="shape-choices">
                        {choices.map(choice => (
                            <div
                                key={choice.id}
                                className={`shape-choice ${
                                    feedback && choice.id === current.id ? 'correct' : ''
                                } ${feedback && selected === choice.id && choice.id !== current.id ? 'incorrect' : ''}`}
                                onClick={() => handleChoice(choice)}
                            >
                                <svg viewBox="0 0 960 600" preserveAspectRatio="xMidYMid meet">
                                    <path d={STATE_PATHS[choice.id]} fill="#4d96ff" stroke="#3a7bd5" strokeWidth="2" />
                                </svg>
                            </div>
                        ))}
                    </div>
                    <FeedbackOverlay
                        show={feedback !== null}
                        isCorrect={feedback?.isCorrect}
                        correctAnswer={feedback?.correctAnswer}
                        onClose={handleNext}
                    />
                </div>
            );
        };

        // Completion Screen
        const CompletionScreen = ({ score, total, time, isNewRecord, onPlayAgain, onChangeMode }) => (
            <div className="completion-screen">
                <Confetti active={true} />
                <div className="trophy">{score >= 40 ? '🏆' : score >= 25 ? '🌟' : '👏'}</div>
                <h2>{score >= 40 ? 'Amazing!' : score >= 25 ? 'Great Job!' : 'Good Effort!'}</h2>
                <div className="score">{score}/{total} correct</div>
                {time > 0 && (
                    <div className={`time-result ${isNewRecord ? 'new-record' : ''}`}>
                        Time: {formatTime(time)} {isNewRecord && '🎉 New Record!'}
                    </div>
                )}
                <button className="play-again-button" onClick={onPlayAgain}>Play Again</button>
                <button className="play-again-button" onClick={onChangeMode} style={{ background: '#6bcb77', marginTop: '8px' }}>
                    Change Mode
                </button>
            </div>
        );

        // Main App
        const App = () => {
            const [mode, setMode] = useState(null);
            const [timerEnabled, setTimerEnabled] = useState(false);
            const [result, setResult] = useState(null);
            const [currentRandomMode, setCurrentRandomMode] = useState(null);
            const bestTimes = loadBestTimes();

            const handleModeSelect = (selectedMode) => {
                if (selectedMode === 'random') {
                    const modes = ['fullMap', 'singleState', 'nameChoices', 'shapeChoices'];
                    const randomMode = modes[Math.floor(Math.random() * modes.length)];
                    setCurrentRandomMode(randomMode);
                    setMode('random');
                } else {
                    setMode(selectedMode);
                }
            };

            const handleComplete = (score, total, time, isNewRecord) => {
                setResult({ score, total, time, isNewRecord });
            };

            const handlePlayAgain = () => {
                setResult(null);
                if (mode === 'random') {
                    const modes = ['fullMap', 'singleState', 'nameChoices', 'shapeChoices'];
                    setCurrentRandomMode(modes[Math.floor(Math.random() * modes.length)]);
                }
            };

            const handleChangeMode = () => {
                setMode(null);
                setResult(null);
                setCurrentRandomMode(null);
            };

            const handleBack = () => {
                setMode(null);
                setResult(null);
                setCurrentRandomMode(null);
            };

            const activeMode = mode === 'random' ? currentRandomMode : mode;

            const renderQuiz = () => {
                const modeKey = mode === 'random' ? 'random' : activeMode;
                switch (activeMode) {
                    case 'fullMap':
                        return <FullMapQuiz onComplete={handleComplete} timerEnabled={timerEnabled} bestTime={bestTimes[modeKey]} />;
                    case 'singleState':
                        return <SingleStateQuiz onComplete={handleComplete} timerEnabled={timerEnabled} bestTime={bestTimes[modeKey]} />;
                    case 'nameChoices':
                        return <NameChoicesQuiz onComplete={handleComplete} timerEnabled={timerEnabled} bestTime={bestTimes[modeKey]} />;
                    case 'shapeChoices':
                        return <ShapeChoicesQuiz onComplete={handleComplete} timerEnabled={timerEnabled} bestTime={bestTimes[modeKey]} />;
                    default:
                        return null;
                }
            };

            return (
                <div className="app-container">
                    <div className="header">
                        <h1>US States Quiz</h1>
                        {!mode && <p className="subtitle">Learn all 50 states!</p>}
                    </div>

                    {result ? (
                        <CompletionScreen
                            {...result}
                            onPlayAgain={handlePlayAgain}
                            onChangeMode={handleChangeMode}
                        />
                    ) : mode ? (
                        <>
                            <button className="back-button" onClick={handleBack}>← Back</button>
                            {renderQuiz()}
                        </>
                    ) : (
                        <ModeSelector
                            onSelect={handleModeSelect}
                            timerEnabled={timerEnabled}
                            onTimerToggle={() => setTimerEnabled(t => !t)}
                        />
                    )}
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
